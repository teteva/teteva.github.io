
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=b2f8404227306">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Route-level code splitting in Angular</title>
<meta name="description" content="Learn how to make your initial app bundle smaller by using route-level code splitting. " />

<link rel="canonical" href="https://web.dev/route-level-code-splitting-in-angular/" />

<meta itemprop="name" content="Route-level code splitting in Angular" />
<meta itemprop="description" content="Learn how to make your initial app bundle smaller by using route-level code splitting. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/route-level-code-splitting-in-angular/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Route-level code splitting in Angular" />
<meta property="og:description" content="Learn how to make your initial app bundle smaller by using route-level code splitting. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Route-level code splitting in Angular" />
<meta name="twitter:description" content="Learn how to make your initial app bundle smaller by using route-level code splitting. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=8d7ba0e690e75', 'module');




  loadScript('/js/content.js?v=9e53f143a01c', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  
    <img     alt="Hero Image"     class="w-hero w-hero--cover"     decoding="auto"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/WVwZbWEEXUfXzVTtAlha.jpg?auto=format&w=1600 1600w"          width="1600"   />
  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#route-level-code-splitting-in-angular" class="w-toc__header--link">
        Route-level code splitting in Angular
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#why-code-splitting-matters">Why code splitting matters</a></li><li><a href="#code-splitting-techniques">Code splitting techniques</a><ol><li><a href="#sample-application">Sample application</a></li><li><a href="#route-level-code-splitting">Route-level code splitting</a></li><li><a href="#show-a-spinner">Show a spinner</a></li></ol></li><li><a href="#conclusion">Conclusion</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@mgechev"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      

      <h1 id="route-level-code-splitting-in-angular" class="w-article-header__headline">Route-level code splitting in Angular</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          <p>Improve the performance of your app by using route-level code splitting!</p>

        </p>
      

      
        <div class="w-author__published">
          <time>Jun 24, 2019</time>
          
        </div>
      

      
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/angular"
          >Angular</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/mgechev/"><img     alt="Minko Gechev"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/OPpZ9x8KCVcxvqgdWXM5.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/mgechev/">Minko Gechev</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/mgechev"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/mgechev">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@mgechev"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://blog.mgechev.com/">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>This post explains how to set up route-level <a href="/reduce-javascript-payloads-with-code-splitting/">code splitting</a> in an Angular application, which can reduce JavaScript bundle size and dramatically improve <a href="/interactive">Time to Interactive</a>.</p>
<p><em>You can find the code samples from this article on <a href="https://github.com/mgechev/code-splitting-web-dev" rel="noopener">GitHub</a>. The eager routing example is available in the <a href="https://github.com/mgechev/code-splitting-web-dev/tree/eager" rel="noopener">eager branch</a>. The route-level code splitting example is in the <a href="https://github.com/mgechev/code-splitting-web-dev/tree/lazy" rel="noopener">lazy branch</a>.</em></p>
<div class="w-aside w-aside--note">
<p>This post assumes understanding of the Angular router. For a guide on how to use it, visit Angular's <a href="https://angular.io/guide/router" rel="noopener">official documentation</a>.</p>
</div>
<h2 id="why-code-splitting-matters">Why code splitting matters <a class="w-headline-link" href="#why-code-splitting-matters">#</a></h2>
<p>The ever growing complexity of web applications has led to a significant increase in the amount of JavaScript shipped to users. Large JavaScript files can noticeably delay interactivity, so it can be a costly resource, especially on mobile.</p>
<p>The most efficient way to shrink JavaScript bundles without sacrificing features in your applications is to introduce aggressive code splitting.</p>
<p><strong><a href="/reduce-javascript-payloads-with-code-splitting/">Code splitting</a></strong> lets you divide the JavaScript of your application into multiple chunks associated with different routes or features. This approach only sends users the JavaScript they need during the initial application load, keeping load times low.</p>
<div class="w-aside w-aside--note">
<p>By using code splitting, <a href="https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4" rel="noopener">Twitter and Tinder</a> observed improvements of up to 50% for their <a href="/interactive">Time to Interactive</a>.</p>
</div>
<h2 id="code-splitting-techniques">Code splitting techniques <a class="w-headline-link" href="#code-splitting-techniques">#</a></h2>
<p>Code splitting can be done at two levels: the <strong>component level</strong> and the <strong>route level</strong>.</p>
<ul>
<li>In component-level code splitting, you move components to their own JavaScript chunks and load them lazily when they are needed.</li>
<li>In route-level code splitting, you encapsulate the functionality of each route into a separate chunk. When users navigate your application they fetch the chunks associated with the individual routes and get the associated functionality when they need it.</li>
</ul>
<p>This post focuses on setting up route-level splitting in Angular.</p>
<h3 id="sample-application">Sample application <a class="w-headline-link" href="#sample-application">#</a></h3>
<p>Before digging into how to use route level code splitting in Angular, let's look at a sample app:</p>
<div class="glitch-embed-wrap" style="height: 480px; width: 100%;">
  <iframe
  allow=""
  loading="lazy"
  src="https://stackblitz.com/github/mgechev/code-splitting-web-dev/tree/eager?embed=1&file=src/app/app.component.ts&view=preview"
  style="height: 100%; width: 100%; border: 0;"
  title="IFrame content"
></iframe>
</div>
<p>Check out the implementation of the app's modules. Inside <code>AppModule</code> two routes are defined: the default route associated with <code>HomeComponent</code> and a <code>nyan</code> route associated with <code>NyanComponent</code>:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript">@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token operator">...</span><br>  imports<span class="token operator">:</span> <span class="token punctuation">[</span><br>    BrowserModule<span class="token punctuation">,</span><br>    RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>      <span class="token punctuation">{</span><br>        path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>        component<span class="token operator">:</span> HomeComponent<span class="token punctuation">,</span><br>        pathMatch<span class="token operator">:</span> <span class="token string">'full'</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token punctuation">{</span><br>        path<span class="token operator">:</span> <span class="token string">'nyan'</span><span class="token punctuation">,</span><br>        component<span class="token operator">:</span> NyanComponent<br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token operator">...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="route-level-code-splitting">Route-level code splitting <a class="w-headline-link" href="#route-level-code-splitting">#</a></h3>
<p>To set up code splitting, the <code>nyan</code> eager route needs to be refactored.</p>
<p>Version 8.1.0 of the Angular CLI can do everything for you with this command:</p>
<web-copy-code><pre class="language-bash"><code class="language-bash">ng g module nyan --module app --route nyan</code></pre>
</web-copy-code><p>This will generate:</p>
<ul>
<li>A new routing module called <code>NyanModule</code></li>
<li>A route in <code>AppModule</code> called <code>nyan</code> that will dynamically load the <code>NyanModule</code></li>
<li>A default route in the <code>NyanModule</code></li>
<li>A component called <code>NyanComponent</code> that will be rendered when the user hits the default route</li>
</ul>
<p>Let's go through these steps manually so we get a better understanding of implementing code splitting with Angular!</p>
<p>When the user navigates to the <code>nyan</code> route, the router will render the <code>NyanComponent</code> in the router outlet.</p>
<p>To use route-level code splitting in Angular, set the <code>loadChildren</code> property of the route declaration and combine it with a dynamic import:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  path<span class="token operator">:</span> <span class="token string">'nyan'</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token function-variable function">loadChildren</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./nyan/nyan.module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=></span> m<span class="token punctuation">.</span>NyanModule<span class="token punctuation">)</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>There are a two key differences from the eager route:</p>
<ol>
<li>You set <code>loadChildren</code> instead of <code>component</code>. When using route-level code splitting you need to point to dynamically loaded modules, instead of components.</li>
<li>In <code>loadChildren</code>, once the promise is resolved you return the <code>NyanModule</code> instead of pointing to the <code>NyanComponent</code>.</li>
</ol>
<p>The snippet above specifies that when the user navigates to <code>nyan</code>, Angular should dynamically load <code>nyan.module</code> from the <code>nyan</code> directory and render the component associated with the default route declared in the module.</p>
<p>You can associate the default route with a component using this declaration:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> NyanComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./nyan.component'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> RouterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span><br><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>NyanComponent<span class="token punctuation">]</span><span class="token punctuation">,</span><br>  imports<span class="token operator">:</span> <span class="token punctuation">[</span><br>    RouterModule<span class="token punctuation">.</span><span class="token function">forChild</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><br>      path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br>      pathMatch<span class="token operator">:</span> <span class="token string">'full'</span><span class="token punctuation">,</span><br>      component<span class="token operator">:</span> NyanComponent<br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NyanModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>This code renders <code>NyanComponent</code> when the user navigates to <code>https://example.com/nyan</code>.</p>
<p>To check that the Angular router downloads the <code>nyan.module</code> lazily in your local environment:</p>
<ol>
<li>
<p>Press `Control+Shift+J` (or `Command+Option+J` on Mac) to open DevTools.</p>
</li>
<li>
<p>Click the <strong>Network</strong> tab.</p>
</li>
<li>
<p>Click <strong>NYAN</strong> in the sample app.</p>
</li>
<li>
<p>Note that the <code>nyan-nyan-module.js</code> file appears in the network tab.</p>
</li>
</ol>
<img     alt="Lazy-loading of JavaScript bundles with route-level code splitting"          decoding="async"     height="524"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/wT4xLV2OkrZ2b7QaQz8L.png?auto=format&w=1600 1600w"          width="800"   />
<p><em>Find this example <a href="https://github.com/mgechev/code-splitting-web-dev/tree/lazy/src" rel="noopener">on GitHub</a>.</em></p>
<h3 id="show-a-spinner">Show a spinner <a class="w-headline-link" href="#show-a-spinner">#</a></h3>
<p>Right now, when the user clicks the <strong>NYAN</strong> button, the application doesn't indicate that it's loading JavaScript in the background. To give the user feedback while loading the script you'll probably want to add a spinner.</p>
<p>To do that, start by adding markup for the indicator inside the <code>router-outlet</code> element in <code>app.component.html</code>:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loader<span class="token punctuation">"</span></span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>Then add an <code>AppComponent</code> class to handle routing events. This class will set the <code>loading</code> flag to <code>true</code> when it hears the <code>RouteConfigLoadStart</code> event and set the flag to <code>false</code> when it hears the <code>RouteConfigLoadEnd</code> event.</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  selector<span class="token operator">:</span> <span class="token string">'app-root'</span><span class="token punctuation">,</span><br>  templateUrl<span class="token operator">:</span> <span class="token string">'./app.component.html'</span><span class="token punctuation">,</span><br>  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./app.component.css'</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppComponent</span> <span class="token punctuation">{</span><br>  loading<span class="token operator">:</span> boolean<span class="token punctuation">;</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">router<span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span>event<span class="token operator">:</span> RouterEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationStart</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">NavigationEnd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>In the example below we've introduced an artificial 500 ms latency so that you can see the spinner in action.</p>
<div class="glitch-embed-wrap" style="height: 480px; width: 100%;">
  <iframe
  allow=""
  loading="lazy"
  src="https://stackblitz.com/github/mgechev/code-splitting-web-dev/tree/lazy?embed=1&file=src/app/app.component.ts&view=preview"
  style="height: 100%; width: 100%; border: 0;"
  title="IFrame content"
></iframe>
</div>
<div class="w-aside w-aside--warning">
<p><strong>Warning</strong>:
Code splitting can significantly improve an app's initial load time, but it comes at the cost of slowing down subsequent navigation. In the <a href="/route-preloading-in-angular">next post</a> on route preloading you'll see how to work around this problem!</p>
</div>
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>You can shrink the bundle size of your Angular applications by applying route-level code splitting:</p>
<ol>
<li>Use the Angular CLI lazy-loaded module generator to automatically scaffold a dynamically loaded route.</li>
<li>Add a loading indicator when the user navigates to a lazy route to show there's an ongoing action.</li>
</ol>


    

    
  <div class="w-chips ">
    
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Performance</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jun 24, 2019</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/angular/route-level-code-splitting-in-angular/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/angular"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
