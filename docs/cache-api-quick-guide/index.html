
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=c2845d84eaa1a">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=9c7fa417b54d8">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>The Cache API: A quick guide</title>
<meta name="description" content="Learn how to use the Cache API to make your application data available offline." />

<link rel="canonical" href="https://web.dev/cache-api-quick-guide/" />

<meta itemprop="name" content="The Cache API: A quick guide" />
<meta itemprop="description" content="Learn how to use the Cache API to make your application data available offline." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/cache-api-quick-guide/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="The Cache API: A quick guide" />
<meta property="og:description" content="Learn how to use the Cache API to make your application data available offline." />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="progressive-web-apps" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="The Cache API: A quick guide" />
<meta name="twitter:description" content="Learn how to use the Cache API to make your application data available offline." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=44e5a6343ce1f', 'module');




  loadScript('/js/content.js?v=6a8593643ffa3', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  






<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#where-is-it-available">Where is it available?</a></li><li class="toc__listitem"><a class="toc__anchor" href="#what-can-be-stored">What can be stored</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#how-much-can-be-stored">How much can be stored?</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#creating-and-opening-a-cache">Creating and opening a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#adding-to-a-cache">Adding to a cache</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#cache.add">cache.add</a></li><li class="toc__listitem"><a class="toc__anchor" href="#cache.addall">cache.addAll</a></li><li class="toc__listitem"><a class="toc__anchor" href="#cache.put">cache.put</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#retrieving">Retrieving from a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#searching">Searching</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#filtering">Filtering</a></li><li class="toc__listitem"><a class="toc__anchor" href="#creating-an-index">Creating an index</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#deleting-an-item">Deleting an item</a></li><li class="toc__listitem"><a class="toc__anchor" href="#deleting-a-cache">Deleting a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thanks">Thanks</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="the-cache-api:-a-quick-guide">The Cache API: A quick guide</h1>
        
          <p class="color-mid-text flow-space-base">
            Learn how to use the Cache API to make your application data available offline.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Oct 3, 2017</time>
             — Updated <time>Apr 27, 2020</time> 
          </div>
        

        
        

        <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/reliable"
          >Network reliability</a
        >
</div>

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/petelepage/"> <img     alt="Pete LePage"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/3rFbsLsMMk1VveHfBRSu.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/petelepage/">Pete LePage</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/petele">Twitter</a>
               <a href="https://github.com/petele">GitHub</a>
               <a href="https://glitch.com/@petele">Glitch</a>
               <a href="https://petelepage.com">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#where-is-it-available">Where is it available?</a></li><li class="toc__listitem"><a class="toc__anchor" href="#what-can-be-stored">What can be stored</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#how-much-can-be-stored">How much can be stored?</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#creating-and-opening-a-cache">Creating and opening a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#adding-to-a-cache">Adding to a cache</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#cache.add">cache.add</a></li><li class="toc__listitem"><a class="toc__anchor" href="#cache.addall">cache.addAll</a></li><li class="toc__listitem"><a class="toc__anchor" href="#cache.put">cache.put</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#retrieving">Retrieving from a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#searching">Searching</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#filtering">Filtering</a></li><li class="toc__listitem"><a class="toc__anchor" href="#creating-an-index">Creating an index</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#deleting-an-item">Deleting an item</a></li><li class="toc__listitem"><a class="toc__anchor" href="#deleting-a-cache">Deleting a cache</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thanks">Thanks</a></li></ul></div>
    </details>
  </div>



      <p>The <a href="https://developer.mozilla.org/docs/Web/API/Cache" rel="noopener">Cache API</a> is a system for storing and retrieving network
requests and their corresponding responses. These might be regular requests
and responses created in the course of running your application, or they could
be created solely for the purpose of storing data for later use.</p>
<p>The Cache API was created to enable service workers to cache network requests
so that they can provide fast responses, regardless of network speed or
availablity. However, the API can also be used as a general storage mechanism.</p>
<h2 id="where-is-it-available">Where is it available? <a class="w-headline-link" href="#where-is-it-available">#</a></h2>
<p>The Cache API is available in <a href="https://caniuse.com/#feat=mdn-api_cache" rel="noopener">all modern browsers</a>. It is
exposed via the global <code>caches</code> property, so you can test for the presence of
the API with a simple feature detection:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cacheAvailable <span class="token operator">=</span> <span class="token string">'caches'</span> <span class="token keyword">in</span> self<span class="token punctuation">;</span></code></pre>
</web-copy-code><p>The Cache API can be accessed from a window, iframe, worker, or service worker.</p>
<h2 id="what-can-be-stored">What can be stored <a class="w-headline-link" href="#what-can-be-stored">#</a></h2>
<p>The caches only store pairs of <a href="https://developer.mozilla.org/docs/Web/API/Request" rel="noopener"><code>Request</code></a> and
<a href="https://developer.mozilla.org/docs/Web/API/Response" rel="noopener"><code>Response</code></a> objects, representing HTTP requests and responses,
respectively. However, the requests and responses can contain any kind of data
that can be transferred over HTTP.</p>
<h3 id="how-much-can-be-stored">How much can be stored? <a class="w-headline-link" href="#how-much-can-be-stored">#</a></h3>
<p>In short, <strong>a lot</strong>, at least a couple of hundred megabytes, and potentially
hundreds of gigabytes or more. Browser implementations vary, but the amount
of storage available is usually based on the amount of storage available on
the device.</p>
<h2 id="creating-and-opening-a-cache">Creating and opening a cache <a class="w-headline-link" href="#creating-and-opening-a-cache">#</a></h2>
<p>To open a cache, use the <code>caches.open(name)</code> method, passing the name of the
cache as the single parameter. If the named cache does not exist, it is
created. This method returns a <code>Promise</code> that resolves with the <code>Cache</code> object.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'my-cache'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// do something with cache...</span></code></pre>
</web-copy-code><h2 id="adding-to-a-cache">Adding to a cache <a class="w-headline-link" href="#adding-to-a-cache">#</a></h2>
<p>There are three ways to add an item to a cache - <code>add</code>, <code>addAll</code>, and <code>put</code>.
All three methods return a <code>Promise</code>.</p>
<h3 id="cache.add"><code>cache.add</code> <a class="w-headline-link" href="#cache.add">#</a></h3>
<p>First, there is <code>cache.add()</code>. It takes one parameter, either a <code>Request</code>
or a URL (<code>string</code>). It makes a request to the network and stores the response
in the cache. If the
fetch fails, or if the status code of the response is not in the 200 range,
then nothing is stored and the <code>Promise</code> rejects. Note that cross-origin
requests not in CORS mode cannot be stored because they return a <code>status</code> of
<code>0</code>. Such requests can only be stored with <code>put</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Retreive data.json from the server and store the response.</span><br>cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">'/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Retreive data.json from the server and store the response.</span><br>cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="cache.addall"><code>cache.addAll</code> <a class="w-headline-link" href="#cache.addall">#</a></h3>
<p>Next, there is <code>cache.addAll()</code>. It works similarly to <code>add()</code>, but takes an
array of <code>Request</code> objects or URLs (<code>string</code>s). This works similarly to
calling <code>cache.add</code> for each individual request, except that the <code>Promise</code>
rejects if any single request is not cached.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/weather/today.json'</span><span class="token punctuation">,</span> <span class="token string">'/weather/tomorrow.json'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>In each of these cases, a new entry overwrites any matching existing entry.
This uses the same matching rules described in the section on
<a href="#retrieving">retrieving</a>.</p>
<h3 id="cache.put"><code>cache.put</code> <a class="w-headline-link" href="#cache.put">#</a></h3>
<p>Finally, there is <code>cache.put()</code>, which allows you to store either a response
from the network, or create and store your own <code>Response</code>. It takes two
parameters. The first can either be a <code>Request</code> object or a URL (<code>string</code>).
The second must be a <code>Response</code>, either from the network, or generated by your
code.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Retrieve data.json from the server and store the response.</span><br>cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Create a new entry for test.json and store the newly created response.</span><br>cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/test.json'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'{"foo": "bar"}'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Retrieve data.json from the 3rd party site and store the response.</span><br>cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'https://example.com/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>The <code>put()</code> method is more permissive than either <code>add()</code> or <code>addAll()</code>, and
will allow you to store non-CORS responses, or other responses where the status
code of the response is not in the 200 range. It will overwrite any previous
responses for the same request.</p>
<h4 id="creating-request-objects">Creating Request objects <a class="w-headline-link" href="#creating-request-objects">#</a></h4>
<p>Create the <code>Request</code> object using a URL for the thing being stored:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">'/my-data-store/item-id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h4 id="working-with-response-objects">Working with Response objects <a class="w-headline-link" href="#working-with-response-objects">#</a></h4>
<p>The <code>Response</code> object constructor accepts many types of data, including
<code>Blob</code>s, <code>ArrayBuffer</code>s, <code>FormData</code> objects, and strings.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> imageBlob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'image/jpeg'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> imageResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>imageBlob<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> stringResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>You can set the MIME type of a <code>Response</code> by setting the appropriate header.</p>
<web-copy-code><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>    headers<span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> jsonResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'{}'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>If you have retrieved a <code>Response</code> and wish to access its body, there are
several helper methods you can use. Each returns a <code>Promise</code> that resolves
with a value of a different type.</p>
<table>
  <thead>
    <th>Method</th>
    <th>Description</th>
  </thead>
  <tbody>
    <tr>
      <td><code>arrayBuffer</code></td>
      <td>
        Returns an <code>ArrayBuffer</code> containing the body, serialized to
        bytes.
      </td>
    </tr>
    <tr>
      <td><code>blob</code></td>
      <td>
        Returns a <code>Blob</code>. If the <code>Response</code> was created
        with a <code>Blob</code> then this new <code>Blob</code> has the same
        type. Otherwise, the <code>Content-Type</code> of the
        <code>Response</code> is used.
      </td>
    </tr>
    <tr>
      <td><code>text</code></td>
      <td>
        Interprets the bytes of the body as a UTF-8 encoded string.
      </td>
    </tr>
    <tr>
      <td><code>json</code></td>
      <td>
        Interprets the bytes of the body as a UTF-8 encoded string, then tries
        to parse it as JSON. Returns the resulting object, or throws a
        <code>TypeError</code> if the string cannot be parsed as JSON.
      </td>
    </tr>
    <tr>
      <td><code>formData</code></td>
      <td>
        Interprets the bytes of the body as an HTML form, encoded either as
        <code>multipart/form-data</code> or
        <code>application/x-www-form-urlencoded</code>. Returns a
        <a href="https://developer.mozilla.org/docs/Web/API/FormData">FormData</a>
        object, or throws a <code>TypeError</code> if the data cannot be parsed.
      </td>
    </tr>
    <tr>
      <td><code>body</code></td>
      <td>
        Returns a <a href="https://developer.mozilla.org/docs/Web/API/ReadableStream">ReadableStream</a>
        for the body data.
      </td>
    </tr>
  </tbody>
</table>
<p>For example</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Uint8Array(11) [72, 101, 108, 108, 111, 32, 119, 111, 114, 108, 100]</span></code></pre>
</web-copy-code><h2 id="retrieving">Retrieving from a cache <a class="w-headline-link" href="#retrieving">#</a></h2>
<p>To find an item in a cache, you can use the <code>match</code> method.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>If <code>request</code> is a string the browser converts it to a <code>Request</code> by calling
<code>new Request(request)</code>. The function returns a <code>Promise</code> that resolves to
a <code>Response</code> if a matching entry is found, or <code>undefined</code> otherwise.</p>
<p>To determine if two <code>Requests</code> match, the browser uses more than just the URL. Two
requests are considered different if they have different query strings,
<code>Vary</code> headers, or HTTP methods (<code>GET</code>, <code>POST</code>, <code>PUT</code>, etc.).</p>
<p>You can ignore some or all of these things by passing an options object as a
second parameter.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>  ignoreSearch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  ignoreMethod<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  ignoreVary<span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// do something with the response</span></code></pre>
</web-copy-code><p>If more than one cached request matches then the one that was created first is
returned. If you want to retrieve <em>all</em> matching responses, you can use
<code>cache.matchAll()</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>  ignoreSearch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  ignoreMethod<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  ignoreVary<span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> responses <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">There are </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>responses<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> matching responses.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>As a shortcut you can search over all caches at once by using <code>caches.match()</code>
instead of calling <code>cache.match()</code> for each cache.</p>
<h2 id="searching">Searching <a class="w-headline-link" href="#searching">#</a></h2>
<p>The Cache API does not provide a way to search for requests or responses
except for matching entries against a <code>Response</code> object. However, you can
implement your own search using filtering or by creating an index.</p>
<h3 id="filtering">Filtering <a class="w-headline-link" href="#filtering">#</a></h3>
<p>One way to implement your own search is to iterate over all entries and
filter down to the ones that you want. Let's say that you want to find all
items that have URLs ending with <code>.png</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">findImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Get a list of all of the caches for this origin</span><br>  <span class="token keyword">const</span> cacheNames <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">of</span> cacheNames<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Open the cache</span><br>    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Get a list of entries. Each item is a Request object</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> request <span class="token keyword">of</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// If the request URL matches, add the response to the result</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>This way you can use any property of the <code>Request</code> and <code>Response</code> objects to
filter the entries. Note that this is slow if you search over large sets of
data.</p>
<h3 id="creating-an-index">Creating an index <a class="w-headline-link" href="#creating-an-index">#</a></h3>
<p>The other way to implement your own search is to maintain a separate index of
entries that can be searched and store the index in IndexedDB. Since this is the kind of
operation that IndexedDB was designed for it has much better performance with
large numbers of entries.</p>
<p>If you store the URL of the <code>Request</code> alongside the searchable properties
then you can easily retrieve the correct cache entry after doing the search.</p>
<h2 id="deleting-an-item">Deleting an item <a class="w-headline-link" href="#deleting-an-item">#</a></h2>
<p>To delete an item from a cache:</p>
<web-copy-code><pre class="language-js"><code class="language-js">cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Where request can be a <code>Request</code> or a URL string. This method also takes the
same options object as <code>cache.match</code>, which allows you to delete multiple
<code>Request</code>/<code>Response</code> pairs for the same URL.</p>
<web-copy-code><pre class="language-js"><code class="language-js">cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/example/file.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>ignoreVary<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> ignoreSearch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h2 id="deleting-a-cache">Deleting a cache <a class="w-headline-link" href="#deleting-a-cache">#</a></h2>
<p>To delete a cache, call <code>caches.delete(name)</code>. This function returns a
<code>Promise</code> that resolves to <code>true</code> if the cache existed and was deleted, or
<code>false</code> otherwise.</p>
<h2 id="thanks">Thanks <a class="w-headline-link" href="#thanks">#</a></h2>
<p>Thanks to Mat Scales who wrote the original version of this article, which
first appeared on WebFundamentals.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/progressive-web-apps/">Progressive Web Apps</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Apr 27, 2020</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/cache-api-quick-guide/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@petele"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
