
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=ca2a796e7bc18">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=bf6a1e463d74c">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Building an effective Image Component</title>
<meta name="description" content="Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. This article explains how the Aurora team at Google designed a powerful image component in Next.js that is built-in with a number of optimizations via a developer-friendly interface. This post discusses how the component was designed and the lessons we learned along the way. " />

<link rel="canonical" href="https://web.dev/image-component/" />

<meta itemprop="name" content="Building an effective Image Component" />
<meta itemprop="description" content="Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. This article explains how the Aurora team at Google designed a powerful image component in Next.js that is built-in with a number of optimizations via a developer-friendly interface. This post discusses how the component was designed and the lessons we learned along the way. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/image-component/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Building an effective Image Component" />
<meta property="og:description" content="Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. This article explains how the Aurora team at Google designed a powerful image component in Next.js that is built-in with a number of optimizations via a developer-friendly interface. This post discusses how the component was designed and the lessons we learned along the way. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Assembling the pieces of a puzzle" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Building an effective Image Component" />
<meta name="twitter:description" content="Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. This article explains how the Aurora team at Google designed a powerful image component in Next.js that is built-in with a number of optimizations via a developer-friendly interface. This post discusses how the component was designed and the lessons we learned along the way. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=e57b6d207661', 'module');




  loadScript('/js/content.js?v=27986cfb12655', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Assembling the pieces of a puzzle"     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#image-optimization-issues-and-opportunities">Image optimization issues and opportunities</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#unsized-images-hurt-cls">Unsized images hurt CLS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#large-images-can-hurt-lcp">Large images can hurt LCP</a></li><li class="toc__listitem"><a class="toc__anchor" href="#poor-image-compression-can-hurt-lcp">Poor image compression can hurt LCP</a></li><li class="toc__listitem"><a class="toc__anchor" href="#loading-unnecessary-images-hurts-lcp">Loading unnecessary images hurts LCP</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#optimization-challenges">Optimization challenges</a></li><li class="toc__listitem"><a class="toc__anchor" href="#image-component-as-a-solution">Image component as a solution</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#protection-from-layout-shifts">Protection from layout shifts</a></li><li class="toc__listitem"><a class="toc__anchor" href="#facilitate-responsiveness">Facilitate responsiveness</a></li><li class="toc__listitem"><a class="toc__anchor" href="#provide-built-in-lazy-loading">Provide built-in lazy-loading</a></li><li class="toc__listitem"><a class="toc__anchor" href="#preload-important-images">Preload important images</a></li><li class="toc__listitem"><a class="toc__anchor" href="#encourage-high-performance-image-hosting">Encourage high-performance image hosting</a></li><li class="toc__listitem"><a class="toc__anchor" href="#support-self-hosted-images">Support self-hosted images</a></li><li class="toc__listitem"><a class="toc__anchor" href="#support-progressive-loading">Support progressive loading</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#impact">Impact</a></li><li class="toc__listitem"><a class="toc__anchor" href="#lessons-learned">Lessons Learned</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#safety-valves-can-cause-more-harm-than-good">Safety valves can cause more harm than good</a></li><li class="toc__listitem"><a class="toc__anchor" href="#separate-useful-friction-from-pointless-annoyance">Separate useful friction from pointless annoyance</a></li><li class="toc__listitem"><a class="toc__anchor" href="#strike-a-balance-between-convenience-features-and-performance-optimizations">Strike a balance between convenience features and performance optimizations</a></li><li class="toc__listitem"><a class="toc__anchor" href="#set-a-roadmap-for-features-to-drive-adoption">Set a roadmap for features to drive adoption</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="building-an-effective-image-component">Building an effective Image Component</h1>
        
          <p class="color-mid-text flow-space-base">
            An image component encapsulates performance best practices and provides an out-of-the-box solution to optimize images.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Oct 25, 2021</time>
             â€” Updated <time>Oct 25, 2021</time> 
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/leenasohoni/"> <img     alt="Leena Sohoni"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/VXCjCzLEGWApTkZkNZkR.JPG?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/leenasohoni/">Leena Sohoni</a>
    </cite>
    <div class="author__links cluster">
               
               
               
               
             </div>
  </div>
</div>
            
              <div class="author">
  <a class="avatar" href="/authors/karaerickson/"> <img     alt="Kara Erickson"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Az2VaHZ4nQ6ovvTvzCD3.jpeg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/karaerickson/">Kara Erickson</a>
    </cite>
    <div class="author__links cluster">
               
               
               
               
             </div>
  </div>
</div>
            
              <div class="author">
  <a class="avatar" href="/authors/alexcastle/"> <img     alt="Alex Castle"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/ofc2dLwuNURvRIMvTdIv.jpeg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/alexcastle/">Alex Castle</a>
    </cite>
    <div class="author__links cluster">
               
               
               
               
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#image-optimization-issues-and-opportunities">Image optimization issues and opportunities</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#unsized-images-hurt-cls">Unsized images hurt CLS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#large-images-can-hurt-lcp">Large images can hurt LCP</a></li><li class="toc__listitem"><a class="toc__anchor" href="#poor-image-compression-can-hurt-lcp">Poor image compression can hurt LCP</a></li><li class="toc__listitem"><a class="toc__anchor" href="#loading-unnecessary-images-hurts-lcp">Loading unnecessary images hurts LCP</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#optimization-challenges">Optimization challenges</a></li><li class="toc__listitem"><a class="toc__anchor" href="#image-component-as-a-solution">Image component as a solution</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#protection-from-layout-shifts">Protection from layout shifts</a></li><li class="toc__listitem"><a class="toc__anchor" href="#facilitate-responsiveness">Facilitate responsiveness</a></li><li class="toc__listitem"><a class="toc__anchor" href="#provide-built-in-lazy-loading">Provide built-in lazy-loading</a></li><li class="toc__listitem"><a class="toc__anchor" href="#preload-important-images">Preload important images</a></li><li class="toc__listitem"><a class="toc__anchor" href="#encourage-high-performance-image-hosting">Encourage high-performance image hosting</a></li><li class="toc__listitem"><a class="toc__anchor" href="#support-self-hosted-images">Support self-hosted images</a></li><li class="toc__listitem"><a class="toc__anchor" href="#support-progressive-loading">Support progressive loading</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#impact">Impact</a></li><li class="toc__listitem"><a class="toc__anchor" href="#lessons-learned">Lessons Learned</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#safety-valves-can-cause-more-harm-than-good">Safety valves can cause more harm than good</a></li><li class="toc__listitem"><a class="toc__anchor" href="#separate-useful-friction-from-pointless-annoyance">Separate useful friction from pointless annoyance</a></li><li class="toc__listitem"><a class="toc__anchor" href="#strike-a-balance-between-convenience-features-and-performance-optimizations">Strike a balance between convenience features and performance optimizations</a></li><li class="toc__listitem"><a class="toc__anchor" href="#set-a-roadmap-for-features-to-drive-adoption">Set a roadmap for features to drive adoption</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li></ul></div>
    </details>
  </div>



      <p>Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. Unoptimized images <a href="https://almanac.httparchive.org/en/2020/page-weight#image-bytes" rel="noopener">contribute to page bloat</a> and currently account for over 70% of the total page weight in bytes at the 90<sup>th</sup> percentile. Multiple ways to optimize images call for an intelligent &quot;image component&quot; with performance solutions baked in as a default.</p>
<p>The <a href="/introducing-aurora/">Aurora</a> team worked with <a href="https://nextjs.org/" rel="noopener">Next.js</a> to build <a href="https://nextjs.org/docs/basic-features/image-optimization#image-component" rel="noopener">one such component</a>. The goal was to create an optimized image template that web developers could further customize. The component serves as a good model and sets a standard for building image components in other frameworks, content management systems (CMS), and tech-stacks. We have collaborated on a similar <a href="https://image.nuxtjs.org/components/nuxt-img/" rel="noopener">component for Nuxt.js,</a> and we are working with <a href="https://angular.io/" rel="noopener">Angular</a> on image optimization in future versions. This post discusses how we designed the Next.js Image component and the lessons we learned along the way.</p>
<img     alt="Image component as an extension of images"          decoding="async"     height="320"          loading="lazy"     sizes="(min-width: 750px) 750px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&w=1500 1500w"          width="750"   />
<h2 id="image-optimization-issues-and-opportunities">Image optimization issues and opportunities <a class="w-headline-link" href="#image-optimization-issues-and-opportunities">#</a></h2>
<p>Images not only affect performance, but also business. The number of images on a page was the second <a href="https://almanac.httparchive.org/en/2019/page-weight#bigger-complex-pages-can-be-bad-for-your-business" rel="noopener">greatest predictor of conversions</a> of users visiting websites. Sessions in which users converted had 38% fewer images than sessions where they did not convert. Lighthouse lists multiple <a href="/fast/#optimize-your-images">opportunities</a> to optimize images and improve <a href="/vitals/">web vitals</a> as part of its best practices audit. Some of the common areas where images can affect core web vitals, and user experience are as follows.</p>
<h3 id="unsized-images-hurt-cls">Unsized images hurt CLS <a class="w-headline-link" href="#unsized-images-hurt-cls">#</a></h3>
<p>Images served without their size specified can cause layout instability and contribute to a high Cumulative Layout Shift (<a href="/cls/">CLS</a>). Setting the <code>width</code> and <code>height</code> attributes on <a href="/patterns/web-vitals-patterns/images/img-tag/">img</a> elements can help to prevent layout shifts. For example:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flower.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>360<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>240<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>The width and height should be set such that the aspect ratio of the rendered image is close to its natural aspect ratio. A significant <a href="/image-aspect-ratio/">difference in the aspect ratio</a> can result in the image looking distorted. A relatively new property that allows you to specify <a href="/aspect-ratio/">aspect-ratio in CSS</a> can help to size images responsively while preventing CLS.</p>
<h3 id="large-images-can-hurt-lcp">Large images can hurt LCP <a class="w-headline-link" href="#large-images-can-hurt-lcp">#</a></h3>
<p>The larger the file size of an image, the longer it will take to download. A large image could be the &quot;hero&quot; image for the page or the most significant element in the viewport responsible for triggering the Largest Contentful Paint (<a href="/lcp/">LCP</a>). An image that is part of the critical content and takes a long time to download will delay the LCP.</p>
<p>In many cases, developers can reduce image sizes through better compression and the use of <a href="https://developer.mozilla.org/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#how_do_you_create_responsive_images" rel="noopener">responsive</a> images. The <code>srcset</code> and <code>sizes</code> attributes of the <code>&lt;img&gt;</code> element help to provide image files with different sizes. The browser can then choose the right one depending on the screen size and resolution.</p>
<h3 id="poor-image-compression-can-hurt-lcp">Poor image compression can hurt LCP <a class="w-headline-link" href="#poor-image-compression-can-hurt-lcp">#</a></h3>
<p>Modern image formats like <a href="/compress-images-avif/">AVIF</a> or <a href="/serve-images-webp/">WebP</a> can provide better compression than commonly used JPEG and PNG formats. Better compression reduces the file size by 25% to 50% in some cases for the same quality of the image. This reduction leads to faster downloads with less data consumption. The app should <a href="/uses-webp-images/">serve modern image formats</a> to browsers that support these formats.</p>
<h3 id="loading-unnecessary-images-hurts-lcp">Loading unnecessary images hurts LCP <a class="w-headline-link" href="#loading-unnecessary-images-hurts-lcp">#</a></h3>
<p>Images below the fold or not in the viewport are not displayed to the user when the page is loaded. They can be deferred so that they do not contribute to the LCP and delay it. <a href="/lazy-loading-images/">Lazy-loading</a> can be used to load such images later as the user scrolls towards them.</p>
<h2 id="optimization-challenges">Optimization challenges <a class="w-headline-link" href="#optimization-challenges">#</a></h2>
<p>Teams can evaluate the performance cost due to the issues listed previously and implement best practice solutions to overcome them. However, this often does not happen in practice, and inefficient images continue to slow down the web. Possible reasons for this include:</p>
<ul>
<li><strong>Priorities</strong>: Web developers usually tend to focus on code, JavaScript, and data optimization. As such, they may not be aware of issues with images or how to optimize them. Images created by designers or uploaded by users may not be high in the list of priorities.</li>
<li><strong>Out-of-the-box solution</strong>: Even if developers are aware of the nuances of image optimization, the absence of an all-in-one out-of-the-box solution for their framework or tech-stack may be a deterrent.</li>
<li><strong>Dynamic images</strong>: In addition to static images that are part of the application, dynamic images are uploaded by users or sourced from external databases or CMS's. It may be challenging to define the size of such images where the source of the image is dynamic.</li>
<li><strong>Markup overload</strong>: Solutions for including the image size or <code>srcset</code> for different sizes require additional markup for every image, which can be tedious. The <code>srcset</code> attribute was introduced in 2014 but is <a href="https://almanac.httparchive.org/en/2020/media#srcset" rel="noopener">used by only 26.5%</a> of the websites today. When using <code>srcset</code>, developers have to create images in various sizes. Tools such as <a href="https://just-gimme-an-img.vercel.app/" rel="noopener">just-gimme-an-img</a> can help but have to be used manually for every image.</li>
<li><strong>Browser support</strong>: Modern image formats like AVIF and WebP create smaller image files but need special handling on browsers that don't support them. Developers have to use strategies like <a href="https://developer.mozilla.org/docs/Web/HTTP/Content_negotiation" rel="noopener">content negotiation</a> or the <a href="https://developer.mozilla.org/docs/Web/HTML/Element/picture" rel="noopener"><picture></a> element so that images are served to all browsers.</li>
<li><strong>Lazy loading complications</strong>: There are multiple techniques and libraries available to implement lazy-loading for below-the-fold images. Picking the best one can be a challenge. Developers may also not know the best distance from the &quot;fold&quot; to load deferred images. Different viewport sizes on devices can further complicate this.</li>
<li><strong>Changing landscape</strong>: As browsers start supporting new HTML or CSS features to enhance performance, it may be difficult for developers to evaluate each of them. For example, Chrome is introducing the <a href="/priority-hints">Priority Hints</a> feature as an <a href="/blog/origin-trials/">Origin Trial</a>. It can be used to boost the priority of specific images on the page. Overall, developers would find it easier if such enhancements were evaluated and implemented at the component level.</li>
</ul>
<h2 id="image-component-as-a-solution">Image component as a solution <a class="w-headline-link" href="#image-component-as-a-solution">#</a></h2>
<p>The opportunities available to optimize images and the challenges in implementing them individually for every application led us to the idea of an image component. An image component can encapsulate and enforce best practices. By replacing the <code>&lt;img&gt;</code> element with an image component, developers can better address their image performance woes.</p>
<p>Over the last year, we have worked with the <a href="https://nextjs.org/" rel="noopener">Next.js</a> framework to design and <a href="https://github.com/vercel/next.js/blob/canary/packages/next/client/image.tsx" rel="noopener">implement</a> their <a href="https://nextjs.org/docs/api-reference/next/image" rel="noopener">Image component</a>. It can be used as a drop-in replacement for the existing <code>&lt;img&gt;</code> elements in Next.js apps as follows.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Before with &lt;img> element:</span><br><span class="token keyword">function</span> <span class="token function">Logo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"/logo.jpg"</span> alt<span class="token operator">=</span><span class="token string">"logo"</span> height<span class="token operator">=</span><span class="token string">"200"</span> width<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">}</span><br><br><span class="token comment">// After with image component:</span><br><span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">'next/image'</span><br><br><span class="token keyword">function</span> <span class="token function">Logo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Image src<span class="token operator">=</span><span class="token string">"/logo.jpg"</span> alt<span class="token operator">=</span><span class="token string">"logo"</span> height<span class="token operator">=</span><span class="token string">"200"</span> width<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The component tries to address image-related problems generically through a rich set of features and principles. It also includes options that allow developers to customize it for various image requirements.</p>
<h3 id="protection-from-layout-shifts">Protection from layout shifts <a class="w-headline-link" href="#protection-from-layout-shifts">#</a></h3>
<p>As discussed previously, unsized images cause layout shifts and contribute to CLS. When using the Next.js Image component, developers <em>must</em> provide an image size using the <code>width</code> and <code>height</code> attributes to prevent any layout shifts. If the size is unknown, developers must specify <a href="https://nextjs.org/docs/api-reference/next/image#layout" rel="noopener"><code>layout=fill</code></a> to serve an unsized image that sits inside a sized container. Alternatively you can use static image imports to retrieve the size of the actual image on the hard drive at build time and include it in the image.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Image component with width and height specified</span><br><span class="token operator">&lt;</span>Image src<span class="token operator">=</span><span class="token string">"/logo.jpg"</span> alt<span class="token operator">=</span><span class="token string">"logo"</span> height<span class="token operator">=</span><span class="token string">"200"</span> width<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">></span><br><br><span class="token comment">// Image component with layout specified</span><br><span class="token operator">&lt;</span>Image src<span class="token operator">=</span><span class="token string">"/hero.jpg"</span> layout<span class="token operator">=</span><span class="token string">"fill"</span> objectFit<span class="token operator">=</span><span class="token string">"cover"</span> alt<span class="token operator">=</span><span class="token string">"hero"</span> <span class="token operator">/</span><span class="token operator">></span><br><br><span class="token comment">// Image component with image import</span><br><span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">'next/image'</span><br><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'./logo.png'</span><br><br><span class="token keyword">function</span> <span class="token function">Logo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Image src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"logo"</span> <span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Since developers cannot use the Image component unsized, the design ensures that they will take the time to consider image sizing and prevent layout shifts.</p>
<h3 id="facilitate-responsiveness">Facilitate responsiveness <a class="w-headline-link" href="#facilitate-responsiveness">#</a></h3>
<p>To make images responsive across devices, developers must set the <code>srcset</code> and <code>sizes</code> attributes in the <code>&lt;img&gt;</code> element. We wanted to reduce this effort with the Image component. We designed the Next.js Image component to set the attribute values only once per application. We apply them to all instances of the Image component based on the layout mode. We came up with a three-part solution:</p>
<ol>
<li><code>deviceSizes</code> property: This property can be used to configure breakpoints one-time based on the devices common to the application user base. The default values for breakpoints are included in the config file.</li>
<li><code>imageSizes</code> property: This is also a configurable property used to get the image sizes corresponding to device size breakpoints.</li>
<li><code>layout</code> attribute in each image: This is used to indicate how to use the <code>deviceSizes</code> and <code>imageSizes</code> properties for each image. The supported values for layout mode are <code>fixed</code>, <code>fill</code>, <code>intrinsic</code> and <code>responsive</code></li>
</ol>
<p>When an image is requested with layout modes <em>responsive</em> or <em>fill</em>, Next.js identifies the image to be served based on the size of the device requesting the page and sets the <code>srcset</code> and <code>sizes</code> in the image appropriately.</p>
<p>The following comparison shows how the layout mode can be used to control the size of the image on different screens. We have used a <a href="https://image-component.nextjs.gallery/layout-intrinsic" rel="noopener">demo image</a> shared in the Next.js docs, viewed on a phone and a standard laptop.</p>
<div>
<table>
   <thead>
      <tr>
         <th>Laptop screen</th>
         <th>Phone screen</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td colspan="2" >Layout = Intrinsic: Scales down to fit the container's width on smaller viewports. Does not scale up beyond the image's intrinsic size on a larger viewport. Container width is at 100%
         </td>
      </tr>
      <tr>
         <td>
            <img     alt="Mountains image shown as is"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 400px) 400px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&w=800 800w"          width="400"   />
         </td>
         <td>
            <img     alt="Mountains image scaled down"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 250px) 250px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&w=500 500w"          width="250"   />
         </td>
      </tr>
      <tr>
         <td colspan="2" >Layout = Fixed: Image is not responsive. Width and height are fixed similar to `<img>` element irrespective of the device where it is rendered.
         </td>
      </tr>
      <tr>
         <td>
             <img     alt="Mountains image shown as is"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 400px) 400px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&w=800 800w"          width="400"   />
         </td>
         <td>
            <img     alt="Mountains image shown as is does not fit the screen"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 250px) 250px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&w=500 500w"          width="250"   />
         </td>
      </tr>
      <tr>
         <td colspan="2" >Layout = Responsive: Scale down or scale up depending on the width of the container on different viewports, maintaining aspect ratio.
         </td>
      </tr>
      <tr>
         <td>
            <img     alt="Mountains image scaled up to fit the screen"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 400px) 400px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&w=800 800w"          width="400"   />
         </td>
         <td>
             <img     alt="Mountains image scaled down to fit the screen"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 250px) 250px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&w=500 500w"          width="250"   />
         </td>
      </tr>
      <tr>
         <td colspan="2" >Layout = Fill: Width and height stretched to fill the parent container. (Parent `<div>` width is set to 300*500 in this example)
         </td>
      </tr>
      <tr>
         <td>
             <img     alt="Mountains image rendered to fit 300*500 size"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 400px) 400px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&w=800 800w"          width="400"   />
         </td>
         <td>
            <img     alt="Mountains image rendered to fit 300*500 size"          decoding="async"     height="300"          loading="lazy"     sizes="(min-width: 250px) 250px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format"     srcset="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&w=500 500w"          width="250"   />
         </td>
      </tr>
   </tbody>
   <caption>Images rendered for different layouts</caption>
</table>
</div>
<h3 id="provide-built-in-lazy-loading">Provide built-in lazy-loading <a class="w-headline-link" href="#provide-built-in-lazy-loading">#</a></h3>
<p>The Image component provides a built-in, performant <a href="https://nextjs.org/docs/api-reference/next/image#loading" rel="noopener">lazy loading</a> solution as a default. When using the <code>&lt;img&gt;</code> element, there are a few native options for lazy loading, but they all have drawbacks that make them tricky to use. A developer might adopt one of the following lazy loading approaches:</p>
<ul>
<li>Specify the <a href="https://developer.mozilla.org/docs/Web/HTML/Element/img#attr-loading" rel="noopener"><code>loading</code></a> attribute: This is easy to implement but currently <a href="https://caniuse.com/?search=loading" rel="noopener">unsupported</a> on some browsers.</li>
<li>Use the <a href="https://developer.mozilla.org/docs/Web/API/Intersection_Observer_API" rel="noopener">Intersection Observer API</a>: Building a custom lazy-loading solution requires effort and a thoughtful design and implementation. Developers may not always have the time for this.</li>
<li>Import a third-party library to lazy-load images: Additional effort may be required to evaluate and integrate a suitable third-party library for lazy loading.</li>
</ul>
<p>In the Next.js Image component, loading is set to <code>&quot;lazy&quot;</code> by default. Lazy loading is implemented using Intersection Observer, which is <a href="https://caniuse.com/?search=IntersectionObserver" rel="noopener">available on most modern browsers</a>. Developers are not required to do anything extra to enable it, but they can disable it when needed.</p>
<h3 id="preload-important-images">Preload important images <a class="w-headline-link" href="#preload-important-images">#</a></h3>
<p>Quite often, LCP elements are images, and large images can delay LCP. It is a good idea to <a href="/preload-critical-assets/">preload critical images</a> so the browser can discover that image sooner. When using an <code>&lt;img&gt;</code> element, a preload hint may be included in the HTML head as follows.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>important.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>A well-designed image component should offer a way to tweak the loading sequence of images, regardless of the framework used. In the case of the Next.js Image component, developers can indicate an image that is a good candidate for preload using the <a href="https://nextjs.org/docs/api-reference/next/image#priority" rel="noopener"><code>priority</code></a> attribute of the images component.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/hero.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hero<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">priority</span> <span class="token punctuation">/></span></span></code></pre>
</web-copy-code><p>Adding a <code>priority</code> attribute simplifies markup and is more convenient to use. Image component developers can also explore options to apply heuristics to automate preloading for above-the-fold images on the page that meet specific criteria.</p>
<h3 id="encourage-high-performance-image-hosting">Encourage high-performance image hosting <a class="w-headline-link" href="#encourage-high-performance-image-hosting">#</a></h3>
<p><a href="/image-cdns/">Image CDNs</a> are recommended for automating image optimization, and they also support <a href="/uses-webp-images/">modern image formats</a> like WebP and AVIF. The Next.js Image component uses an image CDN by default using a <a href="https://nextjs.org/docs/api-reference/next/image#loader" rel="noopener">loader architecture</a>. The following example shows that the loader allows for configuration of the CDN in the Next.js config file.</p>
<web-copy-code><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  images<span class="token operator">:</span> <span class="token punctuation">{</span><br>    loader<span class="token operator">:</span> <span class="token string">'imgix'</span><span class="token punctuation">,</span><br>    path<span class="token operator">:</span> <span class="token string">'https://ImgApp/imgix.net'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>With this configuration, developers can use relative URLs in the image source, and the framework will concatenate the relative URL with the CDN path to generate the absolute URL. Popular image CDNs like <a href="https://imgix.com/" rel="noopener">Imgix</a>, <a href="https://cloudinary.com/" rel="noopener">Cloudinary</a>, and <a href="https://www.akamai.com/" rel="noopener">Akamai</a> are supported. The architecture supports the use of a custom cloud provider by implementing a custom <a href="https://nextjs.org/docs/api-reference/next/image#loader" rel="noopener"><code>loader</code></a> function for the app.</p>
<h3 id="support-self-hosted-images">Support self-hosted images <a class="w-headline-link" href="#support-self-hosted-images">#</a></h3>
<p>There may be situations where websites cannot use image CDNs. In such cases, an image component must support self-hosted images. The Next.js Image component uses an <a href="https://nextjs.org/docs/basic-features/image-optimization" rel="noopener">image optimizer</a> as a built-in image server that provides a CDN-like API. The optimizer uses <a href="https://www.npmjs.com/package/sharp" rel="noopener">Sharp</a> for production image transformations if it is installed on the server. This library is a good choice for anyone looking to build their own image optimization pipeline.</p>
<h3 id="support-progressive-loading">Support progressive loading <a class="w-headline-link" href="#support-progressive-loading">#</a></h3>
<p>Progressive loading is a technique used to hold users' interest by displaying a placeholder image usually of significantly lower quality while the actual image loads. It improves perceived performance and enhances the user experience. It can be used in combination with lazy loading for below-the-fold images or for above-the-fold images.</p>
<p>The Next.js Image component supports progressive loading for the image through the <a href="https://nextjs.org/docs/api-reference/next/image#placeholder" rel="noopener">placeholder</a> property. This can be used as an <a href="/lazy-loading-best-practices/#wrong-layout-shifting">LQIP</a> (Low-quality image placeholder) for displaying a low-quality or blurred image while the actual image loads.</p>
<h2 id="impact">Impact <a class="w-headline-link" href="#impact">#</a></h2>
<p>With all the above optimizations incorporated, we have seen success with the Next.js Image component in production and are also working with other tech stacks on similar image components.</p>
<p>When <a href="https://www.leboncoin.fr/" rel="noopener">Leboncoin</a> <a href="https://medium.com/leboncoin-engineering-blog/how-we-are-improving-our-web-performance-9f850d59d810" rel="noopener">migrated their legacy JavaScript frontend to Next.js</a>, they also upgraded their image pipeline to use the Next.js Image component. On a page that migrated from <code>&lt;img&gt;</code> to next/image, LCP went down from 2.4s to 1.7s. The total image bytes downloaded for the page went from 663kB to 326kB (with ~100kB of lazy-loaded image bytes).</p>
<h2 id="lessons-learned">Lessons Learned <a class="w-headline-link" href="#lessons-learned">#</a></h2>
<p>Anyone creating a Next.js app can benefit from using the Next.js Image component for optimization. However, if you want to build similar performance abstractions for another framework or CMS, the following are a few lessons we learned along the way that could be helpful.</p>
<h3 id="safety-valves-can-cause-more-harm-than-good">Safety valves can cause more harm than good <a class="w-headline-link" href="#safety-valves-can-cause-more-harm-than-good">#</a></h3>
<p>In an early release of the Next.js Image component, we provided a <code>unsized</code> attribute that allowed developers to bypass the sizing requirement, and use images with unspecified dimensions. We thought this would be a necessary in instances where it was impossible to know the image's height or width in advance. However, we noticed users recommending the <code>unsized</code> attribute in GitHub issues as a catch-all solution to problems with the sizing requirement, even in cases where they could solve the problem in ways that didn't worsen CLS. We subsequently deprecated and removed the <code>unsized</code> attribute.</p>
<h3 id="separate-useful-friction-from-pointless-annoyance">Separate useful friction from pointless annoyance <a class="w-headline-link" href="#separate-useful-friction-from-pointless-annoyance">#</a></h3>
<p>The requirement for sizing an image is an example of &quot;useful friction.&quot; It restricts the use of the component, but it provides outsized performance benefits in exchange. Users will readily accept the constraint if they have a clear picture of the potential performance benefits. Therefore, it is worthwhile to explain this tradeoff in the documentation and other published material about the component.</p>
<p>However, you can find workarounds for such friction without sacrificing performance. For example, during the development of the Next.js Image component, we received complaints that it was annoying to look up sizes for locally stored images. We added <a href="https://nextjs.org/docs/basic-features/image-optimization#image-imports" rel="noopener">static image imports</a>, which streamline this process by automatically retrieving dimensions for local images at build time using a Babel plugin.</p>
<h3 id="strike-a-balance-between-convenience-features-and-performance-optimizations">Strike a balance between convenience features and performance optimizations <a class="w-headline-link" href="#strike-a-balance-between-convenience-features-and-performance-optimizations">#</a></h3>
<p>If your image component does nothing but impose &quot;useful friction&quot; on its users, developers will tend to not want to use it. We found that although performance features like image sizing and automatic generation of <code>srcset</code> values were the most important. Developer-facing convenience features like automatic lazy loading and <a href="https://nextjs.org/docs/api-reference/next/image#placeholder" rel="noopener">built-in blurry placeholders</a> also drove interest in the Next.js Image component.</p>
<h3 id="set-a-roadmap-for-features-to-drive-adoption">Set a roadmap for features to drive adoption <a class="w-headline-link" href="#set-a-roadmap-for-features-to-drive-adoption">#</a></h3>
<p>Building a solution that works perfectly for all situations is very difficult. It can be tempting to design something that works well for 75% of people and then tell the other 25% that &quot;in these cases, this component isn't for you.&quot;</p>
<p>In practice, this strategy turns out to be at odds with your goals as a component designer. You want developers to adopt your component in order to benefit from its performance benefits. This is difficult to do if there is a contingent of users that are unable to migrate and feel left out of the conversation. They are likely to express disappointment, leading to negative perceptions that affect adoption.</p>
<p>It is advisable to have a roadmap for your component that covers all reasonable use cases over the long term. It also helps to be explicit in the documentation about what isn't supported and why in order to set expectations about the problems the component is intended to solve.</p>
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>Image usage and optimization is complicated. Developers have to find the balance between performance and quality of images while ensuring a great user experience. This makes image optimization a high-cost, high-impact endeavor.</p>
<p>Instead of having each app reinvent the wheel every time, we came up with a best practices template that developers, frameworks, and other tech-stacks could use as a reference for their own implementations. This experience will indeed prove valuable as we support other frameworks, on their image components.</p>
<p>The Next.js Image component has successfully improved performance outcomes in Next.js applications, thereby enhancing the user experience. We believe that it's a great model that would work well in the broader ecosystem, and we would love to hear from developers who would like to adopt this model in their projects.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Oct 25, 2021</time>
          
        </span>
        â€”
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/image-component/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="Leena Sohoni | Kara Erickson | Alex Castle"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
