
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=843cc72cb5716">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=8950ce6c6a48c">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Building split text animations</title>
<meta name="description" content="A foundational overview of how to build split letter and word animations." />

<link rel="canonical" href="https://web.dev/building-split-text-animations/" />

<meta itemprop="name" content="Building split text animations" />
<meta itemprop="description" content="A foundational overview of how to build split letter and word animations." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/VgfJpMKN2a5p0dKRFxse.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/building-split-text-animations/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Building split text animations" />
<meta property="og:description" content="A foundational overview of how to build split letter and word animations." />
<meta property="og:image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/VgfJpMKN2a5p0dKRFxse.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="css" />
<meta property="tag" content="dom" />
<meta property="tag" content="javascript" />
<meta property="tag" content="animations" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Building split text animations" />
<meta name="twitter:description" content="A foundational overview of how to build split letter and word animations." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/VgfJpMKN2a5p0dKRFxse.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=fba5bfed93607', 'module');




  loadScript('/js/content.js?v=75e31a0e2ca59', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt=""     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/XHfyVzz2S49XK7jRl9Xx.png?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#overview">Overview</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#preparing-motion-conditionals">Preparing motion conditionals</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-text">Splitting Text</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#splitting-letters-utility-function">Splitting letters utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-words-utility-function">Splitting words utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#making-boxes-utility-function">Making boxes utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#utilities-conclusion">Utilities conclusion</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#split-orchestration">Split orchestration</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements">Finding Elements</a></li><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements-from-javascript">Finding elements from JavaScript</a></li><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements-from-css">Finding elements from CSS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-text-in-place">Splitting text in place</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-animations-and-transitions">Splitting animations and transitions</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#split-letters">Split letters</a></li><li class="toc__listitem"><a class="toc__anchor" href="#split-words">Split words</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li><li class="toc__listitem"><a class="toc__anchor" href="#community-remixes">Community remixes</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="building-split-text-animations">Building split text animations</h1>
        
          <p class="color-mid-text flow-space-base">
            A foundational overview of how to build split letter and word animations.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Apr 20, 2021</time>
            
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/adamargyle/"> <img     alt="Adam Argyle"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/adamargyle/">Adam Argyle</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/argyleink">Twitter</a>
               <a href="https://github.com/argyleink">GitHub</a>
               <a href="https://glitch.com/@argyleink">Glitch</a>
               <a href="https://nerdy.dev">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#overview">Overview</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#preparing-motion-conditionals">Preparing motion conditionals</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-text">Splitting Text</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#splitting-letters-utility-function">Splitting letters utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-words-utility-function">Splitting words utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#making-boxes-utility-function">Making boxes utility function</a></li><li class="toc__listitem"><a class="toc__anchor" href="#utilities-conclusion">Utilities conclusion</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#split-orchestration">Split orchestration</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements">Finding Elements</a></li><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements-from-javascript">Finding elements from JavaScript</a></li><li class="toc__listitem"><a class="toc__anchor" href="#finding-elements-from-css">Finding elements from CSS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-text-in-place">Splitting text in place</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#splitting-animations-and-transitions">Splitting animations and transitions</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#split-letters">Split letters</a></li><li class="toc__listitem"><a class="toc__anchor" href="#split-words">Split words</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li><li class="toc__listitem"><a class="toc__anchor" href="#community-remixes">Community remixes</a></li></ul></div>
    </details>
  </div>



      <p>In this post I want to share thinking on ways to solve split text animations and
interactions for the web that are minimal, accessible, and work across browsers.
Try the <a href="https://gui-challenges.web.app/split-text/dist/" rel="noopener">demo</a>.</p>
<figure class="w-figure w-figure--fullbleed">
  <video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/H9NpmghPMDoJzJLNjk2V.mp4" type="video/mp4" />    </video>
  <figcaption class="w-figure">
    <a href="https://gui-challenges.web.app/split-text/dist/">Demo</a>
  </figcaption>
</figure>
<p>If you prefer video, here's a YouTube version of this post:</p>
<div class="youtube">  <lite-youtube    videoid="3hvN7bkjZBk"      >  </lite-youtube></div>
<h2 id="overview">Overview <a class="w-headline-link" href="#overview">#</a></h2>
<p>Split text animations can be amazing. We'll be barely scratching the surface of
animation potential in this post, but it does provide a foundation to build
upon. The goal is to animate progressively. The text should be readable by
default, with the animation built on top. Split text motion effects can
get extravagant and potentially disruptive, so we will only manipulate HTML, or
apply motion styles if the user is OK with motion.</p>
<p>Here's a general overview of the workflow and results:</p>
<ol>
<li><a href="#preparing-motion-conditionals">Prepare</a> reduced motion conditional
variables for CSS and JS.</li>
<li><a href="#splitting-letters-utility-function">Prepare</a> split text utilities in
JavaScript.</li>
<li><a href="#split-orchestration">Orchestrate</a> the conditionals and utilities on page
load.</li>
<li><a href="#splitting-animations-and-transitions">Write</a> CSS transitions and animations
for letters and words (the rad part!).</li>
</ol>
<p>Here's a preview of the conditional results we're going for:</p>
<figure class="w-figure">
  <img     alt="screenshot of the Chrome devtools with the Elements panel open and reduced motion set to &#x27;reduce&#x27; and the h1 is shown unsplit"     class="w-screenshot"     decoding="async"     height="517"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/TIrcTqDDX0tQiRyIuin1.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">
    User prefers reduced motion: text is legible / unsplit
  </figcaption>
</figure>
<p>If a user prefers reduced motion, we leave the HTML document alone and do no
animation. If motion is OK, we go ahead and chop it up into pieces. Here's a
preview of the HTML after JavaScript has split the text by letter.</p>
<figure class="w-figure">
  <img     alt="screenshot of the Chrome devtools with the Elements panel open and reduced motion set to &#x27;reduce&#x27; and the h1 is shown unsplit"     class="w-screenshot"     decoding="async"     height="517"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/prwDis2IMcZxFD39mnWF.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">
    User is OK with motion; text split into multiple <span> elements
  </figcaption>
</figure>
<h3 id="preparing-motion-conditionals">Preparing motion conditionals <a class="w-headline-link" href="#preparing-motion-conditionals">#</a></h3>
<p>The conveniently <a href="https://caniuse.com/prefers-reduced-motion" rel="noopener">available</a> <code>@media (prefers-reduced-motion: reduce)</code> media query will be used from CSS and
JavaScript in this project. This media query is our primary conditional for
deciding to split text or not. The CSS media query will be used to withhold
transitions and animations, while the JavaScript media query will be used to
withhold the HTML manipulation.</p>
<div role="banner" class="banner bg-state-info-bg color-core-text">
    <div class="banner__content flow">
       <strong>Question:</strong> What else should be used to withhold split
text animations?
    </div>
    </div>
<h4 id="preparing-the-css-conditional">Preparing the CSS conditional <a class="w-headline-link" href="#preparing-the-css-conditional">#</a></h4>
<p>I used PostCSS to enable the syntax of <a href="https://drafts.csswg.org/mediaqueries-5/" rel="noopener">Media Queries Level 5</a>, where I can store
a media query boolean into a variable:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@custom-media</span> --motionOK <span class="token punctuation">(</span><span class="token property">prefers-reduced-motion</span><span class="token punctuation">:</span> no-preference<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><h4 id="preparing-the-js-conditional">Preparing the JS conditional <a class="w-headline-link" href="#preparing-the-js-conditional">#</a></h4>
<p>In JavaScript, the browser provides a way to check media queries, I used
<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener">destructuring</a>
to extract and rename the boolean result from the media query check:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span>matches<span class="token operator">:</span>motionOK<span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><br>  <span class="token string">'(prefers-reduced-motion: no-preference)'</span><br><span class="token punctuation">)</span></code></pre>
</web-copy-code><p>I can then test for <code>motionOK</code>, and only change the document if the user has not
requested to reduce motion.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>motionOK<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// document split manipulations</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>I can check the same value by using PostCSS to enable the <code>@nest</code> syntax from
<a href="https://drafts.csswg.org/css-nesting-1/" rel="noopener">Nesting Draft 1</a>. This allows me to
store all the logic about the animation and it's style requirements for the
parent and children, in one place:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">letter-animation</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token comment">/* animation styles */</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>With the PostCSS custom property and a JavaScript boolean, we're ready to
conditionally upgrade the effect. That rolls us into the next section where I
break down the JavaScript for transforming strings into elements.</p>
<h2 id="splitting-text">Splitting Text <a class="w-headline-link" href="#splitting-text">#</a></h2>
<p>Text letters, words, lines, etc., cannot be individually animated with CSS or JS.
To achieve the effect, we need boxes. If we want to animate each letter, then
each letter needs to be an element. If we want to animate each word, then each
word needs to be an element.</p>
<ol>
<li>Create JavaScript utility functions for splitting strings into elements</li>
<li>Orchestrate the usage of these utilities</li>
</ol>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>In this demo I'll be splitting the text from JavaScript on the DOM
of the page. If you're in a framework or on the server, you could split the text
into elements from there, but do so respectfully.</p>
</div></aside>
<h3 id="splitting-letters-utility-function">Splitting letters utility function <a class="w-headline-link" href="#splitting-letters-utility-function">#</a></h3>
<p>A fun place to start is with a function which takes a string and returns each
letter in an array.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">byLetter</span> <span class="token operator">=</span> <span class="token parameter">text</span> <span class="token operator">=></span><br>  <span class="token punctuation">[</span><span class="token operator">...</span>text<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span></code></pre>
</web-copy-code><p>The
<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener">spread</a>
syntax from ES6 really helped make that a swift task.</p>
<h3 id="splitting-words-utility-function">Splitting words utility function <a class="w-headline-link" href="#splitting-words-utility-function">#</a></h3>
<p>Similar to splitting letters, this function takes a string and returns each word
in an array.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">byWord</span> <span class="token operator">=</span> <span class="token parameter">text</span> <span class="token operator">=></span><br>  text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span></code></pre>
</web-copy-code><p>The
<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/split" rel="noopener"><code>split()</code></a>
method on JavaScript strings allows us to specify which characters to slice at.
I passed an empty space, indicating a split between words.</p>
<h3 id="making-boxes-utility-function">Making boxes utility function <a class="w-headline-link" href="#making-boxes-utility-function">#</a></h3>
<p>The effect requires boxes for each letter, and we see in those functions, that
<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener"><code>map()</code></a>
is being called with a <code>span()</code> function. Here is the <code>span()</code> function.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">span</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><br><br>  node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<br>  node<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--index'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><br><br>  <span class="token keyword">return</span> node<br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>It's crucial to note that a custom property called <code>--index</code> is being set with
the array position. Having the boxes for the letter animations is great, but
having an index to use in CSS is a seemingly small addition with a large impact.
Most notable in this large impact is
<a href="https://css-tricks.com/different-approaches-for-creating-a-staggered-animation/" rel="noopener">staggering</a>.
We'll be able to use <code>--index</code> as a way of offsetting animations for a staggered
look.</p>
<h3 id="utilities-conclusion">Utilities conclusion <a class="w-headline-link" href="#utilities-conclusion">#</a></h3>
<p>The <code>splitting.js</code> module in completion:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">span</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><br><br>  node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<br>  node<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--index'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><br><br>  <span class="token keyword">return</span> node<br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">byLetter</span> <span class="token operator">=</span> <span class="token parameter">text</span> <span class="token operator">=></span><br>  <span class="token punctuation">[</span><span class="token operator">...</span>text<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">byWord</span> <span class="token operator">=</span> <span class="token parameter">text</span> <span class="token operator">=></span><br>  text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span></code></pre>
</web-copy-code><p>Next is importing and using these <code>byLetter()</code> and <code>byWord()</code> functions.</p>
<h2 id="split-orchestration">Split orchestration <a class="w-headline-link" href="#split-orchestration">#</a></h2>
<p>With the splitting utilities ready to use, putting it all together means:</p>
<ol>
<li><strong>Finding</strong> which elements to split</li>
<li><strong>Splitting</strong> them and <strong>replacing</strong> text with HTML</li>
</ol>
<p>After that, CSS takes over and will animate the elements / boxes.</p>
<h3 id="finding-elements">Finding Elements <a class="w-headline-link" href="#finding-elements">#</a></h3>
<p>I chose to use attributes and values to store information about the desired
animation and how to split the text. I liked putting these declarative options
into the HTML. The attribute <code>split-by</code> is used from JavaScript, to find
elements and create boxes for either letters or words. The attribute
<code>letter-animation</code> or <code>word-animation</code> is used from CSS, to target element
children and apply transforms and animations.</p>
<p>Here's a sample of HTML that demonstrates the two attributes:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">split-by</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>letter<span class="token punctuation">"</span></span> <span class="token attr-name">letter-animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breath<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>animated letters<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">split-by</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>word<span class="token punctuation">"</span></span> <span class="token attr-name">word-animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trampoline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hover the words<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><h3 id="finding-elements-from-javascript">Finding elements from JavaScript <a class="w-headline-link" href="#finding-elements-from-javascript">#</a></h3>
<p>I used the CSS selector syntax for attribute presence to gather the list of
elements which want their text split:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> splitTargets <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[split-by]'</span><span class="token punctuation">)</span></code></pre>
</web-copy-code><h3 id="finding-elements-from-css">Finding elements from CSS <a class="w-headline-link" href="#finding-elements-from-css">#</a></h3>
<p>I also used the attribute presence selector in CSS to give all letter animations
the same base styles. Later, we'll use the attribute value to add more specific
styles to achieve an effect.</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">letter-animation</span> <span class="token punctuation">{</span><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token comment">/* animation styles */</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="splitting-text-in-place">Splitting text in place <a class="w-headline-link" href="#splitting-text-in-place">#</a></h3>
<p>For each of the split targets we find in JavaScript, we'll split their text
based on the value of the attribute and map each string to a <code>&lt;span&gt;</code>. We can
then replace the text of the element with the boxes we made:</p>
<web-copy-code><pre class="language-js"><code class="language-js">splitTargets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> type <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'split-by'</span><span class="token punctuation">)</span><br>  <span class="token keyword">let</span> nodes <span class="token operator">=</span> <span class="token keyword">null</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'letter'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    nodes <span class="token operator">=</span> <span class="token function">byLetter</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'word'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    nodes <span class="token operator">=</span> <span class="token function">byWord</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    node<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token operator">...</span>nodes<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</web-copy-code><h4 id="orchestration-conclusion">Orchestration conclusion <a class="w-headline-link" href="#orchestration-conclusion">#</a></h4>
<p><code>index.js</code> in completion:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>byLetter<span class="token punctuation">,</span> byWord<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./splitting.js'</span><br><br><span class="token keyword">const</span> <span class="token punctuation">{</span>matches<span class="token operator">:</span>motionOK<span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><br>  <span class="token string">'(prefers-reduced-motion: no-preference)'</span><br><span class="token punctuation">)</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span>motionOK<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> splitTargets <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[split-by]'</span><span class="token punctuation">)</span><br><br>  splitTargets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> type <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'split-by'</span><span class="token punctuation">)</span><br>    <span class="token keyword">let</span> nodes <span class="token operator">=</span> <span class="token keyword">null</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'letter'</span><span class="token punctuation">)</span><br>      nodes <span class="token operator">=</span> <span class="token function">byLetter</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><br>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'word'</span><span class="token punctuation">)</span><br>      nodes <span class="token operator">=</span> <span class="token function">byWord</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><br>      node<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token operator">...</span>nodes<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The JavaScript could be read in the following English:</p>
<ol>
<li>Import some helper utility functions.</li>
<li>Check if motion is ok for this user, if not do nothing.</li>
<li>For each element that wants to be split.
<ol>
<li>Split them based on how they want to be split.</li>
<li>Replace text with elements.</li>
</ol>
</li>
</ol>
<h2 id="splitting-animations-and-transitions">Splitting animations and transitions <a class="w-headline-link" href="#splitting-animations-and-transitions">#</a></h2>
<p>The above splitting document manipulation has just unlocked a multitude of
potential animations and effects with CSS or JavaScript. There are a few links
at the bottom of this article to help inspire your splitting potential.</p>
<p>Time to show what you can do with this! I'll share 4 CSS driven animations and
transitions. </p>
<h3 id="split-letters">Split letters <a class="w-headline-link" href="#split-letters">#</a></h3>
<p>As a foundation for the split letter effects, I found the following CSS to be
helpful. I put all transitions and animations behind the motion media query and
then give each new child letter <code>span</code> a display property plus a style for what
to do with white spaces:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">[letter-animation] > span</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">white-space</span><span class="token punctuation">:</span> break-spaces<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The white spaces style is important so that the spans which are only a space,
aren't collapsed by the layout engine. Now onto the stateful fun stuff.</p>
<h4 id="transition-split-letters-example">Transition split letters example <a class="w-headline-link" href="#transition-split-letters-example">#</a></h4>
<p>This example uses CSS transitions to the split text effect. With transitions we
need states for the engine to animate between, and I chose three states: no
hover, hover in sentence, hover on a letter.</p>
<p>When the user hovers the sentence, aka the container, I scale back all the
children as if the user pushed them further away. Then, as the user hovers a
letter, I bring it forward.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/TTG7vmfEJRAlRISqqIIA.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">[letter-animation="hover"]</span> <span class="token punctuation">{</span><br>    <span class="token selector">&amp;:hover > span</span> <span class="token punctuation">{</span><br>      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>.75<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token selector">&amp; > span</span> <span class="token punctuation">{</span><br>      <span class="token property">transition</span><span class="token punctuation">:</span> transform .3s ease<span class="token punctuation">;</span><br>      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br><br>      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span><br>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.25<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h4 id="animate-split-letters-example">Animate split letters example <a class="w-headline-link" href="#animate-split-letters-example">#</a></h4>
<p>This example uses a predefined <code>@keyframe</code> animation to infinitely animated each
letter, and leverages the inline custom property index to create a stagger
effect.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/Y9wcyj9AMwjn2XDASL2u.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">[letter-animation="breath"] > span</span> <span class="token punctuation">{</span><br>    <span class="token property">animation</span><span class="token punctuation">:</span><br>      breath 1200ms ease<br>      <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--index<span class="token punctuation">)</span> * 100 * 1ms<span class="token punctuation">)</span><br>      infinite alternate<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@keyframes</span> breath</span> <span class="token punctuation">{</span><br>  <span class="token selector">from</span> <span class="token punctuation">{</span><br>    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease-out<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token selector">to</span> <span class="token punctuation">{</span><br>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-5px<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.25<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 0 25px <span class="token function">var</span><span class="token punctuation">(</span>--glow-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease-in-out<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><aside class="aside flow bg-state-good-bg color-state-good-text">
<p class="cluster ">
<span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">
  <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
</svg></span>
<strong>Objective</strong></p>
<div class=" flow">
<p>CSS <code>calc()</code> will use the unit type from the last item
in the calculation. In the above case, that's 1ms. It's used strategically to
convert the otherwise unitless number, into a value of <code>&lt;time&gt;</code> for the
animation.</p>
</div></aside>
<h3 id="split-words">Split words <a class="w-headline-link" href="#split-words">#</a></h3>
<p>Flexbox worked as a container type for me here in these examples, nicely
leveraging the <code>ch</code> unit as a healthy gap length.</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">word-animation</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span><br>  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> 1ch<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><figure class="w-figure">
  <video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/qgTmqbho48bH9VE35HYj.mp4" type="video/mp4" />    </video>
  <figcaption class="w-figure">
    Flexbox devtools showing the gap between words
  </figcaption>
</figure>
<h4 id="transition-split-words-example">Transition split words example <a class="w-headline-link" href="#transition-split-words-example">#</a></h4>
<p>In this transition example I use hover again. As the effect initially hides the
content until hover, I ensured that the interaction and styles were only applied
if the device had the capability to hover.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/2oIFqmTm8QIoNAhRiJQl.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>hover<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">[word-animation="hover"]</span> <span class="token punctuation">{</span><br>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><br>    <span class="token property">overflow</span><span class="token punctuation">:</span> clip<span class="token punctuation">;</span><br><br>    <span class="token selector">&amp; > span</span> <span class="token punctuation">{</span><br>      <span class="token property">transition</span><span class="token punctuation">:</span> transform .3s ease<span class="token punctuation">;</span><br>      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br><br>      <span class="token selector">&amp;:not(:hover)</span> <span class="token punctuation">{</span><br>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h4 id="animate-split-words-example">Animate split words example <a class="w-headline-link" href="#animate-split-words-example">#</a></h4>
<p>In this animation example I use CSS <code>@keyframes</code> again to create a staggered
infinite animation on a regular paragraph of text.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/fXANvKVQB8wiIYfaSp56.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">[word-animation="trampoline"] > span</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">animation</span><span class="token punctuation">:</span><br>    trampoline 3s ease<br>    <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--index<span class="token punctuation">)</span> * 150 * 1ms<span class="token punctuation">)</span><br>    infinite alternate<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@keyframes</span> trampoline</span> <span class="token punctuation">{</span><br>  <span class="token selector">0%</span> <span class="token punctuation">{</span><br>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease-out<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token selector">50%</span> <span class="token punctuation">{</span><br>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease-in<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>Now that you know how I did it, how would you?! </p>
<p>Let's diversify our approaches and learn all the ways to build on the web.
Create a Codepen or host your own demo, tweet me with it, and I'll add it to the
Community remixes section below.</p>
<p>Source</p>
<ul>
<li><a href="https://github.com/argyleink/gui-challenges" rel="noopener">GUI Challenges source on GitHub</a></li>
<li><a href="https://codepen.io/argyleink/pen/poRLyOM" rel="noopener">Splitting text Codepen starter</a></li>
</ul>
<p>More demos and inspiration</p>
<ul>
<li><a href="https://codepen.io/collection/XpROaV/" rel="noopener">Splitting text Codepen collection</a></li>
<li><a href="https://splitting.js.org/" rel="noopener">Splitting.js</a></li>
</ul>
<h2 id="community-remixes">Community remixes <a class="w-headline-link" href="#community-remixes">#</a></h2>
<ul>
<li><code>&lt;text-hover&gt;</code> web component by <a href="https://twitter.com/gnehcwu" rel="noopener">gnehcwu</a> on <a href="https://codesandbox.io/s/texthover-webcomponent-gkpm2" rel="noopener">CodeSandbox</a></li>
</ul>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/css/">CSS</a>
          
        
          
            
            <a class="pill" href="/tags/dom/">DOM</a>
          
        
          
            
            <a class="pill" href="/tags/javascript/">JavaScript</a>
          
        
          
            
            <a class="pill" href="/tags/animations/">Animations</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Apr 20, 2021</time>
          
        </span>
        
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/building-split-text-animations/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@argyleink"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
