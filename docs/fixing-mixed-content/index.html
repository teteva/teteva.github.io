
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=df880e3a72151">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Fixing mixed content</title>
<meta name="description" content="Find out how to fix mixed content errors on your website, in order to protect users and ensure that all of your content loads. " />

<link rel="canonical" href="https://web.dev/fixing-mixed-content/" />

<meta itemprop="name" content="Fixing mixed content" />
<meta itemprop="description" content="Find out how to fix mixed content errors on your website, in order to protect users and ensure that all of your content loads. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/fixing-mixed-content/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Fixing mixed content" />
<meta property="og:description" content="Find out how to fix mixed content errors on your website, in order to protect users and ensure that all of your content loads. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="security" />
<meta property="tag" content="network" />
<meta property="tag" content="privacy" />
<meta property="tag" content="html" />
<meta property="tag" content="css" />
<meta property="tag" content="javascript" />
<meta property="tag" content="images" />
<meta property="tag" content="media" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Fixing mixed content" />
<meta name="twitter:description" content="Find out how to fix mixed content errors on your website, in order to protect users and ensure that all of your content loads. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=79454349ac2f5', 'module');




  loadScript('/js/content.js?v=667229817e6f1', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#fixing-mixed-content" class="w-toc__header--link">
        Fixing mixed content
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#finding-mixed-content-by-visiting-your-site">Finding mixed content by visiting your site</a><ol><li><a href="#finding-mixed-content-in-your-site">Finding mixed content in your site</a></li><li><a href="#fixing-mixed-content">Fixing mixed content</a></li><li><a href="#beware-of-non-standard-tag-usage">Beware of non-standard tag usage</a></li></ol></li><li><a href="#handle-mixed-content-at-scale">Handle mixed content at scale</a><ol><li><a href="#content-security-policy">Content security policy</a></li><li><a href="#finding-mixed-content-with-content-security-policy">Finding mixed content with content security policy</a></li><li><a href="#alternatives-to-reporting-with-csp">Alternatives to reporting with CSP</a></li><li><a href="#upgrading-insecure-requests">Upgrading insecure requests</a></li><li><a href="#blocking-all-mixed-content">Blocking all mixed content</a></li></ol></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@johyphenel | @rachelandrew"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      

      <h1 id="fixing-mixed-content" class="w-article-header__headline">Fixing mixed content</h1>
      

      
        <div class="w-author__published">
          <time>Sep 7, 2019</time>
           <span class="w-author__separator">â€¢</span> Updated <time>Sep 23, 2020</time> 
        </div>
      

      
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/secure"
          >Safe and secure</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/johyphenel/"><img     alt="Jo-el van Bergen"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/Qfxylpir4hHF23rUgEQP.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/johyphenel/">Jo-el van Bergen</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/johyphenel"
          >Twitter</a
        >
      </li>
      
      
      
    </ul>
  </div>
</div>
          
            <div class="w-author">
  <a href="/authors/rachelandrew/"><img     alt="Rachel Andrew"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/dUAN2DEXHRT6G6iPrIby.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/rachelandrew/">Rachel Andrew</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/rachelandrew"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/rachelandrew">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@rachelandrew"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://rachelandrew.co.uk/">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>Supporting HTTPS for your website is an important step to protecting your site and your users from attack,
but mixed content can render that protection useless.
Increasingly insecure mixed content will be blocked by browsers, as explained in <a href="/what-is-mixed-content">What is mixed content?</a></p>
<p>In this guide we will demonstrate techniques and tools for fixing existing mixed content issues
and preventing new ones from happening.</p>
<h2 id="finding-mixed-content-by-visiting-your-site">Finding mixed content by visiting your site <a class="w-headline-link" href="#finding-mixed-content-by-visiting-your-site">#</a></h2>
<p>When visiting an HTTPS page in Google Chrome,
the browser alerts you to mixed content as errors and warnings in the JavaScript console.</p>
<p>In <a href="/what-is-mixed-content">What is mixed content?</a>,
you can find a number of examples and see how the problems are reported in Chrome DevTools.</p>
<p>The example of <a href="https://passive-mixed-content.glitch.me/" rel="noopener">passive mixed content</a> will give the following warnings.
If the browser is able to find the content at an <code>https</code> URL it automatically upgrades it, then shows a message.</p>
<figure class="w-figure">
  <img     alt="Chrome DevTools showing the warnings displayed when mixed content is detected and upgraded"     class="w-screenshot"     decoding="async"     height="294"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Y7b4EWAbSL6BgI07FdQq.jpg?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p><a href="https://active-mixed-content.glitch.me/" rel="noopener">Active mixed content</a> is blocked and displays a warning.</p>
<figure class="w-figure">
  <img     alt="Chrome DevTools showing the warnings displayed when active mixed content is blocked"     class="w-screenshot"     decoding="async"     height="304"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/KafrfEz1adCP2eUHQEWy.jpg?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p>If you find warnings like these for <code>http://</code> URLs on your site,
you need to fix them in your site's source.
It's helpful to make a list of these URLs, along with the page you found them on, for use when you fix them.</p>
<div class="w-aside w-aside--note">
<p>Mixed content errors and warnings are only shown for the page you are currently viewing,
and the JavaScript console is cleared every time you navigate to a new  page.
This means you will have to view every page of your site individually to find these errors.</p>
</div>
<h3 id="finding-mixed-content-in-your-site">Finding mixed content in your site <a class="w-headline-link" href="#finding-mixed-content-in-your-site">#</a></h3>
<p>You can search for mixed content directly in your source code.
Search for <code>http://</code> in your source and look for tags that include HTTP URL attributes.
Note that having <code>http://</code> in the <code>href</code> attribute of anchor tags (<code>&lt;a&gt;</code>)
is often not a mixed content issue, with some notable exceptions discussed later.</p>
<p>If your site is published using a content management system,
it is possible that links to insecure URLs are inserted when pages are published.
For example, images may be included with a full URL rather than a relative path.
You will need to find and fix these within the CMS content.</p>
<h3 id="fixing-mixed-content">Fixing mixed content <a class="w-headline-link" href="#fixing-mixed-content">#</a></h3>
<p>Once you've found mixed content in your site's source,
you can follow these steps to fix it.</p>
<p>If you get a console message that a resource request has been automatically upgraded from HTTP to HTTPS,
you can safely change the <code>http://</code> URL for the resource in your code to <code>https://</code>.
You can also check to see if a resource is available securely by changing <code>http://</code> to <code>https://</code> in the browser URL bar
and attempting to open the URL in a browser tab.</p>
<p>If the resource is not available via <code>https://</code>, you should consider one of the following options:</p>
<ul>
<li>Include the resource from a different host, if one is available.</li>
<li>Download and host the content on your site directly, if you are legally allowed to do so.</li>
<li>Exclude the resource from your site altogether.</li>
</ul>
<p>Having fixed the problem,
view the page where you found the error originally and verify that the error no longer appears.</p>
<h3 id="beware-of-non-standard-tag-usage">Beware of non-standard tag usage <a class="w-headline-link" href="#beware-of-non-standard-tag-usage">#</a></h3>
<p>Beware of non-standard tag usage on your site.
For instance, anchor (<code>&lt;a&gt;</code>) tag URLs don't result in mixed content errors,
as they cause the browser to navigate to a new page.
This means they usually don't need to be fixed.
However some image gallery scripts override the functionality of the <code>&lt;a&gt;</code>
tag and load the HTTP resource specified by the <code>href</code> attribute into a lightbox display on the page,
causing a mixed content problem.</p>
<h2 id="handle-mixed-content-at-scale">Handle mixed content at scale <a class="w-headline-link" href="#handle-mixed-content-at-scale">#</a></h2>
<p>The manual steps above work well for smaller websites;
but for large websites or sites with many separate development teams,
it can be tough to keep track of all the content being loaded.
To help with this task, you can use content security policy
to instruct the browser to notify you about mixed content and ensure that your pages never unexpectedly load insecure resources.</p>
<h3 id="content-security-policy">Content security policy <a class="w-headline-link" href="#content-security-policy">#</a></h3>
<p><a href="https://developers.google.com/web/fundamentals/security/csp/" rel="noopener">Content security policy</a> (CSP)
is a multi-purpose browser feature that you can use to manage mixed content at scale.
The CSP reporting mechanism can be used to track mixed content on your site,
and provide enforcement policies to protect users by upgrading or blocking mixed content.</p>
<p>You can enable these features for a page by including the
<code>Content-Security-Policy</code> or <code>Content-Security-Policy-Report-Only</code> header in the response sent from your server.
Additionally you can set <code>Content-Security-Policy</code>
(though <strong>not</strong> <code>Content-Security-Policy-Report-Only</code>) using a <code>&lt;meta&gt;</code> tag in the <code>&lt;head&gt;</code> section of your page.</p>
<div class="w-aside w-aside--note">
<p>Modern browsers enforce all content security policies that they receive.
Multiple CSP header values received by the browser in the response header or
<code>&lt;meta&gt;</code> elements are combined and enforced as a single policy;
reporting policies are likewise combined.
Policies are combined by taking the intersection of the policies;
that is to say, each policy after the first can only further restrict the allowed content, not broaden it.</p>
</div>
<h3 id="finding-mixed-content-with-content-security-policy">Finding mixed content with content security policy <a class="w-headline-link" href="#finding-mixed-content-with-content-security-policy">#</a></h3>
<p>You can use content security policy to collect reports of mixed content on your site.
To enable this feature, set the <code>Content-Security-Policy-Report-Only</code> directive by adding it as a response header for your site.</p>
<p>Response header:</p>
<p><code>Content-Security-Policy-Report-Only: default-src https: 'unsafe-inline' 'unsafe-eval'; report-uri https://example.com/reportingEndpoint</code></p>
<div class="w-aside w-aside--note">
<p>The <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Content-Security-Policy/report-uri" rel="noopener">report-uri</a> response header is being deprecated in favor of
<a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Content-Security-Policy/report-to" rel="noopener">report-to</a>.
Browser support for <code>report-to</code> is currently limited to Chrome and Edge.
You can provide both headers, in which case <code>report-uri</code> will be ignored if the browser supports <code>report-to</code>.</p>
</div>
<p>Whenever a user visits a page on your site,
their browser sends JSON-formatted reports regarding anything that violates the content security policy to
<code>https://example.com/reportingEndpoint</code>.
In this case, anytime a subresource is loaded over HTTP, a report is sent.
These reports include the page URL where the policy violation occurred and the subresource URL that violated the policy.
If you configure your reporting endpoint to log these reports,
you can track the mixed content on your site without visiting each page yourself.</p>
<p>The two caveats to this are:</p>
<ul>
<li>Users have to visit your page in a browser that understands the CSP header. This is true for most modern browsers.</li>
<li>You only get reports for pages visited by your users.
So if you have pages that don't get much traffic,
it might be some time before you get reports for your entire site.</li>
</ul>
<p>The <a href="https://developers.google.com/web/fundamentals/security/csp/" rel="noopener">Content security policy</a>
guide has more information and an example endpoint.</p>
<h3 id="alternatives-to-reporting-with-csp">Alternatives to reporting with CSP <a class="w-headline-link" href="#alternatives-to-reporting-with-csp">#</a></h3>
<p>If your site is hosted for you by a platform such as Blogger,
you may not have access to modify headers and add a CSP.
Instead, a viable alternative could be to use a website crawler to find issues across your site for you, such as
<a href="https://httpschecker.net/how-it-works#httpsChecker" rel="noopener">HTTPSChecker</a>
or
<a href="https://github.com/bramus/mixed-content-scan" rel="noopener">Mixed Content Scan</a>.</p>
<h3 id="upgrading-insecure-requests">Upgrading insecure requests <a class="w-headline-link" href="#upgrading-insecure-requests">#</a></h3>
<p>Browsers are beginning to upgrade and block insecure requests.
You can use CSP directives to force automatic upgrading or blocking of these assets.</p>
<p>The <a href="https://www.w3.org/TR/upgrade-insecure-requests/" rel="noopener"><code>upgrade-insecure-requests</code></a>
CSP directive instructs the browser to upgrade insecure URLs before making network requests.</p>
<p>As an example, if a page contains an image tag with an HTTP URL such as
<code>&lt;img src=&quot;http://example.com/image.jpg&quot;&gt;</code></p>
<p>The browser instead makes a secure request for
<code>https://example.com/image.jpg</code>, thus saving the user from mixed content.</p>
<p>You can enable this behavior either by sending a <code>Content-Security-Policy</code> header with this directive:</p>
<web-copy-code><pre class="language-markup"><code class="language-markup">Content-Security-Policy: upgrade-insecure-requests</code></pre>
</web-copy-code><p>Or by embedding that same directive inline in the document's <code>&lt;head&gt;</code>
section using a <code>&lt;meta&gt;</code> element:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Security-Policy<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upgrade-insecure-requests<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>As with browser automatic upgrading, if the resource is not available over HTTPS,
the upgraded request fails and the resource is not loaded.
This maintains the security of your page. The <code>upgrade-insecure-requests</code> directive will go further than automatic browser upgrading,
attempting to upgrade requests that the browser currently does not.</p>
<p>The <code>upgrade-insecure-requests</code> directive cascades into <code>&lt;iframe&gt;</code> documents,
ensuring the entire page is protected.</p>
<h3 id="blocking-all-mixed-content">Blocking all mixed content <a class="w-headline-link" href="#blocking-all-mixed-content">#</a></h3>
<p>An alternative option for protecting users is the
<a href="https://www.w3.org/TR/mixed-content/#strict-checking" rel="noopener"><code>block-all-mixed-content</code></a> CSP directive.
This directive instructs the browser to never load mixed content;
all mixed content resource requests are blocked,
including both active and passive mixed content.
This option also cascades into <code>&lt;iframe&gt;</code> documents, ensuring the entire page is mixed content free.</p>
<p>A page can opt itself into this behavior either by sending a
<code>Content-Security-Policy</code> header with this directive:</p>
<web-copy-code><pre class="language-markup"><code class="language-markup">Content-Security-Policy: block-all-mixed-content</code></pre>
</web-copy-code><p>Or by embedding that same directive inline in the document's <code>&lt;head&gt;</code>
section using a <code>&lt;meta&gt;</code> element:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Security-Policy<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-all-mixed-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><div class="w-aside w-aside--note">
<p>If you set both <code>upgrade-insecure-requests</code> and <code>block-all-mixed-content</code>
<code>upgrade-insecure-requests</code> will be evaluated and used first.
The browser will not go on to block requests.
Therefore you should use one or the other.</p>
</div>


    

    
  <div class="w-chips ">
    
      
    
      
        
        <a class="w-chip" href="/tags/security/">Security</a>
      
    
      
        
        <a class="w-chip" href="/tags/network/">Network</a>
      
    
      
        
        <a class="w-chip" href="/tags/privacy/">Privacy</a>
      
    
      
        
        <a class="w-chip" href="/tags/html/">HTML</a>
      
    
      
        
        <a class="w-chip" href="/tags/css/">CSS</a>
      
    
      
        
        <a class="w-chip" href="/tags/javascript/">JavaScript</a>
      
    
      
        
        <a class="w-chip" href="/tags/images/">Images</a>
      
    
      
        
        <a class="w-chip" href="/tags/media/">Media</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Sep 23, 2020</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/secure/fixing-mixed-content/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/secure"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
