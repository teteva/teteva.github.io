
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=582b6bec8836b">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=9e4c68e1628c7">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Establish network connections early to improve perceived page speed</title>
<meta name="description" content="Learn about rel=preconnect and rel=dns-prefetch resource hints and how to use them. " />

<link rel="canonical" href="https://web.dev/preconnect-and-dns-prefetch/" />

<meta itemprop="name" content="Establish network connections early to improve perceived page speed" />
<meta itemprop="description" content="Learn about rel=preconnect and rel=dns-prefetch resource hints and how to use them. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/preconnect-and-dns-prefetch/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Establish network connections early to improve perceived page speed" />
<meta property="og:description" content="Learn about rel=preconnect and rel=dns-prefetch resource hints and how to use them. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Adam's Creation by Michelangelo on Sistine Chapel ceiling" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Establish network connections early to improve perceived page speed" />
<meta name="twitter:description" content="Learn about rel=preconnect and rel=dns-prefetch resource hints and how to use them. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=ccb3f615a92c1', 'module');




  loadScript('/js/content.js?v=f315b743d401f', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Adam&#x27;s Creation by Michelangelo on Sistine Chapel ceiling"     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/Dyccd1RLN0fzhjPXswmL.jpg?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#establish-early-connections-with-relpreconnect">Establish early connections with rel=preconnect</a></li><li class="toc__listitem"><a class="toc__anchor" href="#use-cases-for-relpreconnect">Use-cases for rel=preconnect</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#knowing-where-from-but-not-what-you're-fetching">Knowing where from, but not what you're fetching</a></li><li class="toc__listitem"><a class="toc__anchor" href="#streaming-media">Streaming media</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#how-to-implement-relpreconnect">How to implement rel=preconnect</a></li><li class="toc__listitem"><a class="toc__anchor" href="#resolve-domain-name-early-with-reldns-prefetch">Resolve domain name early with rel=dns-prefetch</a></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="establish-network-connections-early-to-improve-perceived-page-speed">Establish network connections early to improve perceived page speed</h1>
        
          <p class="color-mid-text flow-space-base">
            <p>Learn about rel=preconnect and rel=dns-prefetch resource hints and how to use them.</p>

          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Jul 30, 2019</time>
            
          </div>
        

        
        

        <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/fast"
          >Fast load times</a
        >
</div>

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/mihajlija/"> <img     alt="Milica Mihajlija"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/mihajlija/">Milica Mihajlija</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/bibydigital">Twitter</a>
               <a href="https://github.com/mihajlija">GitHub</a>
               
               <a href="https://mihajlija.github.io/">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#establish-early-connections-with-relpreconnect">Establish early connections with rel=preconnect</a></li><li class="toc__listitem"><a class="toc__anchor" href="#use-cases-for-relpreconnect">Use-cases for rel=preconnect</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#knowing-where-from-but-not-what-you're-fetching">Knowing where from, but not what you're fetching</a></li><li class="toc__listitem"><a class="toc__anchor" href="#streaming-media">Streaming media</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#how-to-implement-relpreconnect">How to implement rel=preconnect</a></li><li class="toc__listitem"><a class="toc__anchor" href="#resolve-domain-name-early-with-reldns-prefetch">Resolve domain name early with rel=dns-prefetch</a></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a></li></ul></div>
    </details>
  </div>



      <p>Before the browser can request a resource from a server, it must establish a connection. Establishing a secure connection involves three steps:</p>
<ul>
<li>
<p>Look up the domain name and resolve it to an IP address.</p>
</li>
<li>
<p>Set up a connection to the server.</p>
</li>
<li>
<p>Encrypt the connection for security.</p>
</li>
</ul>
<p>In each of these steps the browser sends a piece of data to a server, and the server sends back a response. That journey, from origin to destination and back, is called a <a href="https://developer.mozilla.org/docs/Glossary/Round_Trip_Time_(RTT)" rel="noopener">round trip</a>.</p>
<p>Depending on network conditions, a single round trip might take a significant amount of time. The connection setup process might involve up to three round trips—and more in unoptimized cases.</p>
<p>Taking care of all that ahead of time makes applications feel much faster. This post explains how to achieve that with two resource hints: <code>&lt;link rel=preconnect&gt;</code> and <code>&lt;link rel=dns-prefetch&gt;</code>.</p>
<h2 id="establish-early-connections-with-relpreconnect">Establish early connections with <code>rel=preconnect</code> <a class="w-headline-link" href="#establish-early-connections-with-relpreconnect">#</a></h2>
<p>Modern browsers <a href="https://www.igvita.com/posa/high-performance-networking-in-google-chrome/#tcp-pre-connect" rel="noopener">try their best to anticipate</a> what connections a page will need, but they cannot reliably predict them all. The good news is that you can give them a (resource 😉) hint.</p>
<p>Adding <code>rel=preconnect</code> to a <code>&lt;link&gt;</code> informs the browser that your page intends to establish a connection to another domain, and that you'd like the process to start as soon as possible. Resources will load more quickly because the setup process has already been completed by the time the browser requests them.</p>
<p>Resource hints get their name because they are not mandatory instructions. They provide the information about what you'd like to happen, but it's ultimately up to the browser to decide whether to execute them. Setting up and keeping a connection open is a lot of work, so the browser might choose to ignore resource hints or execute them partially depending on the situation.</p>
<p>Informing the browser of your intention is as simple as adding a <code>&lt;link&gt;</code> tag to your page:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><img     alt="A diagram showing how the download doesn&#x27;t start for a while after the connection is established."          decoding="async"     height="539"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/988BgvmiVEAp2YVKt2jq.png?auto=format&w=1600 1600w"          width="800"   />
<p>You can speed up the load time by 100–500 ms by establishing early connections to important third-party origins. These numbers might seem small, but they make a difference in how <a href="https://developers.google.com/web/fundamentals/performance/rail#ux" rel="noopener">users perceive web page performance</a>.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>chrome.com <a href="https://twitter.com/addyosmani/status/1090874825286000640" rel="noopener">improved Time To Interactive</a> by almost 1 s by pre-connecting to important origins.</p>
</div></aside>
<h2 id="use-cases-for-relpreconnect">Use-cases for <code>rel=preconnect</code> <a class="w-headline-link" href="#use-cases-for-relpreconnect">#</a></h2>
<h3 id="knowing-where-from-but-not-what-you're-fetching">Knowing <em>where from</em>, but not <em>what</em> you're fetching <a class="w-headline-link" href="#knowing-where-from-but-not-what-you're-fetching">#</a></h3>
<p>Due to versioned dependencies, you sometimes end up in a situation where you know you'll be requesting a resource from a particular CDN, but not the exact path for it.</p>
<figure class="w-figure">
<img     alt="A url of a script with the version name."          decoding="async"     height="50"          loading="lazy"     sizes="(min-width: 450px) 450px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/PsP4qymb1gIp8Ip2sD9W.png?auto=format&w=900 900w"          width="450"   />
<figcaption>An example of a versioned URL.</figcaption>
</figure>
<p>The other common case is loading images from an <a href="/image-cdns">image CDN</a>, where the exact path for an image depends on media queries or runtime feature checks on the user's browser.</p>
<figure class="w-figure">
<img     alt="An image CDN URL with the parameters size=300x400 and quality=auto."          decoding="async"     height="52"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/Xx4ai7tzSq12DJsQXaL1.png?auto=format&w=1600 1600w"          width="800"   />
<figcaption>An example of an image CDN URL.</figcaption>
</figure>
<p>In these situations, if the resource you'll be fetching is important, you want to save as much time as possible by pre-connecting to the server. The browser won't download the file until your page requests it, but at least it can handle the connection aspects ahead of time, saving the user from waiting for several round trips.</p>
<h3 id="streaming-media">Streaming media <a class="w-headline-link" href="#streaming-media">#</a></h3>
<p>Another example where you may want to save some time in the connection phase, but not necessarily start retrieving content right away, is when streaming media from a different origin.</p>
<p>Depending on how your page handles the streamed content, you may want to wait until your scripts have loaded and are ready to process the stream. Pre-connecting helps you cut the waiting time to a single round trip once you're ready to start fetching.</p>
<h2 id="how-to-implement-relpreconnect">How to implement <code>rel=preconnect</code> <a class="w-headline-link" href="#how-to-implement-relpreconnect">#</a></h2>
<p>One way of initiating a <code>preconnect</code> is adding a <code>&lt;link&gt;</code> tag to the <code>&lt;head&gt;</code> of the document.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>Preconnecting is only effective for domains other than the origin domain, so you shouldn't use it for your site.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text">
<p class="cluster color-state-bad-text">
<span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z" />
</svg></span>
<strong>Caution</strong></p>
<div class=" flow">
<p>Only preconnect to critical domains you will use soon because the browser closes any connection that isn't used within 10 seconds. Unnecessary preconnecting can delay other important resources, so limit the number of preconnected domains and <a href="https://andydavies.me/blog/2019/08/07/experimenting-with-link-rel-equals-preconnect-using-custom-script-injection-in-webpagetest/" rel="noopener">test the impact preconnecting makes</a>.</p>
</div></aside>
<p>You can also initiate a preconnect via the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Link" rel="noopener"><code>Link</code> HTTP header</a>:</p>
<p><code>Link: &lt;https://example.com/&gt;; rel=preconnect</code></p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>A benefit of specifying a preconnect hint in the HTTP header is that it doesn't rely on markup being parsed, and it can be triggered by requests for stylesheets, scripts, and more. For example, Google Fonts sends a <code>Link</code> header in the stylesheet response to preconnect to the domain that hosts the font files.</p>
</div></aside>
<p>Some types of resources, such as fonts, are loaded in <a href="https://www.w3.org/TR/css-fonts-3/#font-fetching-requirements" rel="noopener">anonymous mode</a>. For those you must set the <code>crossorigin</code> attribute with the <code>preconnect</code> hint:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/ComicSans<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>If you omit the <code>crossorigin</code> attribute, the browser only performs the DNS lookup.</p>
<h2 id="resolve-domain-name-early-with-reldns-prefetch">Resolve domain name early with <code>rel=dns-prefetch</code> <a class="w-headline-link" href="#resolve-domain-name-early-with-reldns-prefetch">#</a></h2>
<p>You remember sites by their names, but servers remember them by IP addresses. This is why the domain name system (DNS) exists. The browser uses DNS to convert the site name to an IP address. This process—<a href="https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/" rel="noopener">domain name resolution</a>— is the first step in establishing a connection.</p>
<p>If a page needs to make connections to many third-party domains, preconnecting all of them is counterproductive. The <code>preconnect</code> hint is best used for only the most critical connections. For all the rest, use <code>&lt;link rel=dns-prefetch&gt;</code> to save time on the first step, the DNS lookup, which usually takes around <a href="https://www.keycdn.com/support/reduce-dns-lookups" rel="noopener">20–120 ms</a>.</p>
<p>DNS resolution is initiated similarly to <code>preconnect</code>: by adding a <code>&lt;link&gt;</code> tag to the <code>&lt;head&gt;</code> of the document.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p><a href="https://caniuse.com/#search=dns-prefetch" rel="noopener">Browser support for <code>dns-prefetch</code></a> is slightly different from <a href="https://caniuse.com/#search=preconnect" rel="noopener"><code>preconnect</code></a> <a href="https://caniuse.com/#search=preconnect" rel="noopener">support</a>, so <code>dns-prefetch</code> can serve as a fallback for browsers that don't support <code>preconnect</code>.</p>
<figure class="compare flow" data-type="better"><p class="compare__label">Do</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><figcaption class="compare__caption">
<p>To safely implement the fallback technique, use separate link tags.</p>
</figcaption>
</figure>
<figure class="compare flow" data-type="worse"><p class="compare__label">Don't</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><figcaption class="compare__caption">
<p>Implementing <code>dns-prefetch</code> fallback in the same <code>&lt;link&gt;</code> tag causes a bug in Safari where <code>preconnect</code> gets cancelled.</p>
</figcaption>
</figure>
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>These two resource hints are helpful for improving page speed when you know you'll download something from a third-party domain soon, but you don't know the exact URL for the resource. Examples include CDNs that distribute JavaScript libraries, images or fonts. Be mindful of constraints, use <code>preconnect</code> only for the most important resources, rely on <code>dns-prefetch</code> for the rest, and always measure the impact in the real-world.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/performance/">Performance</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Jul 30, 2019</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/preconnect-and-dns-prefetch/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@bibydigital"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
