
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=29b7587d65f45">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Using the Chrome UX Report on BigQuery</title>
<meta name="description" content="In this guide, learn how to use BigQuery to write queries against the CrUX dataset to extract insightful results about the state of user experiences on the web. " />

<link rel="canonical" href="https://web.dev/chrome-ux-report-bigquery/" />

<meta itemprop="name" content="Using the Chrome UX Report on BigQuery" />
<meta itemprop="description" content="In this guide, learn how to use BigQuery to write queries against the CrUX dataset to extract insightful results about the state of user experiences on the web. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/chrome-ux-report-bigquery/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Using the Chrome UX Report on BigQuery" />
<meta property="og:description" content="In this guide, learn how to use BigQuery to write queries against the CrUX dataset to extract insightful results about the state of user experiences on the web. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Using the Chrome UX Report on BigQuery" />
<meta name="twitter:description" content="In this guide, learn how to use BigQuery to write queries against the CrUX dataset to extract insightful results about the state of user experiences on the web. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=95fd65e422f7d', 'module');




  loadScript('/js/content.js?v=ee30e8a4f5167', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#using-the-chrome-ux-report-on-bigquery" class="w-toc__header--link">
        Using the Chrome UX Report on BigQuery
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#data-organization">Data organization</a></li><li><a href="#evaluating-performance">Evaluating performance</a></li><li><a href="#tracking-performance">Tracking performance</a></li><li><a href="#faq">FAQ</a><ol><li><a href="#when-would-i-use-bigquery-as-opposed-to-other-tools">When would I use BigQuery as opposed to other tools?</a></li><li><a href="#are-there-any-limitations-to-using-bigquery">Are there any limitations to using BigQuery?</a></li><li><a href="#where-can-i-learn-more-about-bigquery">Where can I learn more about BigQuery?</a></li></ol></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@rick_viscomi"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      

      <h1 id="using-the-chrome-ux-report-on-bigquery" class="w-article-header__headline">Using the Chrome UX Report on BigQuery</h1>
      

      
        <div class="w-author__published">
          <time>Jun 12, 2020</time>
          
        </div>
      

      
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/fast"
          >Fast load times</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/rviscomi/"><img     alt="Rick Viscomi"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/rviscomi/">Rick Viscomi</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/rick_viscomi"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/rviscomi">GitHub</a>
      </li>
      
      
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>The raw data of the Chrome UX Report
(<a href="https://developers.google.com/web/tools/chrome-user-experience-report/" rel="noopener">CrUX</a>)
is available on
<a href="https://console.cloud.google.com/bigquery?p=chrome-ux-report" rel="noopener">BigQuery</a>, a
database on the Google Cloud Platform (GCP). Using BigQuery requires a
<a href="https://developers.google.com/web/tools/chrome-user-experience-report/getting-started#getting-started" rel="noopener">GCP project</a>
and basic knowledge of SQL.</p>
<p>In this guide, learn how to use BigQuery to write queries against the CrUX
dataset to extract insightful results about the state of user experiences on
the web:</p>
<ul>
<li>Understand how the data is organized</li>
<li>Write a basic query to evaluate an origin's performance</li>
<li>Write an advanced query to track performance over time</li>
</ul>
<h2 id="data-organization">Data organization <a class="w-headline-link" href="#data-organization">#</a></h2>
<p>Start by looking at a basic query:</p>
<web-copy-code><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> origin<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>chrome<span class="token operator">-</span>ux<span class="token operator">-</span>report<span class="token punctuation">.</span><span class="token keyword">all</span><span class="token number">.201809</span><span class="token punctuation">`</span></code></pre>
</web-copy-code><p>To run the query, enter it into the query editor and press the
&quot;Run query&quot; button:</p>
<img     alt="Enter a simple query into editor and press Run."     class="w-screenshot"     decoding="async"     height="430"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/aZp9WdPcgiTa7j7R1cAP.png?auto=format&w=1600 1600w"          width="800"   />
<p>There are two parts to this query:</p>
<ul>
<li>
<p><code>SELECT COUNT(DISTINCT origin)</code> means querying for the number of origins in
the table. Roughly speaking, two URLs are part of the same origin if they have
the same scheme, host, and port.</p>
</li>
<li>
<p><code>FROM</code>chrome-ux-report.all.201809`` specifies the address of the source
table, which has three parts:</p>
<ul>
<li>The Cloud project name <code>chrome-ux-report</code> within which all CrUX data is organized</li>
<li>The dataset <code>all</code>, representing data across all countries</li>
<li>The table <code>201809</code>, the year and month of the data in YYYYMM format</li>
</ul>
</li>
</ul>
<p>There are also datasets for every country. For example,
<code>chrome-ux-report.country_ca.201809</code> represents only the user experience data
originating from Canada.</p>
<p>Within each dataset there are tables for every month since 201710. New tables
for the previous calendar month are published regularly.</p>
<p>The structure of the data tables (also known as the <em>schema</em>) contains:</p>
<ul>
<li>The origin, e.g., <code>origin = 'https://www.example.com'</code>, which represents the
aggregate user experience distribution for all pages on that website</li>
<li>The connection speed at the time of page load, e.g.,
<code>effective_connection_type.name = '4G'</code></li>
<li>The device type, e.g., <code>form_factor.name = 'desktop'</code></li>
<li>The UX metrics themselves
<ul>
<li>first_paint (FP)</li>
<li>first_contentful_paint (FCP)</li>
<li>dom_content_loaded (DCL)</li>
<li>onload (OL)</li>
<li>experimental.first_input_delay (FID)</li>
</ul>
</li>
</ul>
<p>The data for each metric is organized as an array of objects. In JSON notation,
<code>first_contentful_paint.histogram.bin</code> would look similar to this:</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><br>	<span class="token punctuation">{</span><span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.1234</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span><span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.0123</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>	...<br><span class="token punctuation">]</span></code></pre>
</web-copy-code><p>Each bin contains a start and an end time in milliseconds and a density
representing the percent of user experiences within that time range. In other
words, 12.34% of FCP experiences for this hypothetical origin, connection speed,
and device type are less than 100ms. The sum of all bin densities is 100%.</p>
<p><a href="https://bigquery.cloud.google.com/table/chrome-ux-report:all.201809?tab=preview" rel="noopener">Browse the structure of the tables in BigQuery.</a></p>
<h2 id="evaluating-performance">Evaluating performance <a class="w-headline-link" href="#evaluating-performance">#</a></h2>
<p>Let's use our knowledge of the table schema to write a query that extracts this
performance data.</p>
<web-copy-code><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span><br>  fcp<br><span class="token keyword">FROM</span><br>  <span class="token punctuation">`</span>chrome<span class="token operator">-</span>ux<span class="token operator">-</span>report<span class="token punctuation">.</span><span class="token keyword">all</span><span class="token number">.201809</span><span class="token punctuation">`</span><span class="token punctuation">,</span><br>  UNNEST<span class="token punctuation">(</span>first_contentful_paint<span class="token punctuation">.</span>histogram<span class="token punctuation">.</span>bin<span class="token punctuation">)</span> <span class="token keyword">AS</span> fcp<br><span class="token keyword">WHERE</span><br>  origin <span class="token operator">=</span> <span class="token string">'https://developers.google.com'</span> <span class="token operator">AND</span><br>  effective_connection_type<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'4G'</span> <span class="token operator">AND</span><br>  form_factor<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'phone'</span> <span class="token operator">AND</span><br>  fcp<span class="token punctuation">.</span><span class="token keyword">start</span> <span class="token operator">=</span> <span class="token number">0</span></code></pre>
</web-copy-code><img     alt="Querying CrUX FCP on BigQuery"     class="w-screenshot"     decoding="async"     height="670"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/ReMoTLXeKjiMqC95PJoV.png?auto=format&w=1600 1600w"          width="800"   />
<p>The result is <code>0.0013</code>, meaning that 0.13% of user experiences on this origin
are between 0 and 100ms on 4G and on a phone. If we want to generalize our
query to any connection and any device type, we can omit them from the <code>WHERE</code>
clause and simply use the <code>SUM</code> aggregator function to add up all of their
respective bin densities:</p>
<web-copy-code><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span><br>  <span class="token function">SUM</span><span class="token punctuation">(</span>fcp<span class="token punctuation">.</span>density<span class="token punctuation">)</span><br><span class="token keyword">FROM</span><br>  <span class="token punctuation">`</span>chrome<span class="token operator">-</span>ux<span class="token operator">-</span>report<span class="token punctuation">.</span><span class="token keyword">all</span><span class="token number">.201809</span><span class="token punctuation">`</span><span class="token punctuation">,</span><br>  UNNEST<span class="token punctuation">(</span>first_contentful_paint<span class="token punctuation">.</span>histogram<span class="token punctuation">.</span>bin<span class="token punctuation">)</span> <span class="token keyword">AS</span> fcp<br><span class="token keyword">WHERE</span><br>  origin <span class="token operator">=</span> <span class="token string">'https://developers.google.com'</span> <span class="token operator">AND</span><br>  fcp<span class="token punctuation">.</span><span class="token keyword">start</span> <span class="token operator">=</span> <span class="token number">0</span></code></pre>
</web-copy-code><img     alt="Summing CrUX FCP on BigQuery"     class="w-screenshot"     decoding="async"     height="676"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/SaNxd4ZfYHaBGgz8yUJM.png?auto=format&w=1600 1600w"          width="800"   />
<p>The result is <code>0.0399</code>, or 3.99% across all devices and connection types.
Let's modify the query slightly and add up the densities for all bins that are
in the &quot;fast&quot; FCP range of 0â€“1000ms:</p>
<web-copy-code><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span><br>  <span class="token function">SUM</span><span class="token punctuation">(</span>fcp<span class="token punctuation">.</span>density<span class="token punctuation">)</span> <span class="token keyword">AS</span> fast_fcp<br><span class="token keyword">FROM</span><br>  <span class="token punctuation">`</span>chrome<span class="token operator">-</span>ux<span class="token operator">-</span>report<span class="token punctuation">.</span><span class="token keyword">all</span><span class="token number">.201809</span><span class="token punctuation">`</span><span class="token punctuation">,</span><br>  UNNEST<span class="token punctuation">(</span>first_contentful_paint<span class="token punctuation">.</span>histogram<span class="token punctuation">.</span>bin<span class="token punctuation">)</span> <span class="token keyword">AS</span> fcp<br><span class="token keyword">WHERE</span><br>  origin <span class="token operator">=</span> <span class="token string">'https://developers.google.com'</span> <span class="token operator">AND</span><br>  fcp<span class="token punctuation">.</span><span class="token keyword">start</span> <span class="token operator">&lt;</span> <span class="token number">1000</span></code></pre>
</web-copy-code><img     alt="Querying fast FCP on BigQuery"     class="w-screenshot"     decoding="async"     height="672"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/jkK04PN5sGQxaYnLwmh3.png?auto=format&w=1600 1600w"          width="800"   />
<p>This gives us <code>0.3913</code>. In other words, 39.13% of the FCP user experiences on
developers.google.com are considered &quot;fast&quot; according to the FCP range
definition.</p>
<h2 id="tracking-performance">Tracking performance <a class="w-headline-link" href="#tracking-performance">#</a></h2>
<p>Now that we've extracted performance data about an origin, let's compare it to
the historical data available in older tables. To do that, we could rewrite the
table address to an earlier month, or we could use the wildcard syntax to query
all months:</p>
<web-copy-code><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span><br>  _TABLE_SUFFIX <span class="token keyword">AS</span> yyyymm<span class="token punctuation">,</span><br>  <span class="token function">SUM</span><span class="token punctuation">(</span>fcp<span class="token punctuation">.</span>density<span class="token punctuation">)</span> <span class="token keyword">AS</span> fast_fcp<br><span class="token keyword">FROM</span><br>  <span class="token punctuation">`</span>chrome<span class="token operator">-</span>ux<span class="token operator">-</span>report<span class="token punctuation">.</span><span class="token keyword">all</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">`</span><span class="token punctuation">,</span><br>  UNNEST<span class="token punctuation">(</span>first_contentful_paint<span class="token punctuation">.</span>histogram<span class="token punctuation">.</span>bin<span class="token punctuation">)</span> <span class="token keyword">AS</span> fcp<br><span class="token keyword">WHERE</span><br>  origin <span class="token operator">=</span> <span class="token string">'https://developers.google.com'</span> <span class="token operator">AND</span><br>  fcp<span class="token punctuation">.</span><span class="token keyword">start</span> <span class="token operator">&lt;</span> <span class="token number">1000</span><br><span class="token keyword">GROUP</span> <span class="token keyword">BY</span><br>  yyyymm<br><span class="token keyword">ORDER</span> <span class="token keyword">BY</span><br>  yyyymm</code></pre>
</web-copy-code><img     alt="Querying a timeseries of CrUX FCP on BigQuery"     class="w-screenshot"     decoding="async"     height="1219"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/yynnLgYHstp0307DmkBv.png?auto=format&w=1600 1600w"          width="800"   />
<p>Here, we see that the percent of fast FCP experiences varies by a few percentage
points each month.</p>
<div class="w-table-wrapper">
<table>
<thead>
<tr>
<th>yyyymm</th>
<th>fast_fcp</th>
</tr>
</thead>
<tbody>
<tr>
<td>201711</td>
<td>40.17%</td>
</tr>
<tr>
<td>201712</td>
<td>38.27%</td>
</tr>
<tr>
<td>201801</td>
<td>39.89%</td>
</tr>
<tr>
<td>201802</td>
<td>39.76%</td>
</tr>
<tr>
<td>201803</td>
<td>41.17%</td>
</tr>
<tr>
<td>201804</td>
<td>41.31%</td>
</tr>
<tr>
<td>201805</td>
<td>41.55%</td>
</tr>
<tr>
<td>201806</td>
<td>40.73%</td>
</tr>
<tr>
<td>201807</td>
<td>40.63%</td>
</tr>
<tr>
<td>201808</td>
<td>37.75%</td>
</tr>
<tr>
<td>201809</td>
<td>39.13%</td>
</tr>
</tbody>
</table>
</div><p>With these techniques, you're able to look up the performance for an origin,
calculate the percent of fast experiences, and track it over time.
As a next step, try querying for two or more origins and comparing their
performance.</p>
<h2 id="faq">FAQ <a class="w-headline-link" href="#faq">#</a></h2>
<h3 id="when-would-i-use-bigquery-as-opposed-to-other-tools">When would I use BigQuery as opposed to other tools? <a class="w-headline-link" href="#when-would-i-use-bigquery-as-opposed-to-other-tools">#</a></h3>
<p>BigQuery is only needed when you can't get the same information from other tools
like the CrUX Dashboard and PageSpeed Insights. For example, BigQuery allows you
to slice the data in meaningful ways and even join it with other public datasets
like the <a href="https://httparchive.org/" rel="noopener">HTTP Archive</a> to do some advanced data
mining.</p>
<h3 id="are-there-any-limitations-to-using-bigquery">Are there any limitations to using BigQuery? <a class="w-headline-link" href="#are-there-any-limitations-to-using-bigquery">#</a></h3>
<p>Yes, the most important limitation is that by default users can only query 1TB
worth of data per month. Beyond that, the standard rate of $5/TB applies.</p>
<h3 id="where-can-i-learn-more-about-bigquery">Where can I learn more about BigQuery? <a class="w-headline-link" href="#where-can-i-learn-more-about-bigquery">#</a></h3>
<p>Check out the <a href="https://cloud.google.com/bigquery/" rel="noopener">BigQuery documentation</a> for
more info.</p>


    

    
  <div class="w-chips ">
    
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Performance</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jun 12, 2020</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/fast/chrome-ux-report-bigquery/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/fast"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
