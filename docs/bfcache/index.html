
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=468141341745b">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=1990e35385bce">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Back/forward cache</title>
<meta name="description" content="Learn how to optimize your pages for instant loads when using the browser's back and forward buttons. " />

<link rel="canonical" href="https://web.dev/bfcache/" />

<meta itemprop="name" content="Back/forward cache" />
<meta itemprop="description" content="Learn how to optimize your pages for instant loads when using the browser's back and forward buttons. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/bfcache/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Back/forward cache" />
<meta property="og:description" content="Learn how to optimize your pages for instant loads when using the browser's back and forward buttons. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Back and forward buttons" />
<meta property="tag" content="performance" />
<meta property="tag" content="web-vitals" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Back/forward cache" />
<meta name="twitter:description" content="Learn how to optimize your pages for instant loads when using the browser's back and forward buttons. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=ee1697620e351', 'module');




  loadScript('/js/content.js?v=3b8d2b981648a', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Back and forward buttons"     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/Qoeb8x3a11BdGgRzYJbY.png?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#browser-compatibility">Browser compatibility</a></li><li class="toc__listitem"><a class="toc__anchor" href="#bfcache-basics">bfcache basics</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#how-the-&quot;cache&quot;-works">How the &quot;cache&quot; works</a></li><li class="toc__listitem"><a class="toc__anchor" href="#apis-to-observe-bfcache">APIs to observe bfcache</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#optimize-your-pages-for-bfcache">Optimize your pages for bfcache</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#never-use-the-unload-event">Never use the unload event</a></li><li class="toc__listitem"><a class="toc__anchor" href="#avoid-window.opener-references">Avoid window.opener references</a></li><li class="toc__listitem"><a class="toc__anchor" href="#always-close-open-connections-before-the-user-navigates-away">Always close open connections before the user navigates away</a></li><li class="toc__listitem"><a class="toc__anchor" href="#update-stale-or-sensitive-data-after-bfcache-restore">Update stale or sensitive data after bfcache restore</a></li><li class="toc__listitem"><a class="toc__anchor" href="#test-to-ensure-your-pages-are-cacheable">Test to ensure your pages are cacheable</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#how-bfcache-affects-analytics-and-performance-measurement">How bfcache affects analytics and performance measurement</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#performance-measurement">Performance measurement</a></li><li class="toc__listitem"><a class="toc__anchor" href="#impact-on-core-web-vitals">Impact on Core Web Vitals</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#additional-resources">Additional Resources</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="backforward-cache">Back/forward cache</h1>
        
          <p class="color-mid-text flow-space-base">
            Optimize your pages for instant loads when using the browser's back and forward buttons.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Nov 10, 2020</time>
             — Updated <time>Nov 15, 2021</time> 
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/philipwalton/"> <img     alt="Philip Walton"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/philipwalton/">Philip Walton</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/philwalton">Twitter</a>
               <a href="https://github.com/philipwalton">GitHub</a>
               
               <a href="https://philipwalton.com">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#browser-compatibility">Browser compatibility</a></li><li class="toc__listitem"><a class="toc__anchor" href="#bfcache-basics">bfcache basics</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#how-the-&quot;cache&quot;-works">How the &quot;cache&quot; works</a></li><li class="toc__listitem"><a class="toc__anchor" href="#apis-to-observe-bfcache">APIs to observe bfcache</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#optimize-your-pages-for-bfcache">Optimize your pages for bfcache</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#never-use-the-unload-event">Never use the unload event</a></li><li class="toc__listitem"><a class="toc__anchor" href="#avoid-window.opener-references">Avoid window.opener references</a></li><li class="toc__listitem"><a class="toc__anchor" href="#always-close-open-connections-before-the-user-navigates-away">Always close open connections before the user navigates away</a></li><li class="toc__listitem"><a class="toc__anchor" href="#update-stale-or-sensitive-data-after-bfcache-restore">Update stale or sensitive data after bfcache restore</a></li><li class="toc__listitem"><a class="toc__anchor" href="#test-to-ensure-your-pages-are-cacheable">Test to ensure your pages are cacheable</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#how-bfcache-affects-analytics-and-performance-measurement">How bfcache affects analytics and performance measurement</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#performance-measurement">Performance measurement</a></li><li class="toc__listitem"><a class="toc__anchor" href="#impact-on-core-web-vitals">Impact on Core Web Vitals</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#additional-resources">Additional Resources</a></li></ul></div>
    </details>
  </div>



      <p>Back/forward cache (or bfcache) is a browser optimization that enables instant
back and forward navigation. It significantly improves the browsing experience
for users—especially those with slower networks or devices.</p>
<p>As web developers, it's critical to understand how to <a href="#optimize-your-pages-for-bfcache">optimize your pages for
bfcache</a> across all browsers, so your users
can reap the benefits.</p>
<h2 id="browser-compatibility">Browser compatibility <a class="w-headline-link" href="#browser-compatibility">#</a></h2>
<p>bfcache has been supported in both
<a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/1.5/Using_Firefox_1.5_caching" rel="noopener">Firefox</a>
and <a href="https://webkit.org/blog/427/webkit-page-cache-i-the-basics/" rel="noopener">Safari</a> for
many years, across desktop and mobile.</p>
<p>Starting in version 86, Chrome enabled bfcache for
<a href="/same-site-same-origin/">cross-site</a> navigations on Android for a small
percentage of users. In subsequent releases, additional support slowly rolled
out. Since version 96, bfcache is enabled for all Chrome users across desktop
and mobile.</p>
<h2 id="bfcache-basics">bfcache basics <a class="w-headline-link" href="#bfcache-basics">#</a></h2>
<p>bfcache is an in-memory cache that stores a complete snapshot of a page
(including the JavaScript heap) as the user is navigating away. With the entire
page in memory, the browser can quickly and easily restore it if the user
decides to return.</p>
<p>How many times have you visited a website and clicked a link to go to another
page, only to realize it's not what you wanted and click the back button? In
that moment, bfcache can make a big difference in how fast the previous page
loads:</p>
<div class="table-wrapper">
  <table data-alignment="top>
    <tr>
      <td width="30%"><strong><em>Without</em> bfcache enabled</strong></td>
      <td>
        A new request is initiated to load the previous page, and, depending
        on how well that page has been <a
        href="/reliable/#the-options-in-your-caching-toolbox">
        optimized</a> for repeat visits, the browser might have to re-download,
        re-parse, and re-execute some (or all) of resources it just downloaded.
      </td>
    </tr>
    <tr>
      <td><strong><em>With</em> bfcache enabled</strong></td>
      <td>
        Loading the previous page is <em>essentially instant</em>, because the
        entire page can be restored from memory, without having to go to the
        network at all
      </td>
    </tr>
  </table>
</div>
<p>Check out this video of bfcache in action to understand the speed up it can
bring to navigations:</p>
<div class="youtube">  <lite-youtube    videoid="cuPsdRckkF0"      >  </lite-youtube></div>
<p>In the video above, the example with bfcache is quite a bit faster than the
example without it.</p>
<p>bfcache not only speeds up navigation, it also reduces data usage, since
resources do not have to be downloaded again.</p>
<p>Chrome usage data shows that 1 in 10 navigations on desktop and 1 in 5 on mobile
are either back or forward. With bfcache enabled, browsers could eliminate the
data transfer and time spent loading for billions of web pages every single day!</p>
<h3 id="how-the-&quot;cache&quot;-works">How the &quot;cache&quot; works <a class="w-headline-link" href="#how-the-&quot;cache&quot;-works">#</a></h3>
<p>The &quot;cache&quot; used by bfcache is different from the <a href="/http-cache/">HTTP cache</a>
(which is also useful in speeding up repeat navigations). The bfcache is a
snapshot of the entire page in memory (including the JavaScript heap), whereas
the HTTP cache contains only the responses for previously made requests. Since
it's quite rare that all requests required to load a page can be fulfilled from
the HTTP cache, repeat visits using bfcache restores are always faster than even
the most well-optimized non-bfcache navigations.</p>
<p>Creating a snapshot of a page in memory, however, involves some complexity in
terms of how best to preserve in-progress code. For example, how do you handle
<code>setTimeout()</code> calls where the timeout is reached while the page is in the
bfcache?</p>
<p>The answer is that browsers pause running any pending timers or unresolved
promises—essentially all pending tasks in the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" rel="noopener">JavaScript task
queues</a>—and
resume processing tasks when (or if) the page is restored from the bfcache.</p>
<p>In some cases this is fairly low-risk (for example, timeouts or promises), but
in other cases it might lead to very confusing or unexpected behavior. For
example, if the browser pauses a task that's required as part of an <a href="https://developer.mozilla.org/docs/Web/API/IDBTransaction" rel="noopener">IndexedDB
transaction</a>,
it can affect other open tabs in the same origin (since the same IndexedDB
databases can be accessed by multiple tabs simultaneously). As a result,
browsers will generally not attempt to cache pages in the middle of an IndexedDB
transaction or using APIs that might affect other pages.</p>
<p>For more details on how various API usage affects a page's bfcache eligibility,
see <a href="#optimize-your-pages-for-bfcache">Optimize your pages for bfcache</a> below.</p>
<h3 id="apis-to-observe-bfcache">APIs to observe bfcache <a class="w-headline-link" href="#apis-to-observe-bfcache">#</a></h3>
<p>While bfcache is an optimization that browsers do automatically, it's still
important for developers to know when it's happening so they can <a href="#optimize-your-pages-for-bfcache">optimize their
pages for it</a> and <a href="#implications-for-analytics-and-performance-measurement">adjust any metrics or
performance
measurement</a>
accordingly.</p>
<p>The primary events used to observe bfcache are the <a href="https://developer.mozilla.org/docs/Web/API/PageTransitionEvent" rel="noopener">page transition
events</a>—<code>pageshow</code>
and <code>pagehide</code>—which have been around as long as bfcache has and are supported
in pretty much <a href="https://caniuse.com/page-transition-events" rel="noopener">all browsers in use
today</a>.</p>
<p>The newer <a href="https://developers.google.com/web/updates/2018/07/page-lifecycle-api" rel="noopener">Page
Lifecycle</a>
events—<code>freeze</code> and <code>resume</code>—are also dispatched when pages go in or out of the
bfcache, as well as in some other situations. For example when a background tab
gets frozen to minimize CPU usage. Note, the Page Lifecycle events are currently
only supported in Chromium-based browsers.</p>
<h4 id="observe-when-a-page-is-restored-from-bfcache">Observe when a page is restored from bfcache <a class="w-headline-link" href="#observe-when-a-page-is-restored-from-bfcache">#</a></h4>
<p>The <code>pageshow</code> event fires right after the <code>load</code> event when the page is
initially loading and any time the page is restored from bfcache. The <code>pageshow</code>
event has a
<code><a href="https://developer.mozilla.org/docs/Web/API/PageTransitionEvent/persisted" rel="noopener">persisted</a></code>
property which will be <code>true</code> if the page was restored from bfcache
(and <code>false</code> if not). You can use the <code>persisted</code> property
to distinguish regular page loads from bfcache restores. For example:</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This page was restored from the bfcache.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This page was loaded normally.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>In browsers that support the Page Lifecycle API, the <code>resume</code> event will also
fire when pages are restored from bfcache (immediately before the <code>pageshow</code>
event), though it will also fire when a user revisits a frozen background tab.
If you want to restore a page's state after it's frozen (which includes pages in
the bfcache), you can use the <code>resume</code> event, but if you want to measure your
site's bfcache hit rate, you'd need to use the <code>pageshow</code> event. In some cases,
you might need to use both.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>See <a href="#how-bfcache-affects-analytics-and-performance-measurement">Implications for performance and
analytics</a> for
more details on bfcache measurement best practices.</p>
</div></aside>
<h4 id="observe-when-a-page-is-entering-bfcache">Observe when a page is entering bfcache <a class="w-headline-link" href="#observe-when-a-page-is-entering-bfcache">#</a></h4>
<p>The <code>pagehide</code> event is the counterpart to the <code>pageshow</code> event. The <code>pageshow</code>
event fires when a page is either loaded normally or restored from the bfcache.
The <code>pagehide</code> event fires when the page is either unloaded normally or when the
browser attempts to put it into the bfcache.</p>
<p>The <code>pagehide</code> event also has a <code>persisted</code> property, and if it's <code>false</code> then
you can be confident a page is not about to enter the bfcache. However, if the
<code>persisted</code> property is <code>true</code>, it doesn't guarantee that a page will be cached.
It means that the browser <em>intends</em> to cache the page, but there may be factors
that make it impossible to cache.</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pagehide'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>persisted <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This page *might* be entering the bfcache.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This page will unload normally and be discarded.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Similarly, the <code>freeze</code> event will fire immediately after the <code>pagehide</code> event
(if the event's <code>persisted</code> property is <code>true</code>), but again that only means the
browser <em>intends</em> to cache the page. It may still have to discard it for a
number of reasons explained below.</p>
<h2 id="optimize-your-pages-for-bfcache">Optimize your pages for bfcache <a class="w-headline-link" href="#optimize-your-pages-for-bfcache">#</a></h2>
<p>Not all pages get stored in bfcache, and even when a page does get stored there,
it won't stay there indefinitely. It's critical that developers understand what
makes pages eligible (and ineligible) for bfcache to maximize their cache-hit
rates.</p>
<p>The following sections outline the best practices to make it as likely as
possible that the browser can cache your pages.</p>
<h3 id="never-use-the-unload-event">Never use the <code>unload</code> event <a class="w-headline-link" href="#never-use-the-unload-event">#</a></h3>
<p>The most important way to optimize for bfcache in all browsers is to never use
the <code>unload</code> event. Ever!</p>
<p>The <code>unload</code> event is problematic for browsers because it predates bfcache and
many pages on the internet operate under the (reasonable) assumption that a page
will not continue to exist after the <code>unload</code> event has fired. This presents a
challenge because many of those pages were <em>also</em> built with the assumption that
the <code>unload</code> event would fire any time a user is navigating away, which is no
longer true (and <a href="https://developers.google.com/web/updates/2018/07/page-lifecycle-api#the-unload-event" rel="noopener">hasn't been true for a long
time</a>).</p>
<p>So browsers are faced with a dilemma, they have to choose between something that
can improve the user experience—but might also risk breaking the page.</p>
<p>Chrome and Firefox have chosen to make pages ineligible for bfcache if they add an <code>unload</code>
listener, which is less risky but also disqualifies <em>a lot</em> of pages. Safari
will attempt to cache some pages with an <code>unload</code> event listener, but to reduce
potential breakage it will not run the <code>unload</code> event when a user is navigating
away, which makes the event very unreliable.</p>
<p>Instead of using the <code>unload</code> event, use the <code>pagehide</code> event. The <code>pagehide</code>
event fires in all cases where the <code>unload</code> event currently fires, and it
<em>also</em> fires when a page is put in the bfcache.</p>
<p>In fact, <a href="https://github.com/GoogleChrome/lighthouse/releases/tag/v6.2.0" rel="noopener">Lighthouse
v6.2.0</a> has
added a <code><a href="https://github.com/GoogleChrome/lighthouse/pull/11085" rel="noopener">no-unload-listeners
audit</a></code>, which will
warn developers if any JavaScript on their pages (including that from
third-party libraries) adds an <code>unload</code> event listener.</p>
<aside class="aside flow bg-state-warn-bg color-core-text">
<p class="cluster ">
<span class="aside__icon box-block color-state-warn-text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Warning sign" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M23 21L12 2 1 21h22zm-12-3v-2h2v2h-2zm0-4h2v-4h-2v4z" />
</svg></span>
<strong>Warning</strong></p>
<div class=" flow">
<p>Never add an <code>unload</code> event listener! Use the <code>pagehide</code> event instead.
Adding an <code>unload</code> event listener will make your site slower in Firefox, and
the code won't even run most of the time in Chrome and Safari.</p>
</div></aside>
<h4 id="only-add-beforeunload-listeners-conditionally">Only add <code>beforeunload</code> listeners conditionally <a class="w-headline-link" href="#only-add-beforeunload-listeners-conditionally">#</a></h4>
<p>The <code>beforeunload</code> event will not make your pages ineligible for bfcache in
Chrome or Safari, but it will make them ineligible in Firefox, so avoid using it
unless absolutely necessary.</p>
<p>Unlike the <code>unload</code> event, however, there are legitimate uses for
<code>beforeunload</code>. For example, when you want to warn the user that they have
unsaved changes they'll lose if they leave the page. In this case, it's
recommended that you only add <code>beforeunload</code> listeners when a user has unsaved
changes and then remove them immediately after the unsaved changes are saved.</p>
<figure class="compare flow" data-type="worse"><p class="compare__label">Don't</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pageHasUnsavedChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">'Are you sure you want to exit?'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><figcaption class="compare__caption">
<p>The code above adds a <code>beforeunload</code> listener unconditionally.</p>
</figcaption>
</figure>
<figure class="compare flow" data-type="better"><p class="compare__label">Do</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">beforeUnloadListener</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">'Are you sure you want to exit?'</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">// A function that invokes a callback when the page has unsaved changes.</span><br><span class="token function">onPageHasUnsavedChanges</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> beforeUnloadListener<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// A function that invokes a callback when the page's unsaved changes are resolved.</span><br><span class="token function">onAllChangesSaved</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> beforeUnloadListener<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><figcaption class="compare__caption">
<p>The code above only adds the <code>beforeunload</code> listener when it's needed (and
removes it when it's not).</p>
</figcaption>
</figure>
<h3 id="avoid-window.opener-references">Avoid window.opener references <a class="w-headline-link" href="#avoid-window.opener-references">#</a></h3>
<p>In some browsers (including Chromium-based browsers) if a page was opened using
<code><a href="https://developer.mozilla.org/docs/Web/API/Window/open" rel="noopener">window.open()</a></code>
or (in <a href="https://crbug.com/898942" rel="noopener">Chromium-based browsers prior to version 88</a>) from a link with
<code><a href="https://developer.mozilla.org/docs/Web/HTML/Element/a#target" rel="noopener">target=_blank</a></code>—without
specifying
<code><a href="https://developer.mozilla.org/docs/Web/HTML/Link_types/noopener" rel="noopener">rel=&quot;noopener&quot;</a></code>—then
the opening page will have a reference to the window object of the opened page.</p>
<p>In addition to <a href="https://mathiasbynens.github.io/rel-noopener/" rel="noopener">being a security
risk</a>, a page with a non-null
<code><a href="https://developer.mozilla.org/docs/Web/API/Window/opener" rel="noopener">window.opener</a></code>
reference cannot safely be put into the bfcache because that could break any
pages attempting to access it.</p>
<p>As a result, it's best to avoid creating <code>window.opener</code> references by using
<code>rel=&quot;noopener&quot;</code> whenever possible. If your site requires opening a window and
controlling it through
<code><a href="https://developer.mozilla.org/docs/Web/API/Window/postMessage" rel="noopener">window.postMessage()</a></code>
or directly referencing the window object, neither the opened window nor the
opener will be eligible for bfcache.</p>
<h3 id="always-close-open-connections-before-the-user-navigates-away">Always close open connections before the user navigates away <a class="w-headline-link" href="#always-close-open-connections-before-the-user-navigates-away">#</a></h3>
<p>As mentioned above, when a page is put into the bfcache all scheduled JavaScript
tasks are paused and then resumed when the page is taken out of the cache.</p>
<p>If these scheduled JavaScript tasks are only accessing DOM APIs—or other APIs
isolated to just the current page—then pausing these tasks while the page is not
visible to the user is not going to cause any problems.</p>
<p>However, if these tasks are connected to APIs that are also accessible from
other pages in the same origin (for example: IndexedDB, Web Locks, WebSockets,
etc.) this can be problematic because pausing these tasks may prevent code in
other tabs from running.</p>
<p>As a result, some browsers will not attempt to put a page in bfcache in the
following scenarios:</p>
<ul>
<li>Pages with an open <a href="https://developer.mozilla.org/docs/Web/API/IDBOpenDBRequest" rel="noopener">IndexedDB
connection</a></li>
<li>Pages with in-progress
<a href="https://developer.mozilla.org/docs/Web/API/Fetch_API" rel="noopener">fetch()</a> or
<a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest" rel="noopener">XMLHttpRequest</a></li>
<li>Pages with an open
<a href="https://developer.mozilla.org/docs/Web/API/WebSocket" rel="noopener">WebSocket</a> or
<a href="https://developer.mozilla.org/docs/Web/API/WebRTC_API" rel="noopener">WebRTC</a>
connection</li>
</ul>
<p>If your page is using any of these APIs, it's best to always close connections
and remove or disconnect observers during the <code>pagehide</code> or <code>freeze</code> event. That
will allow the browser to safely cache the page without the risk of it affecting
other open tabs.</p>
<p>Then, if the page is restored from the bfcache, you can re-open or re-connect to
those APIs (in the <code>pageshow</code> or <code>resume</code> event).</p>
<p>The following example shows how to ensure your pages are eligible for bfcache
when using IndexedDB by closing an open connection in the <code>pagehide</code> event
listener:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> dbPromise<span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">openDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dbPromise<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    dbPromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> req <span class="token operator">=</span> indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'my-db'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      req<span class="token punctuation">.</span><span class="token function-variable function">onupgradeneeded</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> req<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">createObjectStore</span><span class="token punctuation">(</span><span class="token string">'keyval'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      req<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      req<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> dbPromise<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Close the connection to the database when the user is leaving.</span><br>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pagehide'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>dbPromise<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    dbPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">db</span> <span class="token operator">=></span> db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    dbPromise <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Open the connection when the page is loaded or restored from bfcache.</span><br>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">openDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="update-stale-or-sensitive-data-after-bfcache-restore">Update stale or sensitive data after bfcache restore <a class="w-headline-link" href="#update-stale-or-sensitive-data-after-bfcache-restore">#</a></h3>
<p>If your site keeps user state—especially any sensitive user information—that
data needs to be updated or cleared after a page is restored from bfcache.</p>
<p>For example, if a user navigates to a checkout page and then updates their
shopping cart, a back navigation could potentially surface out-of-date
information if a stale page is restored from bfcache.</p>
<p>Another, more critical example is if a user signs out of a site on a public
computer and the next user clicks the back button. This could potentially expose
private data that the user assumed was cleared when they logged out.</p>
<p>To avoid situations like this, it's good to always update the page after a
<code>pageshow</code> event if <code>event.persisted</code> is <code>true</code>.</p>
<p>The following code checks for the presence of a site-specific cookie in the
<code>pageshow</code> event and reloads if the cookie is not found:</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>persisted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">my-cookie</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Force a reload if the user has logged out.</span><br>    location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="test-to-ensure-your-pages-are-cacheable">Test to ensure your pages are cacheable <a class="w-headline-link" href="#test-to-ensure-your-pages-are-cacheable">#</a></h3>
<p>Chrome DevTools can help you test your pages to ensure they're optimized for
bfcache, and identify any issues that may be preventing them from being
eligible.</p>
<p>To test a particular page, navigate to it in Chrome and then in DevTools go to
<strong>Application</strong> &gt; <strong>Back-forward Cache</strong>. Next click the <strong>Run Test</strong> button and
DevTools will attempt to navigate away and back to determine whether the page
could be restored from bfcache.</p>
<img     alt="Back-forward cache panel in DevTools"     class="w-screenshot"     decoding="async"     height="313"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format"     srcset="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/QafTzULUNflaSh77zBgT.png?auto=format&w=1600 1600w"          width="800"   />
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>The Back/forward Cache feature in DevTools is currently in active development.
We strongly encourage developers to test their pages in Chrome Canary to
ensure they're running the latest version of DevTools and getting the most
up-to-date bfcache recommendations.</p>
</div></aside>
<p>If successful, the panel will report &quot;Restored from back-forward cache&quot;:</p>
<img     alt="DevTools reporting a page was successfully restored from bfcache"     class="w-screenshot"     decoding="async"     height="313"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format"     srcset="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/vPwN0z95ZBTiwZIpdZT4.png?auto=format&w=1600 1600w"          width="800"   />
<p>If unsuccessful, the panel will indicate the page was not restored and list the
reason why. If the reason is something you as a developer can address, that
will also be indicated:</p>
<img     alt="DevTools reporting failure to restore a page from bfcache"     class="w-screenshot"     decoding="async"     height="313"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format"     srcset="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/ji3ew4DoP6joKdJvtGwa.png?auto=format&w=1600 1600w"          width="800"   />
<p>In the screenshot above, the use of an <code>unload</code> event listener is
<a href="/bfcache/#never-use-the-unload-event">preventing</a> the page from being eligible
for bfcache. You can fix that by switching from <code>unload</code> to using <code>pagehide</code> instead:</p>
<figure class="compare flow" data-type="worse"><p class="compare__label">Don't</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'unload'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code></figure>
<figure class="compare flow" data-type="better"><p class="compare__label">Do</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pagehide'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code></figure>
<h2 id="how-bfcache-affects-analytics-and-performance-measurement">How bfcache affects analytics and performance measurement <a class="w-headline-link" href="#how-bfcache-affects-analytics-and-performance-measurement">#</a></h2>
<p>If you track visits to your site with an analytics tool, you will likely notice
a decrease in the total number of pageviews reported as Chrome continues to
enable bfcache for more users.</p>
<p>In fact, you're likely <em>already</em> underreporting pageviews from other browsers
that implement bfcache since most of the popular analytics libraries do not
track bfcache restores as new pageviews.</p>
<p>If you don't want your pageview counts to go down due to Chrome enabling
bfcache, you can report bfcache restores as pageviews (recommended) by listening
to the <code>pageshow</code> event and checking the <code>persisted</code> property.</p>
<p>The following example shows how to do this with Google Analytics; the logic
should be similar for other analytics tools:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Send a pageview when the page is first loaded.</span><br><span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token string">'page_view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>persisted <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Send another pageview if the page is restored from bfcache.</span><br>    <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token string">'page_view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="performance-measurement">Performance measurement <a class="w-headline-link" href="#performance-measurement">#</a></h3>
<p>bfcache can also negatively affect performance metrics collected <a href="/user-centric-performance-metrics/#in-the-field">in the
field</a>, specifically metrics
that measure page load times.</p>
<p>Since bfcache navigations restore an existing page rather than initiate a new
page load, the total number of page loads collected will decrease when bfcache
is enabled. What's critical, though, is that the page loads being replaced by
bfcache restores would likely have been some of the fastest page loads in your
dataset. This is because back and forward navigations, by definition, are repeat
visits, and repeat page loads are generally faster than page loads from first
time visitors (due to <a href="/http-cache/">HTTP caching</a>, as mentioned earlier).</p>
<p>The result is fewer fast page loads in your dataset, which will likely skew the
distribution slower—despite the fact that the performance experienced by the
user has probably improved!</p>
<p>There are a few ways to deal with this issue. One is to annotate all page load
metrics with their respective <a href="https://www.w3.org/TR/navigation-timing-2/#sec-performance-navigation-types" rel="noopener">navigation
type</a>:
<code>navigate</code>, <code>reload</code>, <code>back_forward</code>, or <code>prerender</code>. This will allow you to
continue to monitor your performance within these navigation types—even if the
overall distribution skews negative. This approach is recommended for
non-user-centric page load metrics like <a href="/ttfb/">Time to First Byte
(TTFB)</a>.</p>
<p>For user-centric metrics like the <a href="/vitals/">Core Web Vitals</a>, a better option
is to report a value that more accurately represents what the user experiences.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text">
<p class="cluster color-state-bad-text">
<span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z" />
</svg></span>
<strong>Caution</strong></p>
<div class=" flow">
<p>The <code>back_forward</code> navigation type in the <a href="https://www.w3.org/TR/navigation-timing-2/#sec-performance-navigation-types" rel="noopener">Navigation Timing
API</a>
is not to be confused with bfcache restores. The Navigation Timing API only
annotates page loads, whereas bfcache restores are re-using a page loaded from
a previous navigation.</p>
</div></aside>
<h3 id="impact-on-core-web-vitals">Impact on Core Web Vitals <a class="w-headline-link" href="#impact-on-core-web-vitals">#</a></h3>
<p><a href="/vitals/">Core Web Vitals</a> measure the user's experience of a web page across a
variety of dimensions (loading speed, interactivity, visual stability), and
since users experience bfcache restores as faster navigations than traditional
page loads, it's important that the Core Web Vitals metrics reflect this. After
all, a user doesn't care whether or not bfcache was enabled, they just care that
the navigation was fast!</p>
<p>Tools like the <a href="https://developers.google.com/web/tools/chrome-user-experience-report" rel="noopener">Chrome User Experience
Report</a>,
that collect and report on the Core Web Vitals metrics treat bfcache restores as
separate page visits in their dataset.</p>
<p>And while there aren't (yet) dedicated web performance APIs for measuring these
metrics after bfcache restores, their values can be approximated using existing
web APIs.</p>
<ul>
<li>For <a href="/lcp/">Largest Contentful Paint (LCP)</a>, you can use the delta between
the <code>pageshow</code> event's timestamp and the timestamp of the next painted frame
(since all elements in the frame will be painted at the same time). Note
that in the case of a bfcache restore, LCP and FCP will be the same.</li>
<li>For <a href="/fid/">First Input Delay (FID)</a>, you can re-add the event listeners
(the same ones used by the <a href="https://github.com/GoogleChromeLabs/first-input-delay" rel="noopener">FID
polyfill</a>) in the
<code>pageshow</code> event, and report FID as the delay of the first input after the
bfcache restore.</li>
<li>For <a href="/cls/">Cumulative Layout Shift (CLS)</a>, you can continue to keep using
your existing Performance Observer; all you have to do is reset the current
CLS value to 0.</li>
</ul>
<p>For more details on how bfcache affects each metric, refer to the individual
Core Web Vitals <a href="/vitals/#core-web-vitals">metric guides pages</a>. And for a
specific example of how to implement bfcache versions of these metrics in code,
refer to the <a href="https://github.com/GoogleChrome/web-vitals/pull/87" rel="noopener">PR adding them to the web-vitals JS
library</a>.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>As of <code>v1</code>, the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener">web-vitals</a>
JavaScript library <a href="https://github.com/GoogleChrome/web-vitals/pull/87" rel="noopener">supports bfcache
restores</a> in the metrics
it reports. Developers using <code>v1</code> or greater should not need to update their
code.</p>
</div></aside>
<h2 id="additional-resources">Additional Resources <a class="w-headline-link" href="#additional-resources">#</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/Firefox/Releases/1.5/Using_Firefox_1.5_caching" rel="noopener">Firefox
Caching</a>
<em>(bfcache in Firefox)</em></li>
<li><a href="https://webkit.org/blog/427/webkit-page-cache-i-the-basics/" rel="noopener">Page Cache</a>
<em>(bfcache in Safari)</em></li>
<li><a href="https://docs.google.com/document/d/1JtDCN9A_1UBlDuwkjn1HWxdhQ1H2un9K4kyPLgBqJUc/edit?usp=sharing" rel="noopener">Back/forward cache: web exposed
behavior</a>
<em>(bfcache differences across browsers)</em></li>
<li><a href="https://back-forward-cache-tester.glitch.me/?persistent_logs=1" rel="noopener">bfcache
tester</a>
<em>(test how different APIs and events affect bfcache in browsers)</em></li>
</ul>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/performance/">Performance</a>
          
        
          
            
            <a class="pill" href="/tags/web-vitals/">Web Vitals</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Nov 15, 2021</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/bfcache/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@philwalton"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
