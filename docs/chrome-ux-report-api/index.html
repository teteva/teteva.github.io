
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=4032b779cb701">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Using the Chrome UX Report API</title>
<meta name="description" content="Learn how to use the Chrome UX Report API to get easy, RESTful access to real-user experience data across millions of websites. " />

<link rel="canonical" href="https://web.dev/chrome-ux-report-api/" />

<meta itemprop="name" content="Using the Chrome UX Report API" />
<meta itemprop="description" content="Learn how to use the Chrome UX Report API to get easy, RESTful access to real-user experience data across millions of websites. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/chrome-ux-report-api/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Using the Chrome UX Report API" />
<meta property="og:description" content="Learn how to use the Chrome UX Report API to get easy, RESTful access to real-user experience data across millions of websites. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="chrome-ux-report" />
<meta property="tag" content="web-vitals" />
<meta property="tag" content="performance" />
<meta property="tag" content="metrics" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Using the Chrome UX Report API" />
<meta name="twitter:description" content="Learn how to use the Chrome UX Report API to get easy, RESTful access to real-user experience data across millions of websites. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=1f25e9518a6', 'module');




  loadScript('/js/content.js?v=9a026d8a2a385', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  
    <img     alt="Hero Image"     class="w-hero w-hero--cover"     decoding="auto"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/TQ4U8BZanGFSfJI973xn.png?auto=format&w=1600 1600w"          width="1600"   />
  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#using-the-chrome-ux-report-api" class="w-toc__header--link">
        Using the Chrome UX Report API
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#querying-origin-data">Querying origin data</a><ol><li><a href="#errors">Errors</a></li></ol></li><li><a href="#querying-url-data">Querying URL data</a><ol><li><a href="#url-normalization">URL normalization</a></li></ol></li><li><a href="#querying-by-form-factor">Querying by form factor</a></li><li><a href="#assessing-core-web-vitals-performance">Assessing Core Web Vitals performance</a></li><li><a href="#what's-next">What's next?</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@rick_viscomi | @shane_exterkamp"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      
        
        <div class="w-post-breadcrumbs">
          <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>

  <svg
    class="w-breadcrumbs__icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 0 24 24"
    width="24"
    aria-hidden="true"
  >
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
  </svg>

  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
        </div>
      

      <h1 id="using-the-chrome-ux-report-api" class="w-article-header__headline">Using the Chrome UX Report API</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          <p>Learn how to use the Chrome UX Report API to get easy, RESTful access to real-user experience data across millions of websites.</p>

        </p>
      

      
        <div class="w-author__published">
          <time>Jun 25, 2020</time>
          
        </div>
      

      
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/fast"
          >Fast load times</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/rviscomi/"><img     alt="Rick Viscomi"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/oWRqaR6XXwIdNXPLpUMn.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/rviscomi/">Rick Viscomi</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/rick_viscomi"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/rviscomi">GitHub</a>
      </li>
      
      
    </ul>
  </div>
</div>
          
            <div class="w-author">
  <a href="/authors/exterkamp/"><img     alt="Shane Exterkamp"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/yPytekIqH5VnoqMx3jj2.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/exterkamp/">Shane Exterkamp</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/shane_exterkamp"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/exterkamp">GitHub</a>
      </li>
      
      
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>The <a href="https://developers.google.com/web/tools/chrome-user-experience-report" rel="noopener">Chrome UX Report</a> (CrUX) dataset represents how real-world Chrome users experience popular destinations on the web. Since 2017, when the queryable dataset was first released on <a href="/chrome-ux-report-bigquery/">BigQuery</a>, field data from CrUX has been integrated into developer tools like <a href="/chrome-ux-report-pagespeed-insights/">PageSpeed Insights</a>, the <a href="/chrome-ux-report-data-studio-dashboard/">CrUX Dashboard</a>, and Search Console's <a href="https://support.google.com/webmasters/answer/9205520" rel="noopener">Core Web Vitals report</a>, enabling developers to easily measure and monitor real-user experiences. The piece that has been missing all this time has been a tool that provides free and RESTful access to CrUX data programmatically. To help bridge that gap, we're excited to announce the release of the all new <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference" rel="noopener">Chrome UX Report API</a>!</p>
<p>This API has been built with the goal of providing developers with simple, fast, and comprehensive access to CrUX data. The CrUX API only reports <a href="/how-to-measure-speed/#lab-data-vs-field-data"><em>field</em></a> user experience data, unlike the existing <a href="https://developers.google.com/speed/docs/insights/v5/get-started" rel="noopener">PageSpeed Insights API</a>, which also reports <em>lab</em> data from the Lighthouse performance audits. The CrUX API is streamlined and can quickly serve user experience data, making it ideally suited for real-time auditing applications.</p>
<p>To ensure that developers have access to all of the metrics that matter the most—the <a href="/vitals/#core-web-vitals">Core Web Vitals</a>—the CrUX API audits and monitors <a href="/lcp/">Largest Contentful Paint</a> (LCP), <a href="/fid/">First Input Delay</a> (FID), and <a href="/cls/">Cumulative Layout Shift</a> (CLS) at both the origin and URL level.</p>
<p>So let's dive in and see how to use it!</p>
<h2 id="querying-origin-data">Querying origin data <a class="w-headline-link" href="#querying-origin-data">#</a></h2>
<p>Origins in the CrUX dataset encompass all underlying page-level experiences. The example below demonstrates how to query the CrUX API for an origin's user experience data using cURL on the command line.</p>
<web-copy-code><pre class="language-bash"><code class="language-bash"><mark class="highlight-line highlight-line-active"><span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">"[YOUR_API_KEY]"</span></mark><br><span class="highlight-line"><span class="token function">curl</span> <span class="token string">"https://chromeuxreport.googleapis.com/v1/records:queryRecord?key=<span class="token variable">$API_KEY</span>"</span> <span class="token punctuation">\</span></span><br><span class="highlight-line">  --header <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span></span><br><mark class="highlight-line highlight-line-active">  --data <span class="token string">'{"origin": "https://web.dev"}'</span></mark></code></pre>
</web-copy-code><p>Run this query interactively in the <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord?apix=true&amp;apix_params=%7B%22resource%22%3A%7B%22origin%22%3A%22https%3A%2F%2Fwww.google.com%22%7D%7D" rel="noopener">CrUX API explorer</a>.</p>
<div class="w-aside w-aside--note">
<p>All API requests must provide a value for the <code>key</code> parameter—<code>[YOUR_API_KEY]</code> in the example above is left as a placeholder. Get your own private CrUX API key at the click of a button in the official <a href="https://goo.gle/crux-api-key" rel="noopener">CrUX API documentation</a>. For convenience, the interactive <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord?apix=true" rel="noopener">CrUX API explorer</a> does not require an API key.</p>
</div>
<p>The <code>curl</code> command is made up of three parts:</p>
<ol>
<li>The URL endpoint of the API, including the caller's private API key.</li>
<li>The <code>Content-Type: application/json</code> header, indicating that the request body contains JSON.</li>
<li>The JSON-encoded <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#request-body" rel="noopener">request body</a>, specifying the <code>https://web.dev</code> origin.</li>
</ol>
<p>To do the same thing in JavaScript, use the <a name="crux-api-util"><code>CrUXApiUtil</code></a> utility, which makes the API call and returns the decoded response.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> CrUXApiUtil <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token comment">// Get your CrUX API key at https://goo.gle/crux-api-key.</span></span><br><mark class="highlight-line highlight-line-active">CrUXApiUtil<span class="token punctuation">.</span><span class="token constant">API_KEY</span> <span class="token operator">=</span> <span class="token string">'[YOUR_API_KEY]'</span><span class="token punctuation">;</span></mark><br><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token constant">API_ENDPOINT</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://chromeuxreport.googleapis.com/v1/records:queryRecord?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CrUXApiUtil<span class="token punctuation">.</span><span class="token constant">API_KEY</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span><br><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token function-variable function">query</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">requestBody</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>CrUXApiUtil<span class="token punctuation">.</span><span class="token constant">API_KEY</span> <span class="token operator">==</span> <span class="token string">'[YOUR_API_KEY]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">throw</span> <span class="token string">'Replace "YOUR_API_KEY" with your private CrUX API key. Get a key at https://goo.gle/crux-api-key.'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>CrUXApiUtil<span class="token punctuation">.</span><span class="token constant">API_ENDPOINT</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> response<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><p>Replace <code>[YOUR_API_KEY]</code> with your <a href="https://goo.gle/crux-api-key" rel="noopener">key</a>. Next, call the <code>CrUXApiUtil.query</code> function and pass in the <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#request-body" rel="noopener">request body</a> object.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  origin<span class="token operator">:</span> <span class="token string">'https://web.dev'</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><p>If data exists for this origin, the API response is a JSON-encoded object containing <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/Metric" rel="noopener">metrics</a> representing the distribution of user experiences. The distribution metrics are histogram bins and percentiles.</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"record"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"key"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"origin"</span><span class="token operator">:</span> <span class="token string">"https://web.dev"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"metrics"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"largest_contentful_paint"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"histogram"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.7925068547983514</span></mark><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.1317422195536863</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.07575092564795324</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"percentiles"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">          <span class="token property">"p75"</span><span class="token operator">:</span> <span class="token number">2216</span></mark><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token comment">// ...</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>The <code>start</code> and <code>end</code> properties of the <code>histogram</code> object represent the range of values users experience for the given metric. The <code>density</code> property represents the proportion of user experiences within that range. In this example, 79% of LCP user experiences across all web.dev pages are under 2,500 milliseconds, which is the &quot;<a href="/lcp/#what-is-lcp">good</a>&quot; LCP threshold. The <code>percentiles.p75</code> value means that 75% of user experiences in this distribution are less than 2,216 milliseconds. Learn more about the response structure in the <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#response-body" rel="noopener">response body</a> documentation.</p>
<h3 id="errors">Errors <a class="w-headline-link" href="#errors">#</a></h3>
<p>When the CrUX API doesn't have any data for a given origin, it responds with a JSON-encoded error message:</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span><br>    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"chrome ux report data not found"</span><span class="token punctuation">,</span><br>    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"NOT_FOUND"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>To debug this error, first check that the requested origin is publicly navigable. You can test this by entering the origin into your browser's URL bar and comparing it against the final URL after any redirects. Common problems include unnecessarily adding or omitting the subdomain and using the wrong HTTP protocol.</p>
<figure class="w-compare"><p class="w-compare__label w-compare__label--worse">Error</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"origin"</span><span class="token operator">:</span> <span class="token string">"http://www.web.dev"</span><span class="token punctuation">}</span></code></pre>
</web-copy-code><figcaption class="w-compare__caption">
<p>This origin incorrectly includes the <code>http://</code> protocol and <code>www.</code> subdomain.</p>
</figcaption>
</figure>
<figure class="w-compare"><p class="w-compare__label w-compare__label--better">Success</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"origin"</span><span class="token operator">:</span> <span class="token string">"https://web.dev"</span><span class="token punctuation">}</span></code></pre>
</web-copy-code><figcaption class="w-compare__caption">
<p>This origin is publicly navigable.</p>
</figcaption>
</figure>
<p>If the requested origin <em>is</em> the navigable version, this error may also occur if the origin has an insufficient number of samples. All origins and URLs included in the dataset must have a sufficient number of samples to anonymize individual users. Additionally, origins and URLs must be <a href="https://developers.google.com/search/reference/robots_txt" rel="noopener">publicly crawlable</a>. Refer to the <a href="https://developers.google.com/web/tools/chrome-user-experience-report#methodology" rel="noopener">CrUX methodology</a> to learn more about how websites are included in the dataset.</p>
<h2 id="querying-url-data">Querying URL data <a class="w-headline-link" href="#querying-url-data">#</a></h2>
<p>You've seen how to query the CrUX API for the overall user experience on an origin. To restrict the results to a particular page, use the <code>url</code> request parameter.</p>
<web-copy-code><pre class="language-bash"><code class="language-bash"><mark class="highlight-line highlight-line-active"><span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">"[YOUR_API_KEY]"</span></mark><br><span class="highlight-line"><span class="token function">curl</span> <span class="token string">"https://chromeuxreport.googleapis.com/v1/records:queryRecord?key=<span class="token variable">$API_KEY</span>"</span> <span class="token punctuation">\</span></span><br><span class="highlight-line">  --header <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span></span><br><mark class="highlight-line highlight-line-active">  --data <span class="token string">'{"url": "https://web.dev/fast/"}'</span></mark></code></pre>
</web-copy-code><p>This cURL command is similar to the origin example, except that the request body uses the <code>url</code> parameter to specify the page to look up.</p>
<p>To query URL data from the CrUX API in JavaScript, call the <a href="#crux-api-util"><code>CrUXApiUtil.query</code></a> function using the <code>url</code> parameter in the request body.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  url<span class="token operator">:</span> <span class="token string">'https://web.dev/fast/'</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><p>If data for this URL exists in the CrUX dataset, the API will return a JSON-encoded response like the one below.</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"record"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"key"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://web.dev/fast/"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"metrics"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"largest_contentful_paint"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"histogram"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.8477304539092148</span></mark><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.08988202359528057</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.062387522495501155</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"percentiles"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">          <span class="token property">"p75"</span><span class="token operator">:</span> <span class="token number">1947</span></mark><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token comment">// ...</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>True to form, the results show that <code>https://web.dev/fast/</code> has 85% &quot;good&quot; LCP experiences and a 75th percentile of 1,947 milliseconds, which is slightly better than the origin-wide distribution.</p>
<h3 id="url-normalization">URL normalization <a class="w-headline-link" href="#url-normalization">#</a></h3>
<p>The CrUX API may normalize requested URLs to better match the list of known URLs. For example, querying for the URL <code>https://web.dev/fast/#measure-performance-in-the-field</code> will result in data for <code>https://web.dev/fast/</code> due to normalization. When this happens, a <code>urlNormalizationDetails</code> object will be included in the response.</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"record"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"key"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://web.dev/fast/"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"metrics"</span><span class="token operator">:</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token property">"urlNormalizationDetails"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">    <span class="token property">"normalizedUrl"</span><span class="token operator">:</span> <span class="token string">"https://web.dev/fast/"</span><span class="token punctuation">,</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token property">"originalUrl"</span><span class="token operator">:</span> <span class="token string">"https://web.dev/fast/#measure-performance-in-the-field"</span></mark><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>Learn more about <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#urlnormalization" rel="noopener">URL normalization</a> in the CrUX documentation.</p>
<h2 id="querying-by-form-factor">Querying by form factor <a class="w-headline-link" href="#querying-by-form-factor">#</a></h2>
<div class="w-aside w-aside--key-term">
<p><strong>Key Term</strong>:
A form factor is the type of device on which a user visits a website. Common device types include desktop, phone, and tablet.</p>
</div>
<p>User experiences can vary significantly depending on website optimizations, network conditions, and users' devices. To better understand these differences, drill down into origin and URL performance using the <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#formfactor" rel="noopener"><code>formFactor</code></a> dimension of the CrUX API.</p>
<p>The API supports three explicit form factor values: <code>DESKTOP</code>, <code>PHONE</code>, and <code>TABLET</code>. In addition to the origin or URL, specify one of these values in the <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference/rest/v1/records/queryRecord#request-body" rel="noopener">request body</a> to restrict results to only those user experiences. The example below demonstrates how to query the API by form factor using cURL.</p>
<web-copy-code><pre class="language-bash"><code class="language-bash"><mark class="highlight-line highlight-line-active"><span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">"[YOUR_API_KEY]"</span></mark><br><span class="highlight-line"><span class="token function">curl</span> <span class="token string">"https://chromeuxreport.googleapis.com/v1/records:queryRecord?key=<span class="token variable">$API_KEY</span>"</span> <span class="token punctuation">\</span></span><br><span class="highlight-line">  --header <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span></span><br><mark class="highlight-line highlight-line-active">  --data <span class="token string">'{"url": "https://web.dev/fast/", "formFactor": "PHONE"}'</span></mark></code></pre>
</web-copy-code><p>To query the CrUX API for form factor-specific data using JavaScript, call the <a href="#crux-api-util"><code>CrUXApiUtil.query</code></a> function using the <code>url</code> and <code>formFactor</code> parameters in the request body.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  url<span class="token operator">:</span> <span class="token string">'https://web.dev/fast/'</span><span class="token punctuation">,</span></mark><br><mark class="highlight-line highlight-line-active">  formFactor<span class="token operator">:</span> <span class="token string">'PHONE'</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><p>Omitting the <code>formFactor</code> parameter is equivalent to requesting data for all form factors combined.</p>
<web-copy-code><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">"record"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"key"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://web.dev/fast/"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token property">"formFactor"</span><span class="token operator">:</span> <span class="token string">"PHONE"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"metrics"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"largest_contentful_paint"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"histogram"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></mark><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.778631284916204</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.13943202979515887</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">          <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token property">"density"</span><span class="token operator">:</span> <span class="token number">0.08193668528864119</span></span><br><span class="highlight-line">          <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><mark class="highlight-line highlight-line-active">        <span class="token property">"percentiles"</span><span class="token operator">:</span> <span class="token punctuation">{</span></mark><br><span class="highlight-line">          <span class="token property">"p75"</span><span class="token operator">:</span> <span class="token number">2366</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token comment">// ...</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>The <code>key</code> field of the response will echo back the <code>formFactor</code> request configuration to confirm that only phone experiences are included.</p>
<div class="w-aside w-aside--caution">
<p><strong>Caution</strong>:
The more fine-grained the request is, for example a specific combination of URL and form factor, the fewer user experiences it will include. This may lead to more frequent &quot;not found&quot; errors, especially when querying less popular URLs or the less popular tablet device type.</p>
</div>
<p>Recall from the previous section that 85% of user experiences on this page had &quot;good&quot; LCP. Compare that to phone-specific experiences, of which only 78% are considered &quot;good&quot;. The 75th percentile is also slower among phone experiences, up from 1,947 milliseconds to 2,366 milliseconds. Segmenting by form factor has the potential to highlight more extreme disparities in user experiences.</p>
<h2 id="assessing-core-web-vitals-performance">Assessing Core Web Vitals performance <a class="w-headline-link" href="#assessing-core-web-vitals-performance">#</a></h2>
<p>The <a href="/vitals/#core-web-vitals">Core Web Vitals</a> program defines targets that help determine whether a user experience or a distribution of experiences can be considered &quot;good&quot;. In the following example, we use the CrUX API and the <a href="#crux-api-util"><code>CrUXApiUtil.query</code></a> function to assess whether a web page's distribution of Core Web Vitals metrics (LCP, FID, CLS) are &quot;good&quot;.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line">CrUXApiUtil<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  url<span class="token operator">:</span> <span class="token string">'https://web.dev/fast/'</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">assessCoreWebVitals</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">assessCoreWebVitals</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// See https://web.dev/vitals/#core-web-vitals.</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token constant">CORE_WEB_VITALS</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token string">'largest_contentful_paint'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">'first_input_delay'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">'cumulative_layout_shift'</span></span><br><span class="highlight-line">  <span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token constant">CORE_WEB_VITALS</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">metric</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>record<span class="token punctuation">.</span>metrics<span class="token punctuation">[</span>metric<span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'No data for'</span><span class="token punctuation">,</span> metric<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> p75 <span class="token operator">=</span> data<span class="token punctuation">.</span>percentiles<span class="token punctuation">.</span>p75<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> threshold <span class="token operator">=</span> data<span class="token punctuation">.</span>histogram<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>end<span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token comment">// A Core Web Vitals metric passes the assessment if</span></span><br><span class="highlight-line">    <span class="token comment">// its 75th percentile is under the "good" threshold.</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> passes <span class="token operator">=</span> p75 <span class="token operator">&lt;</span> threshold<span class="token punctuation">;</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The 75th percentile (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p75<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>metric<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span></span><br><span class="highlight-line">        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>passes <span class="token operator">?</span> <span class="token string">'passes'</span> <span class="token operator">:</span> <span class="token string">'does not pass'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span></span><br><span class="highlight-line">        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the Core Web Vitals "good" threshold (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>threshold<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">).</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><div class="w-aside w-aside--gotchas"><strong>Gotchas!</strong>
<p>The API may only be called with one origin or URL at a time. To assess multiple websites or pages, make separate calls to the API.</p>
</div>
<p>The results show that this page passes the Core Web Vitals assessments for all three metrics.</p>
<web-copy-code><pre class="language-text"><code class="language-text">The 75th percentile (1973) of largest_contentful_paint passes the Core Web Vitals "good" threshold (2500).<br>The 75th percentile (20) of first_input_delay passes the Core Web Vitals "good" threshold (100).<br>The 75th percentile (0.05) of cumulative_layout_shift passes the Core Web Vitals "good" threshold (0.10).</code></pre>
</web-copy-code><p>Combined with an automated way to monitor API results, data from CrUX can be used to ensure that real-user experiences <strong>get fast</strong> and <strong>stay fast</strong>. For more information about Core Web Vitals and how to measure them, check out <a href="/vitals">Web Vitals</a> and <a href="/vitals-tools">Tools to measure Core Web Vitals</a>.</p>
<h2 id="what's-next">What's next? <a class="w-headline-link" href="#what's-next">#</a></h2>
<p>The features included in the initial version of the CrUX API only scratch the surface of the kinds of insights that are possible with CrUX. Users of the <a href="/chrome-ux-report-bigquery/">CrUX dataset on BigQuery</a> may be familiar with some of the more advanced features including:</p>
<ul>
<li>Additional metrics
<ul>
<li><code>first_paint</code></li>
<li><code>dom_content_loaded</code></li>
<li><code>onload</code></li>
<li><code>time_to_first_byte</code></li>
<li><code>notification_permissions</code></li>
</ul>
</li>
<li>Additional dimensions
<ul>
<li>month</li>
<li>country</li>
<li>effective connection type (ECT)</li>
</ul>
</li>
<li>Additional granularity
<ul>
<li>detailed histograms</li>
<li>more percentiles</li>
</ul>
</li>
</ul>
<p>Over time, we hope to integrate more of these features with the CrUX API's ease of use and free pricing to enable new ways of exploring the data and discovering insights about the state of user experiences on the web.</p>
<p>Check out the official <a href="https://developers.google.com/web/tools/chrome-user-experience-report/api/reference" rel="noopener">CrUX API docs</a> to <a href="https://goo.gle/crux-api-key" rel="noopener">acquire your API key</a> and explore more example applications. We hope you'll give it a try and we'd love to hear any questions or feedback you may have, so please reach out to us on the <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chrome-ux-report" rel="noopener">CrUX discussion forum</a>. And to stay up to date on everything we have planned for the CrUX API, subscribe to the <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chrome-ux-report-announce" rel="noopener">CrUX announcement forum</a> or follow us on Twitter at <a href="https://twitter.com/ChromeUXReport" rel="noopener">@ChromeUXReport</a>.</p>


    

    
  <div class="w-chips ">
    
      
    
      
    
      
        
        <a class="w-chip" href="/tags/chrome-ux-report/">Chrome UX Report</a>
      
    
      
        
        <a class="w-chip" href="/tags/web-vitals/">Web Vitals</a>
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Performance</a>
      
    
      
        
        <a class="w-chip" href="/tags/metrics/">Metrics</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jun 25, 2020</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/fast/chrome-ux-report-api/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
