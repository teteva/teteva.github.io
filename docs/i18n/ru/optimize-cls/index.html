
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=4d7ca0a2da497">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=12a00177a00e2">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Оптимизация совокупного смещения макета</title>
<meta name="description" content="Совокупное смещение макета (CLS)это показатель, который количественно определяет, как часто пользователи сталкиваются с внезапными смещения содержимого страницы. В этой статье мы рассмотрим, как оптимизировать распространенные причины плохих значений CLS, такие как изображения и плавающие фреймы без размеров, или динамический контент." />

<link rel="canonical" href="https://web.dev/i18n/ru/optimize-cls/" />
<link rel="alternate" hreflang="es" href="https://web.dev/i18n/es/optimize-cls/" />
<link rel="alternate" hreflang="ja" href="https://web.dev/i18n/ja/optimize-cls/" />
<link rel="alternate" hreflang="ko" href="https://web.dev/i18n/ko/optimize-cls/" />
<link rel="alternate" hreflang="pt" href="https://web.dev/i18n/pt/optimize-cls/" />
<link rel="alternate" hreflang="ru" href="https://web.dev/i18n/ru/optimize-cls/" />
<link rel="alternate" hreflang="zh" href="https://web.dev/i18n/zh/optimize-cls/" />
<link rel="alternate" hreflang="en" href="https://web.dev/optimize-cls/" />
<meta itemprop="name" content="Оптимизация совокупного смещения макета" />
<meta itemprop="description" content="Совокупное смещение макета (CLS)это показатель, который количественно определяет, как часто пользователи сталкиваются с внезапными смещения содержимого страницы. В этой статье мы рассмотрим, как оптимизировать распространенные причины плохих значений CLS, такие как изображения и плавающие фреймы без размеров, или динамический контент." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="ru_RU" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/i18n/ru/optimize-cls/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Оптимизация совокупного смещения макета" />
<meta property="og:description" content="Совокупное смещение макета (CLS)это показатель, который количественно определяет, как часто пользователи сталкиваются с внезапными смещения содержимого страницы. В этой статье мы рассмотрим, как оптимизировать распространенные причины плохих значений CLS, такие как изображения и плавающие фреймы без размеров, или динамический контент." />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Смещение макета может внезапно подтолкнуть контент, который вы читаете или собираетесь щелкнуть дальше по странице, что приведет к ухудшению взаимодействия с пользователем. Резервирование места для динамического контента, вызывающего смещения макета, приводит к более приятному опыту использования страницы." />
<meta property="tag" content="performance" />
<meta property="tag" content="web-vitals" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Оптимизация совокупного смещения макета" />
<meta name="twitter:description" content="Совокупное смещение макета (CLS)это показатель, который количественно определяет, как часто пользователи сталкиваются с внезапными смещения содержимого страницы. В этой статье мы рассмотрим, как оптимизировать распространенные причины плохих значений CLS, такие как изображения и плавающие фреймы без размеров, или динамический контент." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=7047225f3758c', 'module');




  loadScript('/js/content.js?v=3c494cbd5cbdf', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Обучение
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Измерение
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Блог
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        О сайте
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Закрыть</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Смещение макета может внезапно подтолкнуть контент, который вы читаете или собираетесь щелкнуть дальше по странице, что приведет к ухудшению взаимодействия с пользователем. Резервирование места для динамического контента, вызывающего смещения макета, приводит к более приятному опыту использования страницы."     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/74TRx6aETydsBGa2IZ7R.png?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="Содержание">
    <div class="course-toc__heading font-google-sans weight-medium">Содержание</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#izobrazheniya-bez-razmerov">Изображения без размеров 🌆</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#predystoriya">Предыстория</a></li><li class="toc__listitem"><a class="toc__anchor" href="#sovremennyj-sposob">Современный способ</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#reklamnye-obuyavleniya-vstraivaemye-obuekty-i-plavayushie-frejmy-bez-razmerov">Рекламные объявления, встраиваемые объекты и плавающие фреймы без размеров 📢😱</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#reklamnye-obuyavleniya">Рекламные объявления</a></li><li class="toc__listitem"><a class="toc__anchor" href="#vstraivaemye-obuekty-i-plavayushie-frejmy">Встраиваемые объекты и плавающие фреймы</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dinamicheskij-kontent">Динамический контент 📐</a></li><li class="toc__listitem"><a class="toc__anchor" href="#veb-shrifty-vyzyvayushie-pobochnye-effekty-foit-ili-fout">Веб-шрифты, вызывающие побочные эффекты FOIT или FOUT</a></li><li class="toc__listitem"><a class="toc__anchor" href="#animacii">Анимации 🏃‍♀️</a></li><li class="toc__listitem"><a class="toc__anchor" href="#instrumenty-razrabotchika">Инструменты разработчика 🔧</a></li></ul></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="optimizaciya-sovokupnogo-smesheniya-maketa">Оптимизация совокупного смещения макета</h1>
        
          <p class="color-mid-text flow-space-base">
            Узнайте, как избежать внезапных смещений макета, чтобы улучшить взаимодействие с пользователем
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>May 5, 2020</time>
             — Обновлено <time>Aug 17, 2021</time> 
          </div>
        

        
        
        <div class="flow">
          <span class="w-post-signpost__title">Available in:
    <a class="w-post-signpost__link"
        translate="no"
        lang="es"
        href="/i18n/es/optimize-cls/">
      Español</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="ja"
        href="/i18n/ja/optimize-cls/">
      日本語</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="ko"
        href="/i18n/ko/optimize-cls/">
      한국어</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="pt"
        href="/i18n/pt/optimize-cls/">
      Português</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="zh"
        href="/i18n/zh/optimize-cls/">
      中文</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="en"
        href="/i18n/en/optimize-cls/">
      English</a></span>
        </div>
        

        <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/learn-web-vitals"
          >Web Vitals</a
        >
</div>

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/addyosmani/"> <img     alt="Addy Osmani"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/1L2RBhCLSnXjCnSlevaDjy3vba73/LJyNTOzyWbowv2mrlzPS.jpeg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/addyosmani/">Addy Osmani</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/addyosmani">Twitter</a>
               <a href="https://github.com/addyosmani">GitHub</a>
               
               
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="Содержание">
      <summary>
        Содержание
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#izobrazheniya-bez-razmerov">Изображения без размеров 🌆</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#predystoriya">Предыстория</a></li><li class="toc__listitem"><a class="toc__anchor" href="#sovremennyj-sposob">Современный способ</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#reklamnye-obuyavleniya-vstraivaemye-obuekty-i-plavayushie-frejmy-bez-razmerov">Рекламные объявления, встраиваемые объекты и плавающие фреймы без размеров 📢😱</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#reklamnye-obuyavleniya">Рекламные объявления</a></li><li class="toc__listitem"><a class="toc__anchor" href="#vstraivaemye-obuekty-i-plavayushie-frejmy">Встраиваемые объекты и плавающие фреймы</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dinamicheskij-kontent">Динамический контент 📐</a></li><li class="toc__listitem"><a class="toc__anchor" href="#veb-shrifty-vyzyvayushie-pobochnye-effekty-foit-ili-fout">Веб-шрифты, вызывающие побочные эффекты FOIT или FOUT</a></li><li class="toc__listitem"><a class="toc__anchor" href="#animacii">Анимации 🏃‍♀️</a></li><li class="toc__listitem"><a class="toc__anchor" href="#instrumenty-razrabotchika">Инструменты разработчика 🔧</a></li></ul></li></ul></div>
    </details>
  </div>



      <div class="youtube">  <lite-youtube    videoid="AQqFZ5t8uNc"    videoStartAt="88 "  >  </lite-youtube></div>
<p>«Я собирался щелкнуть по нему! Почему он сдвинулся? 😭»</p>
<p>Смещение макета может отвлекать пользователей. Представьте, что вы начали читать статью, как вдруг элементы смещаются по странице, сбивая вас с толку и заставляя снова искать строчку, на который вы остановились. Такое очень часто встречается в Интернете, в том числе при чтении новостей или попытке нажать кнопки «Поиск» или «Добавить в корзину». Такие ситуации с визуальным смещением контента раздражают и расстраивают. Они часто возникают, когда видимые элементы смещаются из-за того, что другой элемент был внезапно добавлен на страницу или изменен в размерах.</p>
<p><a href="/cls">CLS (Совокупное смещение макета)</a><a href="/vitals">метрика Core Web Vitals</a>, которая измеряет нестабильность контента путем суммирования оценок смещения для каждого смещения макета (за исключением периода в 500 миллисекунд после ввода пользователя). Метрика оценивает, насколько видимый контент сместился в области просмотра, а также учитывает расстояние, на которое сдвинулись затронутые элементы.</p>
<p>В этой статье мы рассмотрим, как оптимизировать распространенные причины смещений макета.</p>
<picture>
  <source srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/9mWVASbWDLzdBUpVcjE1.svg" media="(min-width: 640px)">
  <img     alt="Хорошие значения CLS ниже 0,1, плохие значения больше 0,25 и все промежуточные значения требуют улучшения"     class="w-screenshot w-screenshot--filled width-full"     decoding="async"     height="96"          loading="lazy"          src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/uqclEgIlTHhwIgNTXN3Y.svg"               width="384"   />
</picture>
<p>Наиболее частые причины плохого показателя CLS:</p>
<ul>
<li>изображения без размеров;</li>
<li>рекламные объявления, встраиваемые объекты и плавающие фреймы без размеров;</li>
<li>динамически добавляемый контент;</li>
<li>веб-шрифты, вызывающие побочные эффекты FOIT или FOUT;</li>
<li>действия, ожидающие ответа сети перед обновлением DOM.</li>
</ul>
<h2 id="izobrazheniya-bez-razmerov">Изображения без размеров 🌆 <a class="w-headline-link" href="#izobrazheniya-bez-razmerov">#</a></h2>
<p><strong>Резюме:</strong> всегда включайте атрибуты <code>width</code> и <code>height</code> для изображений и видеоэлементов. В качестве альтернативы зарезервируйте необходимое пространство с помощью <a href="https://css-tricks.com/aspect-ratio-boxes/" rel="noopener">CSS-свойства aspect-ratio</a>. Такой подход гарантирует, что браузер сможет выделить правильный объем места в документе во время загрузки изображения.</p>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/8wKRITUkK3Zrp5jvQ1Xw.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/10TEOBGBqZm1SEXE7KiC.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/WOQn6K6OQcoElRw0NCkZ.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Изображения без указания высоты и ширины. </figcaption></figure>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/wm4VqJtKvove6qjiIjic.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/38UiHViz44OWqlKFe1VC.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/sFxDb36aEMvTPIyZHz1O.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Изображения с указанной шириной и высотой. </figcaption></figure>
<figure class="w-figure"><img     alt="Отчет Lighthouse, показывающий значения CLS до и после установки размеров для изображений"          decoding="async"     height="148"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/A2OyrzSXuW1qYGWAarGx.png?auto=format&w=1600 1600w"          width="800"   /> <figcaption class="w-figcaption"> Lighthouse 6.0, влияние установки размеров для изображений на CLS. </figcaption></figure>
<h3 id="predystoriya">Предыстория <a class="w-headline-link" href="#predystoriya">#</a></h3>
<p>На заре Интернета разработчики добавляли атрибуты <code>width</code> и <code>height</code> к своим тегам <code>&lt;img&gt;</code>, чтобы обеспечить достаточное пространство на странице до того, как браузер начнет загружать изображения. Это позволяло свести к минимуму пересчет положения элементов на странице и их перекомпоновку.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>640<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>360<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Puppy with balloons<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
</web-copy-code><p>Вы можете заметить, что в примере выше атрибуты <code>width</code> и <code>height</code> не содержат единицы измерения. «Пиксельные» размеры обеспечивают резервирование области 640x360. Чтобы вписаться в это пространство, изображение будет растягиваться, независимо от своих истинных размеров.</p>
<p>С появлением <a href="https://www.smashingmagazine.com/2011/01/guidelines-for-responsive-web-design/" rel="noopener">адаптивного веб-дизайна</a> разработчики начали опускать атрибуты <code>width</code> и <code>height</code>, и вместо этого для изменения размера изображений стали использовать CSS:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token comment">/* or max-width: 100%; */</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Но у такого похода есть недостаток: место под изображение можно выделить только после того, как оно начнет загружаться и браузер сможет определить его размеры. Страница будет перерисовываться по мере загрузки и появления каждого изображения на экране. Часто случалось, что текст появлялся на экране внезапно. Это было не очень удобно для пользователя.</p>
<p>Вот тут и появляется соотношение сторон. Соотношение сторон изображенияэто отношение его ширины к его высоте. Обычно оно выражается в виде двух чисел, разделенных двоеточием (например, 16:9 или 4:3). При соотношении сторон x:y изображение имеет ширину «x» единиц и высоту «y» единиц.</p>
<p>Это означает, что если мы знаем один из линейных размеров, то другой можно определить. Для соотношения сторон 16:9:</p>
<ul>
<li>если puppy.jpg имеет высоту 360 пикселей, то ширина изображения составит 360 x (16/9) = 640 пикселей;</li>
<li>если puppy.jpg имеет ширину 640 пикселей, то высота изображения составит 640 x (9/16) = 360 пикселей.</li>
</ul>
<p>Знание соотношения сторон позволяет браузеру рассчитать и зарезервировать достаточное пространство для высоты и соответствующей ширины изображения.</p>
<h3 id="sovremennyj-sposob">Современный способ <a class="w-headline-link" href="#sovremennyj-sposob">#</a></h3>
<p>Современные браузеры устанавливают соотношение сторон изображений по умолчанию на основе атрибутов ширины и высоты изображения, поэтому полезно задать их для предотвращения смещений макета. Благодаря CSS Working Group разработчики могут задать атрибуты <code>width</code> и <code>height</code> обычным способом:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- set a 640:360 i.e a 16:9 - aspect ratio --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>640<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>360<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Puppy with balloons<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
</web-copy-code><p>… А таблицы стилей <a href="https://developer.mozilla.org/docs/Web/CSS/Cascade#User-agent_stylesheets" rel="noopener">UA stylesheets</a> всех браузеров добавляют <a href="https://html.spec.whatwg.org/multipage/rendering.html#attributes-for-embedded-content-and-images" rel="noopener">соотношение сторон по умолчанию</a> на основании существующих атрибутов <code>width</code> и <code>height</code>:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span><br>  <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> <span class="token function">attr</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span> / <span class="token function">attr</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Здесь соотношение сторон вычисляется на основании атрибутов <code>width</code> и <code>height</code> до загрузки изображения. Эта информация предоставляется в самом начале расчета макета. Как только изображению задается определенная ширина (например, <code>width: 100%</code>), его высота вычисляется с помощью соотношения сторон.</p>
<p>Совет. Если вам трудно представить соотношение сторон, воспользуйтесь удобным <a href="https://aspectratiocalculator.com/16-9.html" rel="noopener">калькулятором.</a></p>
<p>Вышеупомянутые изменения соотношения сторон изображения были реализованы в <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1547231" rel="noopener">Firefox</a> и <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=979891" rel="noopener">Chromium</a> и будут добавлены в <a href="https://twitter.com/smfr/status/1220051332767174656" rel="noopener">WebKit</a> (Safari).</p>
<p>Чтобы фантастически глубоко погрузиться в тему о соотношении сторон и адаптивных изображениях, прочитайте статью <a href="https://blog.logrocket.com/jank-free-page-loading-with-media-aspect-ratios/" rel="noopener">«Загрузка страницы без подвисания с медиавыражением, проверяющим соотношение сторон»</a>.</p>
<p>Если ваше изображение находится в контейнере, вы можете использовать CSS, чтобы изменить размер изображения до ширины этого контейнера. Устанавливаем <code>height: auto;</code>, чтобы высота изображения не была фиксированной (например, <code>360px</code>).</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">img</span> <span class="token punctuation">{</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p><strong>А как насчет адаптивных изображений?</strong></p>
<p>При работе с <a href="/serve-responsive-images">адаптивными изображениями</a> атрибут <code>srcset</code> определяет изображения, среди которых браузер будет выбирать подходящее, и размер каждого изображения. Чтобы обеспечить возможность установки атрибутов ширины и высоты <code>&lt;img&gt;</code>, каждое изображение должно использовать одинаковое соотношение сторон.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br>  <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span><br>  <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy-1000.jpg<span class="token punctuation">"</span></span><br>  <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy-1000.jpg 1000w, puppy-2000.jpg 2000w, puppy-3000.jpg 3000w<span class="token punctuation">"</span></span><br>  <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Puppy with balloons<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span></code></pre>
</web-copy-code><p>А как насчет метода <a href="https://developer.mozilla.org/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#Art_direction" rel="noopener">художественного направления</a> ?</p>
<p>Основная идея метода художественного направленияотображать разные изображения в зависимости от размеров экрана устройства, например, обрезанное изображение в узких окнах просмотра и полное изображение на настольных компьютерах.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 799px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy-480w-cropped.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 800px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy-800w.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>puppy-800w.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Puppy with balloons<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>Вероятно, что эти изображения могут иметь разное соотношение сторон, и браузеры всё еще оценивают, каким должно быть наиболее эффективное решение, в том числе следует ли указывать размеры во всех источниках. Пока общее решение не принято, перекомпоновка в этом случае всё ещё возможна.</p>
<h2 id="reklamnye-obuyavleniya-vstraivaemye-obuekty-i-plavayushie-frejmy-bez-razmerov">Рекламные объявления, встраиваемые объекты и плавающие фреймы без размеров 📢😱 <a class="w-headline-link" href="#reklamnye-obuyavleniya-vstraivaemye-obuekty-i-plavayushie-frejmy-bez-razmerov">#</a></h2>
<h3 id="reklamnye-obuyavleniya">Рекламные объявления <a class="w-headline-link" href="#reklamnye-obuyavleniya">#</a></h3>
<p>Рекламаодин из основных факторов, способствующих изменению макета в Интернете. Рекламные сети и веб-мастеры часто поддерживают динамические размеры объявлений. Размеры объявлений увеличивают эффективность/доход за счет более высоких показателей кликов и большего числа объявлений, участвующих в аукционе. К сожалению, это может привести к неоптимальному взаимодействию с пользователем из-за того, что реклама выталкивает видимый контент, который вы просматриваете, вниз по странице.</p>
<p>В течение жизненного цикла объявления многие моменты могут вызвать смещение макета:</p>
<ul>
<li>когда сайт вставляет рекламный контейнер в DOM;</li>
<li>когда сайт изменяет размер рекламного контейнера с помощью собственного кода;</li>
<li>когда библиотека рекламных тегов загружается (и меняет размер рекламного контейнера);</li>
<li>когда объявление заполняет контейнер (и меняет размер, если окончательное объявление имеет другой размер).</li>
</ul>
<p>Хорошая новостьсайты могут применять передовые методы, чтобы уменьшить сдвиг. Смещение в макете можно уменьшить за счет следующих действий:</p>
<ul>
<li>Статически зарезервировать место для рекламного блока.
<ul>
<li>Другими словами, задайте стиль для элемента до загрузки библиотеки тегов объявлений.</li>
<li>При размещении рекламы в потоке контента убедитесь, что сдвиги устранены, зарезервировав место под размер рекламного блока. Эти объявления <em>не должны</em> вызывать смещения макета, если загружаются за пределами области просмотра.</li>
</ul>
</li>
<li>Будьте осторожны при размещении нелипких баннеров в верхней части области просмотра.
<ul>
<li>В приведенном ниже примере рекомендуется переместить рекламу под логотип world vision и зарезервировать достаточное место для этого блока.</li>
</ul>
</li>
<li>Если под рекламный блок на странице зарезервировано пространство, но само объявление не появилось, не стоит сворачивать это пространство, лучше показать там заполнитель, чтобы не сдвигать контент.</li>
<li>Устраните смещения, зарезервировав максимально возможный размер для рекламного блока.
<ul>
<li>Это работает, но может остаться пустое место, если блок заполнит реклама меньшего размера.</li>
</ul>
</li>
<li>Выберите наиболее вероятный размер рекламного блока на основании исторических данных.</li>
</ul>
<p>На некоторых сайтах уменьшить смещение макета можно за счет первоначального сворачивания места под рекламный блок, если вероятность его заполнения невелика. Не существует простого способа каждый раз выбирать точный размер, если только вы сами не контролируете показ рекламы.</p>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/rW77UoJQBHHehihkw2Rd.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/bmxqj3kZyplh0ncMAt7x.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/60c4T7aYOsKtZlaWBndS.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Объявления без достаточного зарезервированного места. </figcaption></figure>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/rW77UoJQBHHehihkw2Rd.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/tyUFKrue5vI9o5qKjP42.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/hVxty51kdN1w5BuUvj2O.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Объявления с достаточным зарезервированным местом. </figcaption></figure>
<figure class="w-figure"><img     alt="Отчет Lighthouse, показывающий значения CLS до и после резервирования места для рекламных баннеров"          decoding="async"     height="148"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cX6R4ACb4uVKlUb0cv1c.png?auto=format&w=1600 1600w"          width="800"   /> <figcaption class="w-figcaption"> Lighthouse 6.0, влияние резервирования места для рекламного баннера на CLS </figcaption></figure>
<h4 id="staticheskoe-rezervirovanie-mesta-dlya-reklamnogo-bloka">Статическое резервирование места для рекламного блока <a class="w-headline-link" href="#staticheskoe-rezervirovanie-mesta-dlya-reklamnogo-bloka">#</a></h4>
<p>Статически задавайте стиль для DOM-элементов блока с теми же размерами, которые передаются в вашу библиотеку тегов. Это поможет избежать смещения макета при загрузке библиотеки. Если этого не сделать, библиотека может изменить размер элемента блока после верстки страницы.</p>
<p>Также учитывайте размеры объявлений меньшего размера. Если подается объявление меньшего размера, веб-мастер может сверстать (больший) контейнер, чтобы избежать смещения макета. У такого подхода есть недостатокувеличивается количество пустого пространства, поэтому попытайтесь найти компромиссное решение.</p>
<h4 id="izbegajte-razmesheniya-reklamy-v-verhnej-chasti-oblasti-prosmotra">Избегайте размещения рекламы в верхней части области просмотра <a class="w-headline-link" href="#izbegajte-razmesheniya-reklamy-v-verhnej-chasti-oblasti-prosmotra">#</a></h4>
<p>Объявления в верхней части области просмотра могут вызывать большее смещение макета, чем объявления в середине. Это связано с тем, что под объявлениями в верхней части располагается больше контента, а значит, больше элементов перемещается, когда объявление вызывает сдвиг макета. И наоборот, объявления, расположенные в середине области просмотра, могут смещать не так много элементов, так как контент над ними с меньшей вероятностью будет смещаться.</p>
<h3 id="vstraivaemye-obuekty-i-plavayushie-frejmy">Встраиваемые объекты и плавающие фреймы <a class="w-headline-link" href="#vstraivaemye-obuekty-i-plavayushie-frejmy">#</a></h3>
<p>Встраиваемые виджеты позволяют встраивать переносимый веб-контент на вашу страницу (например, видео с YouTube, карты из Google Карты, публикации в социальных сетях и т. д.). Такие встраиваемые объекты могут иметь несколько форм:</p>
<ul>
<li>резервный HTML-код и тег JavaScript, преобразующий резервный вариант в элегантный встраиваемый объект;</li>
<li>встроенный фрагмент кода HTML;</li>
<li>встроенный плавающий фрейм.</li>
</ul>
<p>В случае встраиваемых объектов размер встраиваемого контента, как правило, не известен заранее (например, публикация в социальных сетяхбудет ли там встроенное изображение, видео или текст в несколько строк). В результате платформы, предлагающие встраивание, не всегда резервируют достаточно места для встраиваемых объектов, что может привести к смещению макета при их окончательной загрузке.</p>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/w0TM1JilKPQktQgb94un.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/NRhY88MbNJxe4o0F52eS.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/PzOpQnPH88Ymbe3MCH7B.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Встраиваемые объекты без зарезервированного места. </figcaption></figure>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/gtYqKkoEse47ErJPqVjg.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/aA8IoNeQTCEudE45hYzh.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/xjCWjSv4Z3YB29jSDGae.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Встраиваемые объекты с зарезервированным местом. </figcaption></figure>
<figure class="w-figure"><img     alt="Отчет Lighthouse, показывающий значения CLS до и после резервирования места для встраиваемого объекта"          decoding="async"     height="148"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/2XaMbZBmUit1Vz8UBshH.png?auto=format&w=1600 1600w"          width="800"   /> <figcaption class="w-figcaption"> Lighthouse 6.0, влияние резервирования места для встраиваемого объекта на CLS </figcaption></figure>
<p>Чтобы обойти эти проблемы, вы можете свести к минимуму CLS, предварительно вычислив размер достаточного места для встраиваемого объекта с заполнителем или резервным вариантом. Вот один из рабочих процессов, который вы можете использовать для встраиваемых объектов:</p>
<ul>
<li>Определите окончательную высоту встраиваемого объекта, проверив его с помощью инструментов разработчика в браузере.</li>
<li>После загрузки встраиваемого объекта размер плавающего фрейма изменится, и соответственно изменится его содержимое.</li>
</ul>
<p>Учитывайте размеры, и предусмотрите заполнитель на месте встраиваемого объекта. Возможно, потребуется учесть тонкие различия в размерах объявлений/заполнителей для разных форм-факторов с помощью медиа-запросов.</p>
<h3 id="dinamicheskij-kontent">Динамический контент 📐 <a class="w-headline-link" href="#dinamicheskij-kontent">#</a></h3>
<p><strong>Резюме:</strong> Избегайте вставлять контент поверх существующего, кроме случаев, когда это требуется в ответ на взаимодействие с пользователем. Это гарантирует, что любые изменения макета будут ожидаемыми.</p>
<p>Вы наверняка сталкивались со смещениями макета из-за пользовательского интерфейса, который появлялся вверху или внизу области просмотра, когда вы пытались загрузить сайт. Как и в случае с рекламой, это часто происходит из-за баннеров и форм, смещающих остальное содержимое страницы:</p>
<ul>
<li>
<p>«Подпишитесь на наши новости!» (Эй, сбавьте обороты! Мы же только что встретились!)</p>
</li>
<li>
<p>«Связанный контент».</p>
</li>
<li>
<p>«Установите наше приложение [iOS/Android]».</p>
</li>
<li>
<p>«Мы всё ещё принимаем заказы».</p>
</li>
<li>
<p>«Уведомление о GDPR».</p>
  <figure class="w-figure"><video                  class="w-screenshot"      controls                        loop      muted            poster="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/PF9ulVHDQOvoWendb6ea.jpg?auto=format"                >      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/LEicZ7zHqGFrXl67Olve.webm" type="video/webm" />      <source src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/XFvOHc2OB8vUD9GbpL2w.mp4" type="video/mp4" />    </video> <figcaption class="w-figcaption"> Динамический контент без зарезервированного места. </figcaption></figure>
</li>
</ul>
<p>Если вам нужно отобразить эти типы возможностей пользовательского интерфейса, заранее зарезервируйте для этого достаточное пространство в области просмотра (например, с помощью заполнителя или скелета пользовательского интерфейса), чтобы при загрузке они не вызвали неожиданного смещения содержимого страницы.</p>
<p>В некоторых случаях динамическое добавление контента является важной частью взаимодействия с пользователем. Например, при загрузке дополнительных продуктов в список элементов или при обновлении содержимого прямой трансляции. В таких случаях есть несколько способов избежать неожиданного смещения макета:</p>
<ul>
<li>Замените старый контент новым контентом в контейнере фиксированного размера или используйте карусель и удалите старый контент после перехода. Не забудьте отключить любые ссылки и элементы управления до завершения перехода, чтобы предотвратить случайные щелчки или касания при поступлении нового контента.</li>
<li>Попросите пользователя инициировать загрузку нового контента, чтобы он не был удивлен сдвигом (например, с помощью кнопки «Загрузить больше» или «Обновить»). Рекомендуется предварительно загрузить контент до взаимодействия с пользователем, чтобы он отображался немедленно. Напоминаем, что смещения макета, которые происходят в течение 500 мс после пользовательского ввода, не учитываются в CLS.</li>
<li>Незаметно для пользователя загружайте контент за пределами области просмотра, а затем выводите пользователю уведомление о доступности контента (например, с помощью кнопки «Прокрутить вверх»).</li>
</ul>
<figure class="w-figure"><img     alt="Примеры динамической загрузки контента без неожиданного смещения макета из сайта Twitter и сайта Chloé"          decoding="async"     height="458"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format"     srcset="https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/OcYv93SYnIg1kfTihK6xqRDebvB2/TjsYVkcDf03ZOVCcsizv.png?auto=format&w=1600 1600w"          width="800"   /> <figcaption class="w-figcaption"> Примеры загрузки динамического контента без непредвиденных смещений макета. Слева: загрузка содержимого прямой трансляции в Twitter. Справа: пример «Загрузить больше» на сайте Chloé. Узнайте, как команда YNAP <a href="https://medium.com/ynap-tech/how-to-optimize-for-cls-when-having-to-load-more-content-3f60f0cf561c">оптимизировала CLS при загрузке большего количества контента</a>.</figcaption></figure>
<h3 id="veb-shrifty-vyzyvayushie-pobochnye-effekty-foit-ili-fout">Веб-шрифты, вызывающие побочные эффекты FOIT или FOUT <a class="w-headline-link" href="#veb-shrifty-vyzyvayushie-pobochnye-effekty-foit-ili-fout">#</a></h3>
<p>Загрузка и рендеринг веб-шрифтов может вызвать смещение макета двумя способами:</p>
<ul>
<li>резервный шрифт заменяется новым шрифтом (FOUTмигание нестилизованного текста);</li>
<li>«невидимый» текст отображается до тех пор, пока не будет отображен новый шрифт (FOITмигание невидимого текста).</li>
</ul>
<p>Эти побочные эффекты могут помочь минимизировать следующие инструменты:</p>
<ul>
<li>свойство <code><a href="/font-display/">font-display</a></code> позволяет изменять поведение визуализации пользовательских шрифтов, оно имеет пять значений <code>auto</code>, <code>swap</code>, <code>block</code>, <code>fallback</code> и <code>optional</code>. К сожалению, все эти значения (кроме <a href="http://crrev.com/749080" rel="noopener">optional</a>) могут вызвать перекомпоновку одним из вышеуказанных способов.</li>
<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization#the_font_loading_api" rel="noopener">Font Loading API</a> (API загрузки шрифтов) может сократить время, необходимое для получения необходимых шрифтов.</li>
</ul>
<p>Что касается Chrome 83, я также могу порекомендовать следующее:</p>
<ul>
<li>использовать тег <code>&lt;link rel=preload&gt;</code> для загрузки основных веб-шрифтов: у предварительно загруженного шрифта будет больше шансов попасть в первую отрисовку контента, и в этом случае смещения макета не происходит;</li>
<li>объединить <code>&lt;link rel=preload&gt;</code> и <code>font-display: optional</code>.</li>
</ul>
<p>Более подробную информацию см. в статье <a href="/preload-optional-fonts/">«Предотвращение смещения макета и побочных эффектов FOIT (Мигание невидимого текста) путем предварительной загрузки дополнительных шрифтов»</a>.</p>
<h3 id="animacii">Анимации 🏃‍♀️ <a class="w-headline-link" href="#animacii">#</a></h3>
<p><strong>Резюме:</strong> Используйте свойство <code>transform</code> вместо анимации свойств, которая запускает смещение макета.</p>
<p>При изменении значений свойств CSS может потребоваться реакция браузера на эти изменения. Ряд значений запускает повторную компоновку, отрисовку и организацию слоев, например, <code>box-shadow</code> и <code>box-sizing</code>. Некоторые свойства CSS можно изменить менее ресурсоёмким способом.</p>
<p>Дополнительные сведения о том, какие свойства CSS запускают смещение макета, см. в таблице <a href="https://csstriggers.com/" rel="noopener">«Триггеры CSS»</a> и статье <a href="https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/" rel="noopener">«Высокопроизводительная анимация»</a>.</p>
<h3 id="instrumenty-razrabotchika">Инструменты разработчика 🔧 <a class="w-headline-link" href="#instrumenty-razrabotchika">#</a></h3>
<p>Я рад сообщить, что существует ряд инструментов для измерения и отладки CLS (Совокупного смещения макета)</p>
<p><a href="https://developers.google.com/web/tools/lighthouse" rel="noopener">Lighthouse</a> <a href="https://github.com/GoogleChrome/lighthouse/releases" rel="noopener">6.0</a> и более поздние версии включают поддержку измерения CLS в лабораторных условиях. В этом релизе также будут выделены узлы, вызывающие наибольшее смещение макета.</p>
<img     alt="Lighthouse 6.0 включает поддержку измерения CLS в разделе метрик"          decoding="async"     height="309"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/J11KOGFVAOjRMdihwX5t.jpg?auto=format&w=1600 1600w"          width="800"   />
<p>Панель <a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance" rel="noopener">Performance</a> в DevTools показывает смещения макета в разделе <strong>Experience</strong> в Chrome 84. Представление <strong>Summary</strong> для <code>Layout Shift</code> включает совокупную оценку сдвига макета, а также прямоугольное наложение, показывающее затронутые области.</p>
<figure class="w-figure"><img     alt="Записи Layout Shift отображаются на панели производительности Chrome DevTools при раскрытии раздела Experience"          decoding="async"     height="438"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/ApDKifKCRNGWI2SXSR1g.jpg?auto=format&w=1600 1600w"          width="800"   /><figcaption class="w-figcaption"> После записи новой трассировки на панели Performance в разделе <b>Experience</b> появляется красная полоса, отображающая запись <code>Layout Shift</code> Щелкнув по этой записи, вы сможете просмотреть затронутые элементы (например, увидеть смещенные записи из/в).</figcaption></figure>
<p>Измерить реальные значений CLS, агрегированные на уровне источника, также можно с помощью отчета <a href="/chrome-ux-report-bigquery/">Chrome User Experience Report</a>. Данные CrUX CLS доступны через BigQuery, а также доступен <a href="https://github.com/GoogleChrome/CrUX/blob/master/sql/cls-summary.sql" rel="noopener">образец запроса</a> для проверки производительности CLS.</p>
<p>Вот и всё. Надеюсь, приведенная информация поможет сделать ваши страницы чуть менее увёртливыми :)</p>
<p><em>Выражаем благодарность Филиппу Уолтону, Кенджи Бахе, Уоррену Мареске, Энни Салливан, Стиву Кобесу и Джильберто Кокки за их полезные обзоры.</em></p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/performance/">Производительность</a>
          
        
          
            
            <a class="pill" href="/tags/web-vitals/">Web Vitals</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Последнее обновление: <time>Aug 17, 2021</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/ru/blog/optimize-cls/index.md"
        >
          Улучшить статью
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@addyosmani"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Поделиться</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Сообщить об ошибке
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Просмотреть исходный код
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Дополнительная информация</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Новости Chrome
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Разборы конкретных случаев
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Подкасты
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Шоу
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Соцсети</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          Все продукты
        </a>
      </li>
    </ul>
    <web-language-select current="ru"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Условия и конфиденциальность
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Правила сообщества
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
