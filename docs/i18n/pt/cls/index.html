
<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=409fd344822b1">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Cumulative Layout Shift (CLS)</title>
<meta name="description" content="Este artigo apresenta a métrica Cumulative Layout Shift (CLS) e explica como medi-la." />

<link rel="canonical" href="https://web.dev/i18n/pt/cls/" />
<link rel="alternate" hreflang="es" href="https://web.dev/i18n/es/cls/" />
<link rel="alternate" hreflang="ja" href="https://web.dev/i18n/ja/cls/" />
<link rel="alternate" hreflang="ko" href="https://web.dev/i18n/ko/cls/" />
<link rel="alternate" hreflang="pt" href="https://web.dev/i18n/pt/cls/" />
<link rel="alternate" hreflang="ru" href="https://web.dev/i18n/ru/cls/" />
<link rel="alternate" hreflang="zh" href="https://web.dev/i18n/zh/cls/" />
<link rel="alternate" hreflang="en" href="https://web.dev/cls/" />
<meta itemprop="name" content="Cumulative Layout Shift (CLS)" />
<meta itemprop="description" content="Este artigo apresenta a métrica Cumulative Layout Shift (CLS) e explica como medi-la." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="pt_BR" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/i18n/pt/cls/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Cumulative Layout Shift (CLS)" />
<meta property="og:description" content="Este artigo apresenta a métrica Cumulative Layout Shift (CLS) e explica como medi-la." />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="performance" />
<meta property="tag" content="metrics" />
<meta property="tag" content="web-vitals" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Cumulative Layout Shift (CLS)" />
<meta name="twitter:description" content="Este artigo apresenta a métrica Cumulative Layout Shift (CLS) e explica como medi-la." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=b45639fe3a982', 'module');




  loadScript('/js/content.js?v=b2d0b28c3244f', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Abrir menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Abrir menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Aprender
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Medir
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        Sobre
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Fechar"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Fechar</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Aprender
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Medir
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        Sobre
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#cumulative-layout-shift-(cls)" class="w-toc__header--link">
        Cumulative Layout Shift (CLS)
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#o-que-e-cls">O que é CLS?</a><ol><li><a href="#o-que-e-uma-boa-pontuacao-cls">O que é uma boa pontuação CLS?</a></li></ol></li><li><a href="#mudancas-de-layout-em-detalhes">Mudanças de layout em detalhes</a><ol><li><a href="#pontuacao-de-mudanca-de-layout">Pontuação de mudança de layout</a></li><li><a href="#fracao-de-impacto">Fração de impacto</a></li><li><a href="#fracao-de-distancia">Fração de distância</a></li><li><a href="#mudancas-de-layout-esperadas-vs.-inesperadas">Mudanças de layout esperadas vs. inesperadas</a></li></ol></li><li><a href="#como-medir-a-cls">Como medir a CLS</a><ol><li><a href="#ferramentas-de-campo">Ferramentas de campo</a></li><li><a href="#ferramentas-de-laboratorio">Ferramentas de laboratório</a></li><li><a href="#medicao-da-cls-em-javascript">Medição da CLS em JavaScript</a></li></ol></li><li><a href="#como-melhorar-a-cls">Como melhorar a CLS</a></li><li><a href="#recursos-adicionais">Recursos adicionais</a></li><li><a href="#changelog">CHANGELOG</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@philwalton | @bibydigital"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Compartilhar</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      

      <h1 id="cumulative-layout-shift-(cls)" class="w-article-header__headline">Cumulative Layout Shift (CLS)</h1>
      

      
        <div class="w-author__published">
          <time>Jun 11, 2019</time>
           <span class="w-author__separator">•</span> Atualizado <time>Jun 1, 2021</time> 
        </div>
      

      
      
      <div class="w-layout-container--narrow w-post-signpost">
        <span class="w-post-signpost__title">Available in:
    <a class="w-post-signpost__link"
        translate="no"
        lang="es"
        href="/i18n/es/cls/">
      Español</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="ja"
        href="/i18n/ja/cls/">
      日本語</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="ko"
        href="/i18n/ko/cls/">
      한국어</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="ru"
        href="/i18n/ru/cls/">
      Русский</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="zh"
        href="/i18n/zh/cls/">
      中文</a>, <a class="w-post-signpost__link"
        translate="no"
        lang="en"
        href="/i18n/en/cls/">
      English</a></span>
      </div>
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/learn-web-vitals"
          >Web Vitals</a
        ><span class="w-post-signpost__divider">|</span><a
          class="w-post-signpost__link"
          href="/metrics"
          >Métricas</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/philipwalton/"><img     alt="Philip Walton"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/philipwalton/">Philip Walton</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/philwalton"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/philipwalton">GitHub</a>
      </li>
      
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://philipwalton.com">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
            <div class="w-author">
  <a href="/authors/mihajlija/"><img     alt="Milica Mihajlija"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/WkMOiDtaDgiAA2YkRZ5H.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/mihajlija/">Milica Mihajlija</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/bibydigital"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/mihajlija">GitHub</a>
      </li>
      
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://mihajlija.github.io/">Blog</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <div role="banner" class="w-banner w-banner--caution w-banner--body">
   <strong>1º de junho de 2021:</strong> A implementação da CLS mudou. Para saber mais sobre os motivos por trás da mudança, veja <a href="/evolving-cls">Evoluindo a métrica CLS</a>. 
</div>
<div class="w-aside w-aside--key-term">
<p><strong>Termo chave</strong>:  Cumulative Layout Shift (CLS), ou Mudança Cumulativa de Layout, é uma métrica importante e centrada no usuário para medir a <a href="/user-centric-performance-metrics/#types-of-metrics">estabilidade visual</a> porque ajuda a quantificar a frequência com que os usuários experimentam mudanças inesperadas de layout: uma CLS baixa ajuda a garantir que a página seja <a href="/user-centric-performance-metrics/#questions">agradável</a>. </div></p>
<p>Já aconteceu de você estar lendo um artigo online quando algo muda repentinamente na página? Sem aviso, o texto se move e você perdeu o seu lugar. Ou ainda pior: você está prestes a tocar num link ou botão, mas um instante antes do seu dedo pousar - BOOM - o link se move e você acaba clicando noutra coisa!</p>
<p>Na maioria das vezes, esse tipo de experiência é apenas irritante, mas, em alguns casos, pode causar danos reais.</p>
<figure class="w-figure">
  <video autoplay controls loop muted class="w-screenshot" poster="https://storage.googleapis.com/web-dev-assets/layout-instability-api/layout-instability-poster.png" width="658" height="510">
    <source src="https://storage.googleapis.com/web-dev-assets/layout-instability-api/layout-instability2.webm" type="video/webm; codecs=vp8">
    <source src="https://storage.googleapis.com/web-dev-assets/layout-instability-api/layout-instability2.mp4" type="video/mp4; codecs=h264">
  </source></source></video>
  <figcaption class="w-figcaption w-figcaption--fullbleed">Um screencast ilustrando como a instabilidade do layout pode afetar negativamente os usuários.</figcaption></figure>
<p>O movimento inesperado do conteúdo da página geralmente ocorre porque os recursos são carregados de forma assíncrona ou os elementos do DOM são adicionados dinamicamente à página acima do conteúdo existente. O culpado pode ser uma imagem ou vídeo com dimensões desconhecidas, uma fonte que fica maior ou menor que sua substituta ou um anúncio ou widget de terceiros que se redimensiona dinamicamente.</p>
<p>O que torna esse problema ainda mais problemático é que o modo como um site funciona no desenvolvimento é geralmente muito diferente de como os usuários o experimentam. O conteúdo personalizado ou de terceiros geralmente não se comporta da mesma forma no desenvolvimento e na produção, as imagens de teste geralmente já estão no cache do navegador do desenvolvedor e as chamadas de API executadas localmente costumam ser tão rápidas que o atraso não é perceptível.</p>
<p>A métrica Cumulative Layout Shift (CLS) ajuda a resolver esse problema medindo a frequência com que ele ocorre para usuários reais.</p>
<h2 id="o-que-e-cls">O que é CLS? <a class="w-headline-link" href="#o-que-e-cls">#</a></h2>
<p>CLS é uma medida da maior explosão de ocorrências de <em>mudança de layout</em> para cada mudança de layout <a href="/cls/#expected-vs.-unexpected-layout-shifts">inesperada</a> que ocorre durante toda a existência de uma página.</p>
<p>Uma <em>mudança de layout</em> ocorre sempre que um elemento visível muda sua posição de um quadro renderizado para o próximo. (Veja abaixo os detalhes sobre como as <a href="#layout-shift-score">pontuações de mudança de layout</a> individuais são calculadas.)</p>
<p>Uma explosão de mudanças de layout, conhecida como <a href="evolving-cls/#why-a-session-window"><em>janela de sessão</em></a> (session window), ocorre quando uma ou mais mudanças de layout individuais acontecem em rápida sucessão com menos de 1 segundo entre cada mudança e um máximo de 5 segundos para a duração total da janela.</p>
<p>A maior explosão é a janela da sessão com a pontuação cumulativa máxima de todas as mudanças de layout dentro dessa janela.</p>
<figure class="w-figure">
  <video controls autoplay loop muted class="w-screenshot" width="658" height="452">
    <source src="https://storage.googleapis.com/web-dev-assets/better-layout-shift-metric/session-window.webm" type="video/webm">
    <source src="https://storage.googleapis.com/web-dev-assets/better-layout-shift-metric/session-window.mp4" type="video/mp4">
  </source></source></video>
  <figcaption class="w-figcaption">Exemplo de janelas de sessão. As barras azuis representam as pontuações de cada mudança de layout individual.</figcaption></figure>
<div class="w-aside w-aside--caution">
<p><strong>Cuidado</strong>:  Anteriormente, a CLS media a soma total de <em>todas as pontuações de mudança de layout individuais</em> que ocorriam durante a existência da página. Para ver quais ferramentas ainda fornecem a capacidade de fazer benchmarks em relação à implementação original, dê uma olhada em <a href="/cls-web-tooling">Evolução da Cumulative Layout Shift em ferramentas da web</a>. </div></p>
<h3 id="o-que-e-uma-boa-pontuacao-cls">O que é uma boa pontuação CLS? <a class="w-headline-link" href="#o-que-e-uma-boa-pontuacao-cls">#</a></h3>
<p>Para fornecer uma boa experiência ao usuário, os sites devem se esforçar para ter uma pontuação CLS de <strong>0,1</strong> ou menos. Para garantir que você esteja atingindo essa meta para a maioria de seus usuários, um bom limite para medir é o <strong>75º percentil</strong> de carregamentos de página, segmentado através de dispositivos móveis e desktop.</p>
<picture>
  <source srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/9mWVASbWDLzdBUpVcjE1.svg" media="(min-width: 640px)" width="400", height="100">
  <img     alt="Bons valores de CLS estão abaixo de 0,1, valores baixos são maiores que 0,25 e qualquer coisa entre precisa de melhorias"     class="w-screenshot w-screenshot--filled width-full"     decoding="async"     height="300"          loading="lazy"          src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/uqclEgIlTHhwIgNTXN3Y.svg"               width="400"   />
</picture>
<div class="w-aside w-aside--note">
<p>Para saber mais sobre a pesquisa e a metodologia por trás dessa recomendação, veja: <a href="/defining-core-web-vitals-thresholds/">Definindo os limites das Core Web Vitals</a> </div></p>
<h2 id="mudancas-de-layout-em-detalhes">Mudanças de layout em detalhes <a class="w-headline-link" href="#mudancas-de-layout-em-detalhes">#</a></h2>
<p>As mudanças de layout são definidas pela <a href="https://github.com/WICG/layout-instability" rel="noopener">API de instabilidade de layout</a>, que relata entradas <code>layout-shift</code> sempre que um elemento visível na viewport muda sua posição inicial (por exemplo, sua posição superior e esquerda no <a href="https://developer.mozilla.org/docs/Web/CSS/writing-mode" rel="noopener">modo de escrita</a> default) entre dois quadros. Esses elementos são considerados <em>elementos instáveis</em>.</p>
<p>Observe que as mudanças de layout ocorrem apenas quando os elementos existentes mudam sua posição inicial. Se um novo elemento for adicionado ao DOM ou um elemento existente mudar de tamanho, isto não conta como uma mudança de layout - desde que a mudança não faça com que outros elementos visíveis mudem sua posição inicial.</p>
<h3 id="pontuacao-de-mudanca-de-layout">Pontuação de mudança de layout <a class="w-headline-link" href="#pontuacao-de-mudanca-de-layout">#</a></h3>
<p>Para calcular a <em>pontuação de mudança de layout</em> , o navegador observa o tamanho do viewport e o movimento dos <em>elementos instáveis</em> no viewport entre dois quadros renderizados. A pontuação de mudança de layout é um produto de duas medidas desse movimento: a <em>fração de impacto</em> e a <em>fração de distância</em> (ambas definidas abaixo).</p>
<web-copy-code><pre class="language-text"><code class="language-text">layout shift score = impact fraction * distance fraction</code></pre>
</web-copy-code><h3 id="fracao-de-impacto">Fração de impacto <a class="w-headline-link" href="#fracao-de-impacto">#</a></h3>
<p>A <a href="https://github.com/WICG/layout-instability#Impact-Fraction" rel="noopener">fração de impacto</a> mede como os <em>elementos instáveis</em> afetam a área da janela de visualização (viewport) entre dois quadros.</p>
<p>A união das áreas visíveis de todos os <em>elementos instáveis</em> do quadro anterior <em>e</em> do quadro atual - como uma fração da área total da janela de visualização - é a <em>fração de impacto</em> do quadro atual.</p>
<p><a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format"><img      alt="Exemplo de fração de impacto com um *elemento instável*"            decoding="async"      height="600"            loading="lazy"      sizes="(min-width: 800px) 800px, calc(100vw - 48px)"      src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format"      srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=200 200w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=228 228w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=260 260w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=296 296w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=338 338w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=385 385w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=439 439w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=500 500w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=571 571w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=650 650w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=741 741w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=845 845w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=964 964w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=1098 1098w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=1252 1252w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=1428 1428w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/BbpE9rFQbF8aU6iXN1U6.png?auto=format&w=1600 1600w"            width="800"    /></a></p>
<p>Na imagem acima, há um elemento que ocupa metade da janela de visualização em um quadro. Depois, no quadro seguinte, o elemento é deslocado para baixo em 25% da altura da janela de visualização. O retângulo pontilhado vermelho indica a união da área visível do elemento em ambos os quadros, que, neste caso, é 75% da janela de visualização total, portanto, sua <em>fração de impacto</em> é de <code>0.75</code>.</p>
<h3 id="fracao-de-distancia">Fração de distância <a class="w-headline-link" href="#fracao-de-distancia">#</a></h3>
<p>A outra parte da equação de pontuação de mudança de layout mede a distância que os elementos instáveis se moveram em relação à janela de visualização. A <em>fração de distância</em> é a maior distância que qualquer <em>elemento instável</em> moveu no quadro (horizontal ou verticalmente) dividida pela maior dimensão da janela de visualização (largura ou altura, o que for maior).</p>
<p><a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format"><img      alt="Exemplo de fração de distância com um *elemento instável*"            decoding="async"      height="600"            loading="lazy"      sizes="(min-width: 800px) 800px, calc(100vw - 48px)"      src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format"      srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=200 200w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=228 228w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=260 260w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=296 296w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=338 338w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=385 385w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=439 439w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=500 500w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=571 571w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=650 650w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=741 741w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=845 845w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=964 964w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=1098 1098w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=1252 1252w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=1428 1428w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ASnfpVs2n9winu6mmzdk.png?auto=format&w=1600 1600w"            width="800"    /></a></p>
<p>No exemplo acima, a maior dimensão da janela de visualização é a altura, e o elemento instável foi movido em 25% da altura da janela de visualização, o que faz com que a <em>fração de distância</em> seja de 0,25.</p>
<p>Portanto, neste exemplo, a <em>fração de impacto</em> é <code>0.75</code> e a <em>fração de distância</em> é <code>0.25</code>, portanto, a <em>pontuação de mudança de layout</em> é <code>0.75 * 0.25 = 0.1875</code>.</p>
<div class="w-aside w-aside--note">
<p>Inicialmente, a pontuação de mudança de layout era calculada com base apenas na <em>fração de impacto</em>. A <em>fração de distância</em> foi introduzida para evitar penalizar excessivamente os casos em que grandes elementos se deslocam por uma pequena distância. </div></p>
<p>O próximo exemplo mostra como a adição de conteúdo a um elemento existente afeta a pontuação de mudança de layout:</p>
<p><a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format"><img      alt="Exemplo de mudança de layout com *elementos* estáveis e instáveis e recorte da janela de visualização"            decoding="async"      height="600"            loading="lazy"      sizes="(min-width: 800px) 800px, calc(100vw - 48px)"      src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format"      srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=200 200w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=228 228w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=260 260w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=296 296w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=338 338w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=385 385w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=439 439w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=500 500w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=571 571w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=650 650w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=741 741w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=845 845w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=964 964w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=1098 1098w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=1252 1252w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=1428 1428w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/xhN81DazXCs8ZawoCj0T.png?auto=format&w=1600 1600w"            width="800"    /></a></p>
<p>O botão &quot;Click Me!&quot; é anexado à parte inferior da caixa cinza com texto preto, o que empurra a caixa verde com texto branco para baixo (e parcialmente para fora da janela de visualização).</p>
<p>Neste exemplo, a caixa cinza muda de tamanho, mas sua posição inicial não muda, portanto não é um <em>elemento instável</em>.</p>
<p>O botão &quot;Click Me!&quot; não estava anteriormente no DOM, portanto, sua posição inicial também não muda.</p>
<p>A posição inicial da caixa verde, entretanto, muda, mas como ela foi movida parcialmente para fora da janela de visualização, a área invisível não é considerada ao calcular a <em>fração de impacto</em>. A união das áreas visíveis para a caixa verde em ambos os quadros (ilustrada pelo retângulo pontilhado vermelho) é a mesma que a área da caixa verde no primeiro quadro: 50% da janela de visualização. A <em>fração de impacto</em> é <code>0.5</code>.</p>
<p>A <em>fração de distância</em> é ilustrada com a seta roxa. A caixa verde foi movida para baixo em cerca de 14% da janela de visualização, então a <em>fração de distância</em> é <code>0.14</code>.</p>
<p>A pontuação de mudança de layout é <code>0.5 x 0.14 = 0.07</code>.</p>
<p>Este último exemplo ilustra vários <em>elementos instáveis</em> :</p>
<p><a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format"><img      alt="Exemplo de mudança de layout com vários *elementos* estáveis e instáveis"            decoding="async"      height="600"            loading="lazy"      sizes="(min-width: 800px) 800px, calc(100vw - 48px)"      src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format"      srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=200 200w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=228 228w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=260 260w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=296 296w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=338 338w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=385 385w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=439 439w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=500 500w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=571 571w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=650 650w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=741 741w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=845 845w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=964 964w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=1098 1098w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=1252 1252w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=1428 1428w,      https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/FdCETo2dLwGmzw0V5lNT.png?auto=format&w=1600 1600w"            width="800"    /></a></p>
<p>No primeiro quadro acima, há quatro resultados de uma solicitação de API para animais, classificados em ordem alfabética. No segundo quadro, mais resultados são adicionados à lista ordenada.</p>
<p>O primeiro item da lista (&quot;Cat&quot;) não altera sua posição inicial entre os quadros, portanto, é estável. Da mesma forma, os novos itens adicionados à lista não estavam anteriormente no DOM, portanto, suas posições iniciais também não mudam. Mas os itens rotulados como &quot;Dog&quot;, &quot;Horse&quot; e &quot;Zebra&quot; mudam suas posições iniciais, fazendo com que sejam <em>elementos instáveis</em>.</p>
<p>Novamente, os retângulos pontilhados vermelhos representam a união dessas três áreas <em>instáveis</em> antes e depois das áreas, que neste caso é cerca de 38% da área da janela de visualização (<em>fração</em> de <code>0.38</code>).</p>
<p>As setas representam as distâncias que os <em>elementos instáveis</em> se moveram desde suas posições iniciais. O elemento &quot;Zebra&quot;, representado pela seta azul, foi o que mais se moveu, cerca de 30% da altura da janela de visualização. Isto faz com que a <em>fração de distância</em> neste exemplo seja <code>0.3</code>.</p>
<p>A pontuação de mudança de layout é <code>0.38 x 0.3 = 0.1172</code>.</p>
<h3 id="mudancas-de-layout-esperadas-vs.-inesperadas">Mudanças de layout esperadas vs. inesperadas <a class="w-headline-link" href="#mudancas-de-layout-esperadas-vs.-inesperadas">#</a></h3>
<p>Nem todas as mudanças de layout são ruins. Na verdade, muitos aplicativos dinâmicos da Web frequentemente mudam a posição inicial dos elementos na página.</p>
<h4 id="mudancas-de-layout-iniciadas-pelo-usuario">Mudanças de layout iniciadas pelo usuário <a class="w-headline-link" href="#mudancas-de-layout-iniciadas-pelo-usuario">#</a></h4>
<p>Uma mudança de layout só é ruim se o usuário não a espera. Por outro lado, as mudanças de layout que ocorrem em resposta às interações do usuário (clicar num link, pressionar um botão, digitar numa caixa de pesquisa e similares) geralmente são aceitáveis, contanto que a mudança ocorra perto o suficiente da interação que o relacionamento esteja claro para o usuário.</p>
<p>Por exemplo, se uma interação do usuário disparar uma solicitação de rede que pode demorar um pouco para ser concluída, é melhor imediatamente alocar algum espaço e mostrar um indicador de carregamento para evitar uma mudança desagradável de layout quando a solicitação for concluída. Se o usuário não perceber que algo está sendo carregado ou não tiver noção de quando o recurso estará pronto, ele pode tentar clicar em outra coisa enquanto espera, algo que pode sair do lugar na hora do clique.</p>
<p>As mudanças de layout que ocorrem dentro de 500 milissegundos da entrada do usuário terão o <a href="https://wicg.github.io/layout-instability/#dom-layoutshift-hadrecentinput" rel="noopener"><code>hadRecentInput</code></a> definido, para que possam ser excluídas dos cálculos.</p>
<div class="w-aside w-aside--caution">
<p><strong>Cuidado</strong>:  O <code>hadRecentInput</code> só será verdadeiro para eventos de entrada discretos, como toque, clique ou pressionamento de tecla. Interações contínuas como rolar, arrastar ou gestos de pinça e zoom não são consideradas &quot;entrada recente&quot;. Consulte a <a href="https://github.com/WICG/layout-instability#recent-input-exclusion" rel="noopener">Especificação de Instabilidade de Layout</a> para mais detalhes. </div></p>
<h4 id="animacoes-e-transicoes">Animações e transições <a class="w-headline-link" href="#animacoes-e-transicoes">#</a></h4>
<p>Animações e transições, quando bem feitas, são uma ótima maneira de atualizar o conteúdo da página sem surpreender o usuário. O conteúdo que muda abrupta e inesperadamente na página quase sempre cria uma experiência ruim para o usuário. Mas o conteúdo que se move de forma gradual e natural de uma posição para a seguinte pode, muitas vezes, ajudar o usuário a entender melhor o que está acontecendo e guiá-lo entre as mudanças de estado.</p>
<p>A propriedade <a href="https://developer.mozilla.org/docs/Web/CSS/transform" rel="noopener"><code>transform</code></a> do CSS permite animar elementos sem acionar mudanças de layout:</p>
<ul>
<li>Em vez de alterar as propriedades <code>height</code> e <code>width</code>, use <code>transform: scale()</code>.</li>
<li>Para mover os elementos, evite alterar as propriedades <code>top</code> , <code>right</code> , <code>bottom</code> ou <code>left</code> e, em vez disso, use <code>transform: translate()</code>.</li>
</ul>
<h2 id="como-medir-a-cls">Como medir a CLS <a class="w-headline-link" href="#como-medir-a-cls">#</a></h2>
<p>A CLS pode ser medida <a href="/user-centric-performance-metrics/#in-the-lab">em laboratório</a> ou <a href="/user-centric-performance-metrics/#in-the-field">em campo</a> e está disponível nas seguintes ferramentas:</p>
<div class="w-aside w-aside--caution">
<p><strong>Cuidado</strong>:  As ferramentas de laboratório normalmente carregam páginas em um ambiente sintético e, portanto, só podem medir as mudanças de layout que ocorrem durante o carregamento da página. Como resultado, os valores CLS relatados por ferramentas de laboratório para uma determinada página podem ser menores do que os usuários reais experimentam no campo. </div></p>
<h3 id="ferramentas-de-campo">Ferramentas de campo <a class="w-headline-link" href="#ferramentas-de-campo">#</a></h3>
<ul>
<li><a href="https://developers.google.com/web/tools/chrome-user-experience-report" rel="noopener">Relatório de Experiência do Usuário Chrome</a></li>
<li><a href="https://developers.google.com/speed/pagespeed/insights/" rel="noopener">PageSpeed Insights</a></li>
<li><a href="https://support.google.com/webmasters/answer/9205520" rel="noopener">Console de Busca (relatório Core Web Vitals)</a></li>
<li><a href="https://github.com/GoogleChrome/web-vitals" rel="noopener">Biblioteca JavaScript <code>web-vitals</code></a></li>
</ul>
<h3 id="ferramentas-de-laboratorio">Ferramentas de laboratório <a class="w-headline-link" href="#ferramentas-de-laboratorio">#</a></h3>
<ul>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/" rel="noopener">Chrome DevTools</a></li>
<li><a href="https://developers.google.com/web/tools/lighthouse/" rel="noopener">Lighthouse</a></li>
<li><a href="https://webpagetest.org/" rel="noopener">WebPageTest</a></li>
</ul>
<h3 id="medicao-da-cls-em-javascript">Medição da CLS em JavaScript <a class="w-headline-link" href="#medicao-da-cls-em-javascript">#</a></h3>
<p>Para medir a CLS em JavaScript, você pode usar a <a href="https://github.com/WICG/layout-instability" rel="noopener">API Layout Instability</a>. O exemplo a seguir mostra como criar um <a href="https://developer.mozilla.org/docs/Web/API/PerformanceObserver" rel="noopener"><code>PerformanceObserver</code></a> que escuta as entradas <code>layout-shift</code>, as agrupa em sessões registra o valor máximo da sessão sempre que ela mudar.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> clsValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> clsEntries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> sessionValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> sessionEntries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entryList</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entryList<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Only count layout shifts without recent user input.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>entry<span class="token punctuation">.</span>hadRecentInput<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> firstSessionEntry <span class="token operator">=</span> sessionEntries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> lastSessionEntry <span class="token operator">=</span> sessionEntries<span class="token punctuation">[</span>sessionEntries<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>      <span class="token comment">// If the entry occurred less than 1 second after the previous entry and</span><br>      <span class="token comment">// less than 5 seconds after the first entry in the session, include the</span><br>      <span class="token comment">// entry in the current session. Otherwise, start a new session.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionValue <span class="token operator">&amp;&amp;</span><br>          entry<span class="token punctuation">.</span>startTime <span class="token operator">-</span> lastSessionEntry<span class="token punctuation">.</span>startTime <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token operator">&amp;&amp;</span><br>          entry<span class="token punctuation">.</span>startTime <span class="token operator">-</span> firstSessionEntry<span class="token punctuation">.</span>startTime <span class="token operator">&lt;</span> <span class="token number">5000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        sessionValue <span class="token operator">+=</span> entry<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>        sessionEntries<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        sessionValue <span class="token operator">=</span> entry<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>        sessionEntries <span class="token operator">=</span> <span class="token punctuation">[</span>entry<span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">// If the current session value is larger than the current CLS value,</span><br>      <span class="token comment">// update CLS and the entries contributing to it.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionValue <span class="token operator">></span> clsValue<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        clsValue <span class="token operator">=</span> sessionValue<span class="token punctuation">;</span><br>        clsEntries <span class="token operator">=</span> sessionEntries<span class="token punctuation">;</span><br><br>        <span class="token comment">// Log the updated value (and its entries) to the console.</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'CLS:'</span><span class="token punctuation">,</span> clsValue<span class="token punctuation">,</span> clsEntries<span class="token punctuation">)</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'layout-shift'</span><span class="token punctuation">,</span> buffered<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><div class="w-aside w-aside--warning">
<p><strong>Aviso</strong>:</p>
<p>Este código mostra a forma básica de calcular e registrar a CLS. No entanto, medir com precisão a CLS de uma forma que corresponda ao que é medido no <a href="https://developers.google.com/web/tools/chrome-user-experience-report" rel="noopener">Relatório de Experiência do Usuário Chrome</a> (CrUX) é mais complicado. Veja mais detalhes abaixo:</p>
</div>
<p>Na maioria dos casos, o valor CLS no momento em que a página está sendo descarregada é o valor CLS final para essa página, mas existem algumas exceções importantes:</p>
<p>A seção a seguir lista as diferenças entre o que a API informa e como a métrica é calculada.</p>
<h4 id="diferencas-entre-a-metrica-e-a-api">Diferenças entre a métrica e a API <a class="w-headline-link" href="#diferencas-entre-a-metrica-e-a-api">#</a></h4>
<ul>
<li>Se uma página for carregada em segundo plano, ou se estiver em segundo plano antes do navegador renderizar qualquer conteúdo, ela não deve relatar nenhum valor CLS.</li>
<li>Se uma página for restaurada do cache <a href="/bfcache/#impact-on-core-web-vitals">back/forward</a>, seu valor CLS deve ser zerado, pois os usuários percebem isto como uma visita de página distinta.</li>
<li>A API não relata entradas <code>layout-shift</code> para mudanças que ocorrem dentro de iframes, mas para medir corretamente a CLS, você deve considerá-las. Subquadros podem usar a API para relatar suas entradas <code>layout-shift</code> para o quadro pai para <a href="https://github.com/WICG/layout-instability#cumulative-scores" rel="noopener">agregação</a>.</li>
</ul>
<p>Além dessas exceções, a CLS introduz uma complexidade adicional devido ao fato de que mede toda a vida útil de uma página:</p>
<ul>
<li>Os usuários podem manter uma aba aberta por <em>muito</em> tempo: dias, semanas, meses. Na verdade, um usuário pode nunca fechar uma aba.</li>
<li>Em sistemas operacionais móveis, os navegadores normalmente não executam callbacks de descarregamento de página para abas em segundo plano, dificultando o relato do valor &quot;final&quot;.</li>
</ul>
<p>Para lidar com esses casos, a CLS deve ser relatada sempre que uma página entrar em segundo plano, além de quando for descarregada (o <a href="https://developers.google.com/web/updates/2018/07/page-lifecycle-api#event-visibilitychange" rel="noopener">evento <code>visibilitychange</code></a> cobre os dois cenários). E sistemas de análise que recebem esses dados precisarão calcular o valor da CLS final no back-end.</p>
<p>Em vez de memorizar e lidar com todos esses casos você mesmo, os desenvolvedores podem usar a <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener">biblioteca JavaScript <code>web-vitals</code></a> para medir a CLS, que é responsável por tudo o que foi mencionado acima:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>getCLS<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'web-vitals'</span><span class="token punctuation">;</span><br><br><span class="token comment">// Measure and log CLS in all situations</span><br><span class="token comment">// where it needs to be reported.</span><br><span class="token function">getCLS</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Para um exemplo completo de como medir a CLS em JavaScript, consulte <a href="https://github.com/GoogleChrome/web-vitals/blob/master/src/getCLS.ts" rel="noopener">o código-fonte de <code>getCLS()</code></a>.</p>
<div class="w-aside w-aside--note">
<p>Em alguns casos (como iframes de origem cruzada), não é possível medir a CLS em JavaScript. Consulte a seção de <a href="https://github.com/GoogleChrome/web-vitals#limitations" rel="noopener">limitações</a> da biblioteca <code>web-vitals</code> para mais detalhes. </div></p>
<h2 id="como-melhorar-a-cls">Como melhorar a CLS <a class="w-headline-link" href="#como-melhorar-a-cls">#</a></h2>
<p>Para a maioria dos sites, você pode evitar todas as mudanças inesperadas de layout, aderindo a alguns princípios orientadores:</p>
<ul>
<li><strong>Sempre inclua atributos de tamanho em suas imagens e elementos de vídeo ou reserve o espaço necessário usando algo como <a href="https://css-tricks.com/aspect-ratio-boxes/" rel="noopener">caixas de proporção de aspecto do CSS</a>.</strong> Essa abordagem garante que o navegador possa alocar a quantidade correta de espaço no documento enquanto a imagem é carregada. Observe que você também pode usar a <a href="https://github.com/w3c/webappsec-feature-policy/blob/master/policies/unsized-media.md" rel="noopener">política de recursos de mídia não dimensionada</a> para forçar esse comportamento em navegadores que oferecem suporte a políticas de recursos.</li>
<li><strong>Nunca insira conteúdo acima do conteúdo existente, exceto em resposta a uma interação do usuário.</strong> Isso garante que quaisquer mudanças de layout que ocorram sejam esperadas.</li>
<li><strong>Prefira animações de transformação a animações de propriedades que acionam mudanças de layout.</strong> Anime as transições de uma forma que forneça contexto e continuidade de um estado para outro.</li>
</ul>
<p>Para obter informações detalhadas sobre como melhorar a CLS, veja <a href="/optimize-cls/">Otimize a CLS</a> e <a href="/debug-layout-shifts">Depuração de mudanças de layout</a>.</p>
<h2 id="recursos-adicionais">Recursos adicionais <a class="w-headline-link" href="#recursos-adicionais">#</a></h2>
<ul>
<li>Orientação do Google para tags sobre como <a href="https://developers.google.com/doubleclick-gpt/guides/minimize-layout-shift" rel="noopener">minimizar a mudança de layout</a></li>
<li><a href="https://youtu.be/zIJuY-JCjqw" rel="noopener">Understanding Cumulative Layout Shift (Compreendendo a mudança cumulativa de layout)</a> por <a href="https://anniesullie.com/" rel="noopener">Annie Sullivan</a> e <a href="https://kobes.ca/" rel="noopener">Steve Kobes</a> em <a href="https://perfmattersconf.com/" rel="noopener">#PerfMatters</a> (2020)</li>
</ul>
<h2 id="changelog">CHANGELOG <a class="w-headline-link" href="#changelog">#</a></h2>
<p>Occasionally, bugs are discovered in the APIs used to measure metrics, and
sometimes in the definitions of the metrics themselves. As a result, changes
must sometimes be made, and these changes can show up as improvements or
regressions in your internal reports and dashboards.</p>
<p>To help you manage this, all changes to either the implementation or definition
of these metrics will be surfaced in this
<a href="http://bit.ly/chrome-speed-metrics-changelog" rel="noopener">CHANGELOG</a>.</p>


    

    
  <div class="w-chips ">
    
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Desempenho</a>
      
    
      
        
        <a class="w-chip" href="/tags/metrics/">Métricas</a>
      
    
      
        
        <a class="w-chip" href="/tags/web-vitals/">Web Vitals</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jun 1, 2021</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/pt/metrics/cls/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/learn-web-vitals"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Registrar um bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Visualizar código-fonte
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Conteúdo relacionado</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Atualizações do Chrome
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Estudos de caso
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Conectar</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            Todos os produtos
          </a>
        </li>
      </ul>
      <web-language-select current="pt"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Termos e privacidade
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Diretrizes da comunidade
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
