
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=afe811f911436">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>

<meta name="robots" content="noindex" />


<title>Get started with the Notifications API</title>
<meta name="description" content="In this codelab, learn how to request user permission and send notifications. " />

<link rel="canonical" href="https://web.dev/codelab-notifications-get-started/" />

<meta itemprop="name" content="Get started with the Notifications API" />
<meta itemprop="description" content="In this codelab, learn how to request user permission and send notifications. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/codelab-notifications-get-started/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Get started with the Notifications API" />
<meta property="og:description" content="In this codelab, learn how to request user permission and send notifications. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="notifications" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Get started with the Notifications API" />
<meta name="twitter:description" content="In this codelab, learn how to request user permission and send notifications. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=8dc1720fbccd5', 'module');




  loadScript('/js/content.js?v=c07a6bc4a632', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
    
<div class="codelab-landing-page">
  
    
    
    
  
  <web-codelab class="web-codelab" glitch="codelab-notifications-get-started"  >
    <div class="web-codelab__instructions">
      
      <article class="prose legacy-rollout">
        <header class="flow gap-bottom-size-3">

          <h1 id="get-started-with-the-notifications-api">Get started with the Notifications API</h1>
          

          
            <div class="flow-space-size-1 color-mid-text text-size-0">
              <time>Oct 15, 2019</time>
              
            </div>
          

          <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/notifications"
          >Notifications</a
        >
</div>

          
        </header>

        
          <div class="banner bg-state-warn-bg color-core-text">
            <p><strong>ðŸš¨ This post is a draft! ðŸš¨</strong></p>
          </div>
        

        <p>In this codelab, you'll use basic features of the
<a href="https://developer.mozilla.org/docs/Web/API/Notifications_API" rel="noopener">Notifications API</a> to:</p>
<ul>
<li>Request permission to send notifications</li>
<li>Send notifications</li>
<li>Experiment with notification options</li>
</ul>
<h2 id="remix-the-sample-app-and-view-it-in-a-new-tab">Remix the sample app and view it in a new tab <a class="w-headline-link" href="#remix-the-sample-app-and-view-it-in-a-new-tab">#</a></h2>
<p>Notifications are automatically blocked from the embedded Glitch app, so you won't be able to preview the app on this page. Instead, here's what to do:</p>
<ol>
<li>Click <strong>Remix to Edit</strong> to make the project editable.</li>
<li>To preview the site, press <strong>ViewÂ App</strong>. Then press
<strong>Fullscreen</strong>
<img
src="/images/glitch/fullscreen.svg"
alt="fullscreen"
style="padding: 4px 8px; opacity: .5; border: 1px solid #c3c3c3; border-radius: 5px;"
/>.</li>
</ol>
<p>The Glitch should open in a new Chrome tab:</p>
<img     alt="Screenshot showing the remixed live app in a new tab"     class="w-screenshot"     decoding="async"     height="399"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/6GVJ94Bn7ef99w7SRPSF.png?auto=format&w=1600 1600w"          width="800"   />
<p>As you work through this codelab, make changes to the code in the embedded Glitch on this page. Refresh the new tab with your live app to see the changes.</p>
<h2 id="get-familiar-with-the-starting-app-and-its-code">Get familiar with the starting app and its code <a class="w-headline-link" href="#get-familiar-with-the-starting-app-and-its-code">#</a></h2>
<p>Start by checking out the live app in the new Chrome tab:</p>
<ol>
<li>
<p>Press `Control+Shift+J` (or `Command+Option+J` on Mac) to open DevTools.
Click the <strong>Console</strong> tab.</p>
<p>You should see the following message in the Console:</p>
<web-copy-code><pre class="language-text"><code class="language-text">Notification permission is default</code></pre>
</web-copy-code><p>If you don't know what that means, don't worry; all will soon be revealed!</p>
</li>
<li>
<p>Click the buttons in the live app: <strong>Request permission to send notifications</strong> and <strong>Send a notification</strong>.</p>
<p>The console prints &quot;TODO&quot; messages from a couple of function stubs: <code>requestPermission</code> and <code>sendNotification</code>. These are the functions you'll implement in this codelab.</p>
</li>
</ol>
<p>Now let's look at the sample app's code in the embedded Glitch on this page.
Open <code>public/index.js</code> and take a look at some important parts of the existing code:</p>
<ul>
<li>
<p>The <code>showPermission</code> function uses the Notifications API to get
the site's current permission state and log it to the console:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// Print current permission state to console;</span></span><br><span class="highlight-line"><span class="token comment">// update onscreen message.</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">showPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">let</span> permission <span class="token operator">=</span> Notification<span class="token punctuation">.</span>permission<span class="token punctuation">;</span></mark><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Notification permission is '</span> <span class="token operator">+</span> permission<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'permission'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Notification permission is '</span> <span class="token operator">+</span> permission<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>Before requesting permission, the permission state is <code>default</code>.
In the <code>default</code> permission state,
a site must request and be granted permission before it can send notifications.</p>
</li>
<li>
<p>The <code>requestPermission</code> function is a stub:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Use the Notification API to request permission to send notifications.</span><br><span class="token keyword">function</span> <span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TODO: Implement requestPermission()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>You will implement this function in the next step.</p>
</li>
<li>
<p>The <code>sendNotification</code> function is a stub:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Use the Notification constructor to create and send a new Notification.</span><br><span class="token keyword">function</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TODO: Implement sendNotification()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>You will implement this function after you have implemented <code>requestPermission</code>.</p>
</li>
<li>
<p>The <code>window.onload</code> event listener calls the <code>showPermission</code> function
on page load, displaying the current permission state in the console and on the page:</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">showPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</web-copy-code></li>
</ul>
<h2 id="request-permission-to-send-notifications">Request permission to send notifications <a class="w-headline-link" href="#request-permission-to-send-notifications">#</a></h2>
<p>In this step, you'll add functionality to request the user's permission to send notifications.</p>
<p>You will use the <code>Notification.requestPermission()</code> method to trigger a popup that asks the user to allow or block notifications from your site.</p>
<div class="w-aside w-aside--note">
<p><code>Notification.requestPermission()</code> returns a <code>Promise</code>. To perform actions after this promise resolves, you must place them inside a function and pass that function as a parameter to the promise's <code>then()</code> method:</p>
<web-copy-code><pre class="language-js"><code class="language-js">Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">/* do stuff */</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>See the <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener"><code>Promise</code> documentation on MDN</a> for more information on how promises work.</p>
</div>
<ol>
<li>
<p>Replace the <code>requestPermission</code> function stub in public/index.js with the following code:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Use the Notification API to request permission to send notifications.</span><br><span class="token keyword">function</span> <span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">permission</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise resolved: '</span> <span class="token operator">+</span> permission<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token function">showPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise was rejected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code></li>
<li>
<p>Reload the Chrome tab in which you are viewing your live app.</p>
</li>
<li>
<p>On the live app interface, click <strong>Request permission to send notifications</strong>. A popup appears.</p>
</li>
</ol>
<p>The user can make one of three responses to the permission popup.</p>
<div class="w-table-wrapper">
<table>
<thead>
<tr>
<th><strong>User response</strong></th>
<th><strong>Notification permission state</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>User selects <strong>Allow</strong></td>
<td><code>granted</code></td>
</tr>
<tr>
<td>User selects <strong>Block</strong></td>
<td><code>denied</code></td>
</tr>
<tr>
<td>User dismisses popup without making a selection</td>
<td><code>default</code></td>
</tr>
</tbody>
</table>
</div><p><strong>If the user clicks Allow:</strong></p>
<ul>
<li>
<p><code>Notification.permission</code> is set to <code>granted</code>.</p>
</li>
<li>
<p>The site will be able to display notifications.</p>
</li>
<li>
<p>Subsequent calls to <code>Notification.requestPermission</code> will resolve to <code>granted</code> without a popup.</p>
</li>
</ul>
<p><strong>If the user clicks Block:</strong></p>
<ul>
<li>
<p><code>Notification.permission</code> is set to <code>denied</code>.</p>
</li>
<li>
<p>The site will <em>not</em> be able to display notifications to the user.</p>
</li>
<li>
<p>Subsequent calls to <code>Notification.requestPermission</code> will resolve to <code>denied</code> without a popup.</p>
</li>
</ul>
<p><strong>If the user dismisses the popup:</strong></p>
<ul>
<li>
<p><code>Notification.permission</code> remains <code>default</code>.</p>
</li>
<li>
<p>The site will not be able to display notifications to the user.</p>
</li>
<li>
<p>Subsequent calls to <code>Notification.requestPermission</code> will produce more popups.</p>
<p>However, if the user continues to dismiss the popups, the browser might block the site, setting <code>Notification.permission</code> to <code>denied</code>. Neither permission request popups nor notifications can then be displayed to the user.</p>
<p>At the time of writing, browser behavior in response to dismissed notifications permission popups is still subject to change. The best way to handle this is to always request notification permission in response to some interaction the user has initiated so that they are expecting it and know what's going on.</p>
</li>
</ul>
<div class="w-aside w-aside--note">
<p>During development, to make the notification popup appear again, click the lock icon next to the Chrome URL bar. Chrome displays options to let you reset the site's notification permission setting to its default.</p>
</div>
<h2 id="send-a-notification">Send a notification <a class="w-headline-link" href="#send-a-notification">#</a></h2>
<p>In this step, you'll send a notification to the user.</p>
<p>You will use the <code>Notification</code> constructor to create a new notification and attempt to display it.
If the permission state is <code>granted</code>, your notification will be displayed.</p>
<ol>
<li>
<p>Replace the <code>sendNotification</code> function stub in index.js with the following code:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Use the Notification constructor to create and send a new Notification.</span><br><span class="token keyword">function</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token string">'Test'</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>    body<span class="token operator">:</span> <span class="token string">'Test body'</span><span class="token punctuation">,</span><br>    <span class="token comment">// Other options can go here</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Creating new notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> notification <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Notification</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The <code>Notification</code> constructor takes two parameters: <code>title</code> and <code>options</code>. <code>options</code> is an object with properties representing visual settings and data you can include in a notification. See the <a href="https://developer.mozilla.org/docs/Web/API/notification/Notification#Parameters" rel="noopener">MDN documentation on notification parameters</a> for more information.</p>
</li>
<li>
<p>Refresh the Chrome tab in which you are viewing your live app
and click the <strong>Send notification</strong> button.
A notification with the text <code>Test body</code> should appear.</p>
</li>
</ol>
<h2 id="what-happens-when-you-send-notifications-without-permission">What happens when you send notifications without permission? <a class="w-headline-link" href="#what-happens-when-you-send-notifications-without-permission">#</a></h2>
<p>In this step, you'll add a couple of lines of code that will let you see what happens
when you attempt to display a notification without the user's permission.</p>
<ul>
<li>In <code>public/index.js</code>, at the end of the <code>sendNotification</code> function,
define the new notification's <code>onerror</code> event handler:</li>
</ul>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// Use the Notification constructor to create and send a new Notification.</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token string">'Test'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    body<span class="token operator">:</span> <span class="token string">'Test body'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token comment">// Other options can go here</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Creating new notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">let</span> notification <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Notification</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add">  notification<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Could not send notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p><strong>To observe a notification permission error:</strong></p>
<ol>
<li>
<p>Click the lock icon next to the Chrome URL bar and reset the site's notification permission setting to its default.</p>
</li>
<li>
<p>Click <strong>Request permission to send notifications</strong>, and this time select <strong>Block</strong> from the popup.</p>
</li>
<li>
<p>Click <strong>Send notification</strong> and see what happens.
The error text (<code>Could not send notification</code>)
and the event object are logged to the console.</p>
</li>
</ol>
<p>Optionally, reset the site's notification permissions again.
You can try requesting permission and dismissing the popup multiple times to see what happens.</p>
<h2 id="experiment-with-notification-options">Experiment with notification options <a class="w-headline-link" href="#experiment-with-notification-options">#</a></h2>
<p>You've now covered the basics of how to request permission and send notifications.
You've also seen what impact user responses have on your app's ability to display notifications.</p>
<p>Now you can experiment with the many visual and data options available when creating a notification.
The full set of available options is below.
(See the <a href="https://developer.mozilla.org/docs/Web/API/Notification" rel="noopener">Notification documentation on MDN</a> for more information on these options.)</p>
<p>Note that browsers and devices implement these options differently,
so it's worth testing your notifications on different platforms to see how they look.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>  dir<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>              <span class="token comment">// Text direction</span><br>  lang<span class="token operator">:</span> <span class="token string">'en-US'</span><span class="token punctuation">,</span>            <span class="token comment">// A language tag</span><br>  badge<span class="token operator">:</span> <span class="token string">'/orange-cat.png'</span><span class="token punctuation">,</span> <span class="token comment">// Display when insufficient room</span><br>  body<span class="token operator">:</span> <span class="token string">'Hello World'</span><span class="token punctuation">,</span>      <span class="token comment">// Body text</span><br>  tag<span class="token operator">:</span> <span class="token string">'mytag'</span><span class="token punctuation">,</span>             <span class="token comment">// Tag for categorization</span><br>  icon<span class="token operator">:</span> <span class="token string">'/line-cat.png'</span><span class="token punctuation">,</span>    <span class="token comment">// To display in the notification</span><br>  image<span class="token operator">:</span> <span class="token string">'/orange-cat.png'</span><span class="token punctuation">,</span> <span class="token comment">// To display in the notification</span><br>  data<span class="token operator">:</span> <span class="token punctuation">{</span>                   <span class="token comment">// Arbitrary data; any data type</span><br>    cheese<span class="token operator">:</span> <span class="token string">'I like cheese'</span><span class="token punctuation">,</span><br>    pizza<span class="token operator">:</span> <span class="token string">'Excellent cheese delivery mechanism'</span><span class="token punctuation">,</span><br>    arbitrary<span class="token operator">:</span> <span class="token punctuation">{</span><br>      faveNumber<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span><br>      myBool<span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  vibrate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Vibration pattern for hardware</span><br>  renotify<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token comment">// Notify if replaced? Default false</span><br>  requireInteraction<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// Active until click? Default false</span><br>  <span class="token comment">/*<br>    actions:   // Array of NotificationActions<br>               // Only usable with a service worker<br>    [{<br>      action: 'shop',<br>      title: 'Shop!',<br>      icon: '/bags.png'<br>    },],<br>  */</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>See <a href="https://tests.peter.sh/notification-generator/" rel="noopener">Peter Beverloo's Notification Generator</a> for some more ideas!</p>
<p>If you got stuck, here's the completed code for this codelab: <a href="https://glitch.com/edit/#!/codelab-notifications-get-started-completed" rel="noopener">glitch.com/edit/#!/codelab-notifications-get-started-completed</a></p>
<p>Take a look at the next codelab in this series, <a href="codelab-notifications-service-worker">Handle notifications with a service worker</a>, to explore further!</p>


        <div class="text-size-0 color-mid-text">
          <span>
            
            Last updated: <time>Oct 15, 2019</time>
            
          </span>
          â€”
          <a
            href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/notifications/codelab-notifications-get-started/index.md"
          >
            Improve article
          </a>
        </div>

        
          
          
        

        
          <div class="flow-space-size-2">
            <a href="/use-push-notifications-to-engage-users" class="button" data-type="secondary">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

              <span>Return to article</span>
            </a>
          </div>
        
      </article>
    </div>
  </web-codelab>
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
