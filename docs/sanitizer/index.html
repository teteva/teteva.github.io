
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=66a2148f06236">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=234c453db8ce8">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Safe DOM manipulation with the Sanitizer API</title>
<meta name="description" content="The new Sanitizer API aims to build a robust processor for arbitrary strings to be safely inserted into a page. This article introduces the API, and explains its usage. " />

<link rel="canonical" href="https://web.dev/sanitizer/" />

<meta itemprop="name" content="Safe DOM manipulation with the Sanitizer API" />
<meta itemprop="description" content="The new Sanitizer API aims to build a robust processor for arbitrary strings to be safely inserted into a page. This article introduces the API, and explains its usage. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/sanitizer/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Safe DOM manipulation with the Sanitizer API" />
<meta property="og:description" content="The new Sanitizer API aims to build a robust processor for arbitrary strings to be safely inserted into a page. This article introduces the API, and explains its usage. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Sanitizing a desk with Sanitizer" />
<meta property="tag" content="security" />
<meta property="tag" content="chrome-93" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Safe DOM manipulation with the Sanitizer API" />
<meta name="twitter:description" content="The new Sanitizer API aims to build a robust processor for arbitrary strings to be safely inserted into a page. This article introduces the API, and explains its usage. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=608c5e4ac45a', 'module');




  loadScript('/js/content.js?v=280bd8d797c4b', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Sanitizing a desk with Sanitizer"     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/R2KGdIHv2lBRDS9vs8q1.jpg?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#escaping-user-input">Escaping user input</a></li><li class="toc__listitem"><a class="toc__anchor" href="#sanitizing-user-input">Sanitizing user input</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#the-difference-between-escaping-and-sanitizing">The difference between escaping and sanitizing</a></li><li class="toc__listitem"><a class="toc__anchor" href="#example">Example</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#sanitizer-api">Sanitizer API</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#customize-via-configuration">Customize via configuration</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#api-surface">API surface</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#comparison-with-dompurify">Comparison with DomPurify</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#api-status-and-browser-support">API status and browser support</a></li><li class="toc__listitem"><a class="toc__anchor" href="#how-to-enable-the-sanitizer-api">How to enable the Sanitizer API</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#enabling-via-about:flags-or-cli-option">Enabling via about://flags or CLI option</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feedback">Feedback</a></li><li class="toc__listitem"><a class="toc__anchor" href="#demo">Demo</a></li><li class="toc__listitem"><a class="toc__anchor" href="#references">References</a></li></ul></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="safe-dom-manipulation-with-the-sanitizer-api">Safe DOM manipulation with the Sanitizer API</h1>
        
          <p class="color-mid-text flow-space-base">
            <p>The new Sanitizer API aims to build a robust processor for arbitrary strings to be safely inserted into a page.</p>

          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Oct 6, 2021</time>
             — Updated <time>Oct 7, 2021</time> 
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/jackjey/"> <img     alt="Jack J"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/PV7xjXdOKHP8LWt9XhstsToJeK82/O5CMzBRhiNQelJ5Rkzv0.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/jackjey/">Jack J</a>
    </cite>
    <div class="author__links cluster">
               
               <a href="https://github.com/JackJey">GitHub</a>
               
               
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#escaping-user-input">Escaping user input</a></li><li class="toc__listitem"><a class="toc__anchor" href="#sanitizing-user-input">Sanitizing user input</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#the-difference-between-escaping-and-sanitizing">The difference between escaping and sanitizing</a></li><li class="toc__listitem"><a class="toc__anchor" href="#example">Example</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#sanitizer-api">Sanitizer API</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#customize-via-configuration">Customize via configuration</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#api-surface">API surface</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#comparison-with-dompurify">Comparison with DomPurify</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#api-status-and-browser-support">API status and browser support</a></li><li class="toc__listitem"><a class="toc__anchor" href="#how-to-enable-the-sanitizer-api">How to enable the Sanitizer API</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#enabling-via-about:flags-or-cli-option">Enabling via about://flags or CLI option</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feedback">Feedback</a></li><li class="toc__listitem"><a class="toc__anchor" href="#demo">Demo</a></li><li class="toc__listitem"><a class="toc__anchor" href="#references">References</a></li></ul></li></ul></div>
    </details>
  </div>



      <p>Applications deal with untrusted strings all the time, but safely rendering that content as part of an HTML document can be tricky. Without sufficient care, it's easy to accidentally create opportunities for <a href="https://www.google.com/about/appsecurity/learning/xss/" rel="noopener">cross-site scripting</a> (XSS) that malicious attackers may exploit.</p>
<p>To mitigate that risk, the new <a href="https://wicg.github.io/sanitizer-api/" rel="noopener">Sanitizer API</a> proposal aims to build a robust processor for arbitrary strings to be safely inserted into a page. This article introduces the API, and explains its usage.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// Expanded Safely !!</span><br>$div<span class="token punctuation">.</span><span class="token function">setHTML</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</web-copy-code><h2 id="escaping-user-input">Escaping user input <a class="w-headline-link" href="#escaping-user-input">#</a></h2>
<p>When inserting user input, query strings, cookie contents, and so on, into the DOM, the strings must be escaped properly. Particular attention should be paid to DOM manipulation via <a href="https://developer.mozilla.org/docs/Web/API/Element/innerHTML" rel="noopener"><code>.innerHTML</code></a>, where unescaped strings are a typical source of XSS.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user_input <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><br>$div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> user_input</code></pre>
</web-copy-code><p>If you escape HTML special characters in the input string above or expand it using <a href="https://developer.mozilla.org/docs/Web/API/Node/textContent" rel="noopener"><code>.textContent</code></a>, <code>alert(0)</code> will not be executed. However, since <code>&lt;em&gt;</code> added by the user is also expanded as a string as it is, this method cannot be used in order to keep the text decoration in HTML.</p>
<p>The best thing to do here is not <em>escaping</em>, but <em>sanitizing</em>.</p>
<h2 id="sanitizing-user-input">Sanitizing user input <a class="w-headline-link" href="#sanitizing-user-input">#</a></h2>
<h3 id="the-difference-between-escaping-and-sanitizing">The difference between escaping and sanitizing <a class="w-headline-link" href="#the-difference-between-escaping-and-sanitizing">#</a></h3>
<p>Escaping refers to replacing special HTML characters with <a href="https://developer.mozilla.org/docs/Glossary/Entity" rel="noopener">HTML Entities</a>.</p>
<p>Sanitizing refers to removing semantically harmful parts (such as script execution) from HTML strings.</p>
<h3 id="example">Example <a class="w-headline-link" href="#example">#</a></h3>
<p>In the previous example, <code>&lt;img onerror&gt;</code> causes the error handler to be executed, but if the <code>onerror</code> handler was removed, it would be possible to safely expand it in the DOM while leaving <code>&lt;em&gt;</code> intact.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token comment">// XSS 🧨</span><br>$div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><br><span class="token comment">// Sanitized ⛑</span><br>$div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src=""></span><span class="token template-punctuation string">`</span></span></code></pre>
</web-copy-code><p>To sanitize correctly, it is necessary to parse the input string as HTML, omit tags and attributes that are considered harmful, and keep the harmless ones.</p>
<p>The <a href="https://wicg.github.io/sanitizer-api/" rel="noopener">proposed Sanitizer API specification</a> aims to provide such processing as a standard API for browsers.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>Internet Explorer had implemented <code>window.toStaticHTML()</code> for this purpose, but it was never standardized.</p>
</div></aside>
<h2 id="sanitizer-api">Sanitizer API <a class="w-headline-link" href="#sanitizer-api">#</a></h2>
<p>The <a href="https://wicg.github.io/sanitizer-api/" rel="noopener">Sanitizer API</a> is used in the following way:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> $div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><br><span class="token keyword">const</span> user_input <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><br><span class="token keyword">const</span> sanitizer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>$div<span class="token punctuation">.</span><span class="token function">setHTML</span><span class="token punctuation">(</span>user_input<span class="token punctuation">,</span> sanitizer<span class="token punctuation">)</span> <span class="token comment">// &lt;div>&lt;em>hello world&lt;/em>&lt;img src="">&lt;/div></span><br></code></pre>
</web-copy-code><p>It is worth noting that <code>setHTML()</code> is defined on <a href="https://developer.mozilla.org/docs/Web/API/Element" rel="noopener"><code>Element</code></a>. Being a method of <code>Element</code>, the context to parse is self-explanatory (<code>&lt;div&gt;</code> in this case), the parsing is done once internally, and the result is directly expanded into the DOM.</p>
<p>If you don't want to expand directly into the DOM, you can also get the result as an <code>HTMLElement</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user_input <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><br><span class="token keyword">const</span> sanitizer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>sanitizer<span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> user_input<span class="token punctuation">)</span> <span class="token comment">// HTMLDivElement &lt;div></span></code></pre>
</web-copy-code><p>If you want to get the result of sanitization as a string, you can use <code>.innerHTML</code> from the <code>HTMLElement</code> you got here. (You still need to specify the appropriate context to parse.)</p>
<web-copy-code><pre class="language-js"><code class="language-js">sanitizer<span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> user_input<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token comment">// &lt;em>hello world&lt;/em>&lt;img src=""></span></code></pre>
</web-copy-code><p>If you already have a user-controlled <code>DocumentFragment</code> and you want to remove only the harmful stuff from it, use <code>sanitize()</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js">$div<span class="token punctuation">.</span><span class="token function">replaceChildren</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">sanitize</span><span class="token punctuation">(</span>$userDiv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="customize-via-configuration">Customize via configuration <a class="w-headline-link" href="#customize-via-configuration">#</a></h3>
<p>The Sanitizer API is configured by default to remove strings that would trigger script execution. However, you can also add your own customizations to the sanitization process via a configuration object.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><br>  allowElements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  blockElements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  dropElements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  allowAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  dropAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  allowCustomElements<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  allowComments<span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token comment">// sanitized result is customized by configuration</span><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span></code></pre>
</web-copy-code><p>The following options specify how the sanitization result should treat the specified element.</p>
<p><code>allowElements</code>: Names of elements that the sanitizer should retain.</p>
<p><code>blockElements</code>: Names of elements the sanitizer should remove, while retaining their children.</p>
<p><code>dropElements</code>: Names of elements the sanitizer should remove, along with their children.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello &lt;b>&lt;i>world&lt;/i>&lt;/b></span><span class="token template-punctuation string">`</span></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>hello &lt;b>&lt;i>world&lt;/i>&lt;/b>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowElements<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"b"</span> <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>hello &lt;b>world&lt;/b>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>blockElements<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"b"</span> <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>hello &lt;i>world&lt;/i>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowElements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>hello world&lt;/div></span></code></pre>
</web-copy-code><p>You can also control whether the sanitizer will allow or deny specified attributes with the following options:</p>
<ul>
<li><code>allowAttributes</code></li>
<li><code>dropAttributes</code></li>
</ul>
<p><code>allowAttributes</code> and <code>dropAttributes</code> properties expect <strong>attribute match lists</strong>—objects whose keys are attribute names, and values are lists of target elements or the <code>*</code> wildcard.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span id=foo class=bar style="color: red">hello&lt;/span></span><span class="token template-punctuation string">`</span></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>&lt;span id="foo" class="bar" style="color: red">hello&lt;/span>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"style"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"span"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>&lt;span style="color: red">hello&lt;/span>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"style"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"p"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>&lt;span>hello&lt;/span>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"style"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>&lt;span style="color: red">hello&lt;/span>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>dropAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"span"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>&lt;span class="bar" style="color: red">hello&lt;/span>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>allowAttributes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><br><span class="token comment">// &lt;div>hello&lt;/div></span></code></pre>
</web-copy-code><p><code>allowCustomElements</code> is the option to allow or deny custom elements. If they're allowed, other configurations for elements and attributes still apply.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;custom-elem>hello&lt;/custom-elem></span><span class="token template-punctuation string">`</span></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// &lt;div>&lt;/div></span><br><br><span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> allowCustomElements<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                allowElements<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token string">"custom-elem"</span><span class="token punctuation">]</span><br>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// &lt;div>&lt;custom-elem>hello&lt;/custom-elem>&lt;/div></span></code></pre>
</web-copy-code><aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>The Sanitizer API is designed to be safe by default. This means that no matter how you set it up, it will never allow constructs that are known XXS targets. For example, <code>allowElements: [&quot;script&quot;]</code> won't actually allow <code>&lt;script&gt;</code>, because the built-in baseline configuration cannot be overridden. The purpose of customization is to override default settings if your application has special needs.</p>
</div></aside>
<h2 id="api-surface">API surface <a class="w-headline-link" href="#api-surface">#</a></h2>
<h3 id="comparison-with-dompurify">Comparison with DomPurify <a class="w-headline-link" href="#comparison-with-dompurify">#</a></h3>
<p><a href="https://github.com/cure53/DOMPurify" rel="noopener">DOMPurify</a> is a well-known library that offers sanitization functionality. The main difference between the Sanitizer API and DOMPurify is that DOMPurify returns the result of the sanitization as a string, which you need to write into a DOM element via <code>.innerHTML</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user_input <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;em>hello world&lt;/em>&lt;img src="" onerror=alert(0)></span><span class="token template-punctuation string">`</span></span><br><span class="token keyword">const</span> sanitized <span class="token operator">=</span> DOMPurify<span class="token punctuation">.</span><span class="token function">sanitize</span><span class="token punctuation">(</span>user_input<span class="token punctuation">)</span><br>$div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> sanitized<br><span class="token comment">// `&lt;em>hello world&lt;/em>&lt;img src="">`</span></code></pre>
</web-copy-code><p>DOMPurify can serve as a fallback when the Sanitizer API is not implemented in the browser.</p>
<p>The DOMPurify implementation has a couple of downsides. If a string is returned, then the input string is parsed twice, by DOMPurify and <code>.innerHTML</code>. This double parsing wastes processing time, but can also lead to interesting vulnerabilities caused by cases where the result of the second parsing is different from the first.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text">
<p class="cluster color-state-bad-text">
<span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z" />
</svg></span>
<strong>Caution</strong></p>
<div class=" flow">
<p>Learn more about the Securitum research on the DOMPurify vulnerability: <a href="https://research.securitum.com/mutation-xss-via-mathml-mutation-dompurify-2-0-17-bypass/" rel="noopener">Mutation XSS via namespace confusion</a>.</p>
</div></aside>
<p>HTML also needs <strong>context</strong> to be parsed. For example, <code>&lt;td&gt;</code> makes sense in <code>&lt;table&gt;</code>, but not in <code>&lt;div&gt;</code>. Since <code>DOMPurify.sanitize()</code> only takes a string as an argument, the parsing context had to be guessed.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>Learn more about how the Sanitizer API parses strings and determines context in the <a href="https://github.com/WICG/sanitizer-api/blob/main/explainer-strings.md" rel="noopener">Sanitizer API explainer</a>.</p>
</div></aside>
<p>The <a href="https://wicg.github.io/sanitizer-api/" rel="noopener">Sanitizer API</a> improves upon the DOMPurify approach and is designed to eliminate the need for double parsing and to clarify the parsing context.</p>
<h2 id="api-status-and-browser-support">API status and browser support <a class="w-headline-link" href="#api-status-and-browser-support">#</a></h2>
<p>The Sanitizer API is under discussion in the standardization process and Chrome is in the process of implementing it.</p>
<div>
  <table>
    <thead>
      <tr>
        <th>Step</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1. Create explainer</td>
        <td><a href="https://github.com/WICG/sanitizer-api/blob/main/README.md">Complete</a></td>
      </tr>
      <tr>
        <td>2. Create specification draft</td>
        <td><a href="https://wicg.github.io/sanitizer-api/">Complete</a></td>
      </tr>
      <tr>
        <td>3. Gather feedback and iterate on design</td>
        <td><a href="https://docs.google.com/document/d/1kBpk-dhCukPphfH_8vkOgdUDcM9bqVuhsK0pRZzwapM/edit?resourcekey=0-4tFsd4s6aLbvvr2ys_9F4A#Feedback">In progress</a></td>
      </tr>
      <tr>
        <td>4. Chrome origin trial</td>
        <td><a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/OrWQnXVQJ0A/m/TbF-0Dw3BQAJ">Ready for trial</a></td>
      </tr>
      <tr>
        <td>5. Launch</td>
        <td>Not started</td>
      </tr>
    </tbody>
  </table>
</div>
<p>Mozilla: Considers this proposal <a href="https://mozilla.github.io/standards-positions/#sanitizer-api" rel="noopener">worth prototyping</a>, and is <a href="https://groups.google.com/g/mozilla.dev.platform/c/C4EHeQlaMbU" rel="noopener">actively implementing it</a>.</p>
<p>WebKit: See the response on the <a href="https://lists.webkit.org/pipermail/webkit-dev/2021-March/031731.html" rel="noopener">WebKit mailing list</a>.</p>
<h2 id="how-to-enable-the-sanitizer-api">How to enable the Sanitizer API <a class="w-headline-link" href="#how-to-enable-the-sanitizer-api">#</a></h2>
<h3 id="enabling-via-about:flags-or-cli-option">Enabling via <code>about://flags</code> or CLI option <a class="w-headline-link" href="#enabling-via-about:flags-or-cli-option">#</a></h3>
<h4 id="chrome">Chrome <a class="w-headline-link" href="#chrome">#</a></h4>
<p>Chrome is in the process of implementing the Sanitizer API. In Chrome 93 or later, you can try out the behavior by enabling <code>about://flags/#enable-experimental-web-platform-features</code> flag. In earlier versions of Chrome Canary and Dev channel, you can enable it via <code>--enable-blink-features=SanitizerAPI</code> and try it out right now. Check out the <a href="https://www.chromium.org/developers/how-tos/run-chromium-with-flags" rel="noopener">instructions for how to run Chrome with flags</a>.</p>
<h4 id="firefox">Firefox <a class="w-headline-link" href="#firefox">#</a></h4>
<p>Firefox also implements the Sanitizer API as an experimental feature. To enable it, set the <code>dom.security.sanitizer.enabled</code> flag to <code>true</code> in <code>about:config</code>.</p>
<h3 id="feature-detection">Feature detection <a class="w-headline-link" href="#feature-detection">#</a></h3>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>Sanitizer<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Sanitizer API is enabled</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="feedback">Feedback <a class="w-headline-link" href="#feedback">#</a></h3>
<p>If you try this API and have some feedback, we'd love to hear it. Share your thoughts on <a href="https://github.com/WICG/sanitizer-api/issues" rel="noopener">Sanitizer API GitHub issues</a> and discuss with the spec authors and folks interested in this API.</p>
<p>If you find any bugs or unexpected behavior in Chrome's implementation, <a href="https://new.crbug.com/" rel="noopener">file a bug to report it</a>. Select the <code>Blink&gt;SecurityFeature&gt;SanitizerAPI</code> components and share details to help implementers track the problem.</p>
<h3 id="demo">Demo <a class="w-headline-link" href="#demo">#</a></h3>
<p>To see the Sanitizer API in action check out the <a href="https://sanitizer-api.dev/" rel="noopener">Sanitizer API Playground</a> by <a href="https://twitter.com/mikewest" rel="noopener">Mike West</a>:</p>
<h3 id="references">References <a class="w-headline-link" href="#references">#</a></h3>
<ul>
<li><a href="https://wicg.github.io/sanitizer-api/" rel="noopener">HTML Sanitizer API specification</a></li>
<li><a href="https://github.com/WICG/sanitizer-api" rel="noopener">WICG/sanitizer-api repo</a></li>
<li><a href="https://github.com/WICG/sanitizer-api/blob/main/faq.md" rel="noopener">Sanitizer API FAQ</a></li>
<li><a href="https://developer.mozilla.org/docs/Web/API/HTML_Sanitizer_API" rel="noopener">HTML Sanitizer API reference documentation on MDN</a></li>
</ul>
<hr>
<p>Photo by <a href="https://unsplash.com/@towfiqu999999" rel="noopener">Towfiqu barbhuiya</a> on <a href="https://unsplash.com/photos/-9gPKrsbGmc" rel="noopener">Unsplash</a>.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/security/">Security</a>
          
        
          
            
            <a class="pill" href="/tags/chrome-93/">Chrome 93</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Oct 7, 2021</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/sanitizer/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="Jack J"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
