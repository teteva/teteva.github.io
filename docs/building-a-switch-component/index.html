
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=2afeee0e24cf7">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=f11ff16f08851">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Building a switch component</title>
<meta name="description" content="A foundational overview of how to build a responsive and accessible switch component." />

<link rel="canonical" href="https://web.dev/building-a-switch-component/" />

<meta itemprop="name" content="Building a switch component" />
<meta itemprop="description" content="A foundational overview of how to build a responsive and accessible switch component." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/9enjDnqrgdzS6lUOWAGO.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/building-a-switch-component/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Building a switch component" />
<meta property="og:description" content="A foundational overview of how to build a responsive and accessible switch component." />
<meta property="og:image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/9enjDnqrgdzS6lUOWAGO.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="css" />
<meta property="tag" content="dom" />
<meta property="tag" content="javascript" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Building a switch component" />
<meta name="twitter:description" content="A foundational overview of how to build a responsive and accessible switch component." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/9enjDnqrgdzS6lUOWAGO.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=ba9ac2c2f760d', 'module');




  loadScript('/js/content.js?v=0e576c8ba4f59', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt=""     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/gNjyaiykXSBUPVhSOinL.png?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#overview">Overview</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#custom-properties">Custom properties</a></li><li class="toc__listitem"><a class="toc__anchor" href="#markup">Markup</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#layouts">Layouts</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#.gui-switch">.gui-switch</a></li><li class="toc__listitem"><a class="toc__anchor" href="#track-2">Track</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-2">Thumb</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#styles">Styles</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#touch-interaction-styles">Touch interaction styles</a></li><li class="toc__listitem"><a class="toc__anchor" href="#track-3">Track</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-3">Thumb</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-position">Thumb position</a></li><li class="toc__listitem"><a class="toc__anchor" href="#vertical">Vertical</a></li><li class="toc__listitem"><a class="toc__anchor" href="#(rtl)-right-to-left">(RTL) right-to-left</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#states">States</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#checked">Checked</a></li><li class="toc__listitem"><a class="toc__anchor" href="#disabled">Disabled</a></li><li class="toc__listitem"><a class="toc__anchor" href="#indeterminate">Indeterminate</a></li><li class="toc__listitem"><a class="toc__anchor" href="#hover">Hover</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#javascript">JavaScript</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#draggable-thumbs">Draggable thumbs</a></li><li class="toc__listitem"><a class="toc__anchor" href="#touch-action">touch-action</a></li><li class="toc__listitem"><a class="toc__anchor" href="#pixel-value-style-utilities">Pixel value style utilities</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dragging">dragging</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dragend">dragEnd</a></li><li class="toc__listitem"><a class="toc__anchor" href="#determinechecked()">determineChecked()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#extra-thoughts">Extra thoughts</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#community-remixes">Community remixes</a></li><li class="toc__listitem"><a class="toc__anchor" href="#resources">Resources</a></li></ul></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="building-a-switch-component">Building a switch component</h1>
        
          <p class="color-mid-text flow-space-base">
            A foundational overview of how to build a responsive and accessible switch component.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Aug 11, 2021</time>
            
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/adamargyle/"> <img     alt="Adam Argyle"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/jdQIxAJrGuFOtwmuDfIn.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/adamargyle/">Adam Argyle</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/argyleink">Twitter</a>
               <a href="https://github.com/argyleink">GitHub</a>
               <a href="https://glitch.com/@argyleink">Glitch</a>
               <a href="https://nerdy.dev">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#overview">Overview</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#custom-properties">Custom properties</a></li><li class="toc__listitem"><a class="toc__anchor" href="#markup">Markup</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#layouts">Layouts</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#.gui-switch">.gui-switch</a></li><li class="toc__listitem"><a class="toc__anchor" href="#track-2">Track</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-2">Thumb</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#styles">Styles</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#touch-interaction-styles">Touch interaction styles</a></li><li class="toc__listitem"><a class="toc__anchor" href="#track-3">Track</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-3">Thumb</a></li><li class="toc__listitem"><a class="toc__anchor" href="#thumb-position">Thumb position</a></li><li class="toc__listitem"><a class="toc__anchor" href="#vertical">Vertical</a></li><li class="toc__listitem"><a class="toc__anchor" href="#(rtl)-right-to-left">(RTL) right-to-left</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#states">States</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#checked">Checked</a></li><li class="toc__listitem"><a class="toc__anchor" href="#disabled">Disabled</a></li><li class="toc__listitem"><a class="toc__anchor" href="#indeterminate">Indeterminate</a></li><li class="toc__listitem"><a class="toc__anchor" href="#hover">Hover</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#javascript">JavaScript</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#draggable-thumbs">Draggable thumbs</a></li><li class="toc__listitem"><a class="toc__anchor" href="#touch-action">touch-action</a></li><li class="toc__listitem"><a class="toc__anchor" href="#pixel-value-style-utilities">Pixel value style utilities</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dragging">dragging</a></li><li class="toc__listitem"><a class="toc__anchor" href="#dragend">dragEnd</a></li><li class="toc__listitem"><a class="toc__anchor" href="#determinechecked()">determineChecked()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#extra-thoughts">Extra thoughts</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#conclusion">Conclusion</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#community-remixes">Community remixes</a></li><li class="toc__listitem"><a class="toc__anchor" href="#resources">Resources</a></li></ul></li></ul></div>
    </details>
  </div>



      <p>In this post I want to share thinking on a way to build switch components.
<a href="https://gui-challenges.web.app/switch/dist/" rel="noopener">Try the demo</a>.</p>
<figure class="w-figure w-figure--fullbleed">
  <video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/nzABBfSBoy73cyYD60WR.mp4" type="video/mp4" />    </video>
  <figcaption class="w-figure">
    <a href="https://gui-challenges.web.app/switch/dist/">Demo</a>
  </figcaption>
</figure>
<p>If you prefer video, here's a YouTube version of this post:</p>
<div class="youtube">  <lite-youtube    videoid="_KqccADghcA"      >  </lite-youtube></div>
<h2 id="overview">Overview <a class="w-headline-link" href="#overview">#</a></h2>
<p>A <a href="https://w3c.github.io/aria/#switch" rel="noopener">switch</a> functions similar to a checkbox
but explicitly represents boolean on and off states.</p>
<p>This demo uses <code>&lt;input type=&quot;checkbox&quot; role=&quot;switch&quot;&gt;</code> for the majority of its
functionality, which has the advantage of not needing CSS or JavaScript to be
fully functional and accessible. Loading CSS brings support for right-to-left
languages, verticality, animation and more. Loading JavaScript makes the switch
draggable and tangible.</p>
<h3 id="custom-properties">Custom properties <a class="w-headline-link" href="#custom-properties">#</a></h3>
<p>The following variables represent the various parts of the switch and their
options. As the top-level class, <code>.gui-switch</code> contains custom properties used
throughout the component children, and entry points for centralized
customization.</p>
<h4 id="track">Track <a class="w-headline-link" href="#track">#</a></h4>
<p>The length (<code>--track-size</code>), padding, and two colors:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch</span> <span class="token punctuation">{</span><br>  <span class="token property">--track-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> * 2<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--track-padding</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br><br>  <span class="token property">--track-inactive</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>80 0% 80%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--track-active</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>80 60% 45%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token property">--track-color-inactive</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-inactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--track-color-active</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-active<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token property">--track-inactive</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>80 0% 35%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">--track-active</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>80 60% 60%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h4 id="thumb">Thumb <a class="w-headline-link" href="#thumb">#</a></h4>
<p>The size, background color, and interaction highlight colors:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch</span> <span class="token punctuation">{</span><br>  <span class="token property">--thumb-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>  <span class="token property">--thumb</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 100%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--thumb-highlight</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 0% / 25%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token property">--thumb-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--thumb-color-highlight</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-highlight<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token property">--thumb</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 5%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">--thumb-highlight</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 100% / 25%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h4 id="reduced-motion">Reduced motion <a class="w-headline-link" href="#reduced-motion">#</a></h4>
<p>To add a clear alias and reduce repetition, a reduced motion preference user
media query can be put into a custom property with the <a href="https://github.com/postcss/postcss-custom-media" rel="noopener">PostCSS
plugin</a> based on this <a href="https://drafts.csswg.org/mediaqueries-5/#at-ruledef-custom-media" rel="noopener">draft
spec in Media Queries
5</a>:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@custom-media</span> --motionOK <span class="token punctuation">(</span><span class="token property">prefers-reduced-motion</span><span class="token punctuation">:</span> no-preference<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><h3 id="markup">Markup <a class="w-headline-link" href="#markup">#</a></h3>
<p>I chose to wrap my <code>&lt;input type=&quot;checkbox&quot; role=&quot;switch&quot;&gt;</code> element with a
<code>&lt;label&gt;</code>, bundling their relationship to avoid checkbox and label association
ambiguity, while giving the user the ability to interact with the label to
toggle the input.</p>
<img     alt="A natural, unstyled label and checkbox."     class="w-screenshot"     decoding="async"     height="80"          loading="lazy"     sizes="(min-width: 216px) 216px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hRnaoi1lcNmpzizuUUzm.png?auto=format&w=432 432w"          width="216"   />
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gui-switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Label text<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p><code>&lt;input type=&quot;checkbox&quot;&gt;</code> comes prebuilt with an
<a href="https://developer.mozilla.org/docs/Web/HTML/Element/input/checkbox" rel="noopener">API</a>
and <a href="https://developer.mozilla.org/docs/Web/CSS/:checked" rel="noopener">state</a>. The
browser manages the
<a href="https://developer.mozilla.org/docs/Web/HTML/Element/input/checkbox#checked" rel="noopener"><code>checked</code></a>
property and <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement#input_events" rel="noopener">input
events</a>
such as <code>oninput</code>and <code>onchanged</code>.</p>
<h2 id="layouts">Layouts <a class="w-headline-link" href="#layouts">#</a></h2>
<p><a href="/learn/css/flexbox/">Flexbox</a>,
<a href="/learn/css/grid/">grid</a>, and <a href="https://developer.mozilla.org/docs/Web/CSS/--*" rel="noopener">custom
properties</a> are critical
in maintaining the styles of this component. They centralize values, give names
to otherwise ambiguous calculations or areas, and enable a small custom property
API for easy component customizations.</p>
<h3 id=".gui-switch"><code>.gui-switch</code> <a class="w-headline-link" href="#.gui-switch">#</a></h3>
<p>The top-level layout for the switch is flexbox. The class <code>.gui-switch</code> contains
the private and public custom properties the children use to compute their
layouts.</p>
<img     alt="Flexbox DevTools overlaying a horizontal label and switch, showing their layout distribution of space."     class="w-screenshot"     decoding="async"     height="218"          loading="lazy"     sizes="(min-width: 746px) 746px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/aIpui6HjdmtoELmVX59U.png?auto=format&w=1492 1492w"          width="746"   />
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> 2ch<span class="token punctuation">;</span><br>  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Extending and modifying the flexbox layout is like changing any flexbox layout.
For example, to put labels above or below a switch, or to change the
<code>flex-direction</code>:</p>
<img     alt="Flexbox DevTools overlaying a vertical label and switch."     class="w-screenshot"     decoding="async"     height="254"          loading="lazy"     sizes="(min-width: 486px) 486px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Q9ouS16fND5xcqY14YVh.png?auto=format&w=972 972w"          width="486"   />
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light-switch<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gui-switch<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">flex-direction</span><span class="token punctuation">:</span> column</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><br>  Default<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light-switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><h3 id="track-2">Track <a class="w-headline-link" href="#track-2">#</a></h3>
<p>The checkbox input is styled as a switch track by removing its normal
<code>appearance: checkbox</code> and supplying its own size instead:</p>
<img     alt="Grid DevTools overlaying the switch track, showing the named grid track areas with the name &#x27;track&#x27;."     class="w-screenshot"     decoding="async"     height="182"          loading="lazy"     sizes="(min-width: 272px) 272px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/Ai9vbILT66rxmVsKgmoJ.png?auto=format&w=544 544w"          width="272"   />
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input</span> <span class="token punctuation">{</span><br>  <span class="token property">appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><br>  <span class="token property">inline-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">block-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-padding<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token property">flex-shrink</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>  <span class="token property">grid</span><span class="token punctuation">:</span> [track] 1fr / [track] 1fr<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The track also creates a one by one single cell grid track area for a thumb to
claim.</p>
<h3 id="thumb-2">Thumb <a class="w-headline-link" href="#thumb-2">#</a></h3>
<p>The style <code>appearance: none</code> also removes the visual checkmark supplied by the
browser. This component uses a
<a href="/learn/css/pseudo-elements/">pseudo-element</a> and the <code>:checked</code>
<a href="/learn/css/pseudo-classes/">pseudo-class</a> on the input to
replace this visual indicator.</p>
<p>The thumb is a pseudo-element child attached to the <code>input[type=&quot;checkbox&quot;]</code> and
stacks on top of the track instead of below it by claiming the grid area
<code>track</code>:</p>
<img     alt="DevTools showing the pseudo-element thumb as positioned inside a CSS grid."     class="w-screenshot"     decoding="async"     height="196"          loading="lazy"     sizes="(min-width: 554px) 554px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/THV6KoJTUIBfSFntzcG1.png?auto=format&w=1108 1108w"          width="554"   />
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token property">grid-area</span><span class="token punctuation">:</span> track<span class="token punctuation">;</span><br>  <span class="token property">inline-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">block-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><aside class="aside flow bg-state-warn-bg color-core-text">
<p class="cluster ">
<span class="aside__icon box-block color-state-warn-text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Warning sign" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M23 21L12 2 1 21h22zm-12-3v-2h2v2h-2zm0-4h2v-4h-2v4z" />
</svg></span>
<strong>Warning</strong></p>
<div class=" flow">
<p>Not all inputs can have pseudo-elements,
<a href="https://webplatform.news/issues/2020-08-26" rel="noopener">learn more here</a>.</p>
</div></aside>
<h2 id="styles">Styles <a class="w-headline-link" href="#styles">#</a></h2>
<p>Custom properties enable a versatile switch component that adapts to color
schemes, right-to-left languages and motion preferences.</p>
<img     alt="A side by side comparison of the light and dark theme for the switch and its states."          decoding="async"     height="425"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/kct3QcQiOyY618trAkYl.png?auto=format&w=1600 1600w"          width="800"   />
<h3 id="touch-interaction-styles">Touch interaction styles <a class="w-headline-link" href="#touch-interaction-styles">#</a></h3>
<p>On mobile, browsers add tap highlights and text selection features to labels and
inputs. These negatively affected the style and visual interaction feedback that
this switch needed. With a few lines of CSS I can remove those effects and add
my own <code>cursor: pointer</code> style:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch</span> <span class="token punctuation">{</span><br>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br>  <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/bc6ocZIoezgR9tGXaLuC.mp4" type="video/mp4" />    </video></p>
<p>It's not always advisable to remove those styles, as they can be valuable visual
interaction feedback. Be sure to provide custom alternatives if you remove them.</p>
<h3 id="track-3">Track <a class="w-headline-link" href="#track-3">#</a></h3>
<p>This element's styles are mostly about its shape and color, which it accesses
from the parent <code>.gui-switch</code> via the
<a href="/learn/css/the-cascade/">cascade</a>.</p>
<img     alt="The switch variants with custom track sizes and colors."          decoding="async"     height="630"          loading="lazy"     sizes="(min-width: 768px) 768px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/DlRcU2fRFUNykS8mtIgZ.png?auto=format&w=1536 1536w"          width="768"   />
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input</span> <span class="token punctuation">{</span><br>  <span class="token property">appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">outline-offset</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>  <span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span><br><br>  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-padding<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-color-inactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">inline-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">block-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>A wide variety of customization options for the switch track come from four
custom properties. <code>border: none</code> is added since <code>appearance: none</code> doesn't
remove the borders from the checkbox on all browsers.</p>
<h3 id="thumb-3">Thumb <a class="w-headline-link" href="#thumb-3">#</a></h3>
<p>The thumb element is already on the right <code>track</code> but needs circle styles:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input::before</span> <span class="token punctuation">{</span><br>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><img     alt="DevTools shown highlighting the circle thumb pseudo-element."     class="w-screenshot"     decoding="async"     height="208"          loading="lazy"     sizes="(min-width: 504px) 504px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2XLIMU0IzH9oHLfUso65.png?auto=format&w=1008 1008w"          width="504"   />
<h4 id="interaction">Interaction <a class="w-headline-link" href="#interaction">#</a></h4>
<p>Use custom properties to prepare for interactions which will show hover
highlights and thumb position changes. The <a href="/prefers-reduced-motion/">user's preference is also
checked</a> before transitioning the
motion or hover highlight styles.</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input::before</span> <span class="token punctuation">{</span><br>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">var</span><span class="token punctuation">(</span>--highlight-size<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-color-highlight<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span> <span class="token selector">&amp;</span> <span class="token punctuation">{</span><br>    <span class="token property">transition</span><span class="token punctuation">:</span><br>      transform <span class="token function">var</span><span class="token punctuation">(</span>--thumb-transition-duration<span class="token punctuation">)</span> ease<span class="token punctuation">,</span><br>      box-shadow .25s ease<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="thumb-position">Thumb position <a class="w-headline-link" href="#thumb-position">#</a></h3>
<p>Custom properties provide a single source mechanism for positioning the thumb in
the track. At our disposal are the track and thumb sizes which we'll use in
calculations to keep the thumb properly offset and between within the track:
<code>0%</code> and <code>100%</code>.</p>
<p>The <code>input</code> element owns the position variable <code>--thumb-position</code>, and the thumb
pseudo element uses it as a <code>translateX</code> position:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input</span> <span class="token punctuation">{</span><br>  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> 0%<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.gui-switch > input::before</span> <span class="token punctuation">{</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-position<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>We're now free to change <code>--thumb-position</code> from CSS and the pseudo-classes
provided on checkbox elements. Since we conditionally set <code>transition: transform var(--thumb-transition-duration) ease</code> earlier on this element, these changes
may animate when changed:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token comment">/* positioned at the end of the track: track length - 100% (thumb width) */</span><br><span class="token selector">.gui-switch > input:checked</span> <span class="token punctuation">{</span><br>  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> - 100%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* positioned in the center of the track: half the track - half the thumb */</span><br><span class="token selector">.gui-switch > input:indeterminate</span> <span class="token punctuation">{</span><br>  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span> - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/2ECSW2OFiI4Fj4bSdGRF.mp4" type="video/mp4" />    </video></p>
<p>I thought this decoupled orchestration worked out well. The thumb element is
only concerned with one style, a <code>translateX</code> position. The input can manage all
the complexity and calculations.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>This reminds me of <a href="https://css-tricks.com/build-a-state-management-system-with-vanilla-javascript/" rel="noopener">reactive state
stores</a>,
where the store centralizes all the computing, actions and side effects (parent
track element). Subscribers (thumb pseudo element) can observe dynamic values
without worrying about owning or duplicating logic. One store, lots of
subscribers all with the correct values.</p>
</div></aside>
<h3 id="vertical">Vertical <a class="w-headline-link" href="#vertical">#</a></h3>
<p>Supporting was done with a modifier class <code>-vertical</code> which adds a rotation with
CSS transforms to the <code>input</code> element.</p>
<p>A 3D rotated element does not change the overall height of the component though,
which can throw off block layout. Account for this using the <code>--track-size</code> and
<code>--track-padding</code> variables. Calculate the minimum amount of space required for
a vertical button to flow in layout as expected:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch.-vertical</span> <span class="token punctuation">{</span><br>  <span class="token property">min-block-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> + <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-padding<span class="token punctuation">)</span> * 2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token selector">&amp; > input</span> <span class="token punctuation">{</span><br>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/D9kVn8ESM6SPI3GaDsEm.mp4" type="video/mp4" />    </video></p>
<h3 id="(rtl)-right-to-left">(RTL) right-to-left <a class="w-headline-link" href="#(rtl)-right-to-left">#</a></h3>
<p>A CSS friend, <a href="https://twitter.com/eladsc" rel="noopener">Elad Schecter</a>, and I prototyped
together a <a href="https://codepen.io/argyleink/pen/LYbjZJv" rel="noopener">slide out side menu using CSS transforms that handled right-to-left
languages</a> by flipping a single
variable. We did this because there are no logical property transforms in CSS,
and there may never be. Elad had the great idea of using a custom property value
to invert percentages, to allow single location management of our own custom
logic for logical transforms. I used this same technique in this switch and I
think it worked out great:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch</span> <span class="token punctuation">{</span><br>  <span class="token property">--isLTR</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br><br>  <span class="token selector">&amp;:dir(rtl)</span> <span class="token punctuation">{</span><br>    <span class="token property">--isLTR</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>A custom property called <code>--isLTR</code> initially holds a value of <code>1</code>, meaning it's
<code>true</code> since our layout is left-to-right by default. Then, using the CSS
pseudo class <a href="https://developer.mozilla.org/docs/Web/CSS/:dir" rel="noopener"><code>:dir()</code></a>,
the value is set to <code>-1</code> when the component is within a right-to-left layout.</p>
<p>Put <code>--isLTR</code> into action by using it within a <code>calc()</code> inside of a transform:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.gui-switch.-vertical > input</span> <span class="token punctuation">{</span></span><br><del class="highlight-line highlight-line-remove">  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span><span class="token punctuation">;</span></del><br><ins class="highlight-line highlight-line-add">  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span>90deg * <span class="token function">var</span><span class="token punctuation">(</span>--isLTR<span class="token punctuation">)</span> * -1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>Now the rotation of the vertical switch accounts for the opposite side position
required by the right-to-left layout.</p>
<p>The <code>translateX</code> transforms on the thumb pseudo-element also need updated to
account for the opposite side requirement:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.gui-switch > input:checked</span> <span class="token punctuation">{</span></span><br><del class="highlight-line highlight-line-remove">  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> - 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></del><br><ins class="highlight-line highlight-line-add">  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> - 100%<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--isLTR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.gui-switch > input:indeterminate</span> <span class="token punctuation">{</span></span><br><del class="highlight-line highlight-line-remove">  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></del><br><del class="highlight-line highlight-line-remove">    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span> - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span></del><br><del class="highlight-line highlight-line-remove">  <span class="token punctuation">)</span><span class="token punctuation">;</span></del><br><ins class="highlight-line highlight-line-add">  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></ins><br><ins class="highlight-line highlight-line-add">   <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span> - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span><span class="token punctuation">)</span></ins><br><ins class="highlight-line highlight-line-add">    * <span class="token function">var</span><span class="token punctuation">(</span>--isLTR<span class="token punctuation">)</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
</web-copy-code><p>While this approach won't work to solve all needs regarding a concept like logical CSS
transforms, it does offer some
<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener">DRY</a> principles for many
use cases.</p>
<h2 id="states">States <a class="w-headline-link" href="#states">#</a></h2>
<p>Using the built in <code>input[type=&quot;checkbox&quot;]</code> wouldn't be complete without
handling the various states it can be in: <code>:checked</code>, <code>:disabled</code>,
<code>:indeterminate</code> and <code>:hover</code>. <code>:focus</code> was intentionally left alone, with an
adjustment only made to its offset; the focus ring looked great on Firefox and
Safari:</p>
<img     alt="A screenshot of focus ring focused on a switch in Firefox and Safari."          decoding="async"     height="363"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/T1UPB5mimpmIVc3BAOP9.png?auto=format&w=1600 1600w"          width="800"   />
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text">
<p class="cluster ">
<span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" />
</svg></span>
<strong>Gotchas</strong></p>
<div class=" flow">
<p>Chromium will be catching up to the rounded focus ring styles seen
in Firefox and Safari. Follow along
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=81556#c63" rel="noopener">here</a>.</p>
</div></aside>
<h3 id="checked">Checked <a class="w-headline-link" href="#checked">#</a></h3>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-checked<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gui-switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Default<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-checked<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>This state represents the <code>on</code> state. In this state, the input &quot;track&quot;
background is set to the active color and the thumb position is set to &quot;the
end&quot;.</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input:checked</span> <span class="token punctuation">{</span><br>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--track-color-active<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> - 100%<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--isLTR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p><video      autoplay                                          loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/2m9wDtYGtPsboZHxphpJ.mp4" type="video/mp4" />    </video></p>
<h3 id="disabled">Disabled <a class="w-headline-link" href="#disabled">#</a></h3>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-disabled<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gui-switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Default<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-disabled<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>A <code>:disabled</code> button not only visually looks different, but also should make the
element immutable.Interaction immutability is free from the browser, but the
visual states need styles due to the use of <code>appearance: none</code>.</p>
<p><video      autoplay                                          loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/RFjFhIJ8hKL9ktLMfP2X.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input:disabled</span> <span class="token punctuation">{</span><br>  <span class="token property">cursor</span><span class="token punctuation">:</span> not-allowed<span class="token punctuation">;</span><br>  <span class="token property">--thumb-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span><br><br>  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span><br>    <span class="token property">cursor</span><span class="token punctuation">:</span> not-allowed<span class="token punctuation">;</span><br>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 2px <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 100% / 50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span> <span class="token selector">&amp;</span> <span class="token punctuation">{</span><br>      <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 2px <span class="token function">hsl</span><span class="token punctuation">(</span>0 0% 0% / 50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><img     alt="The dark styled switch in disabled, checked, and unchecked states."          decoding="async"     height="250"          loading="lazy"     sizes="(min-width: 740px) 740px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/2Zfw8KIHH7cpmnTDafm6.png?auto=format&w=1480 1480w"          width="740"   />
<p>This state is tricky since it needs dark and light themes with both disabled and
checked states. I stylistically chose minimal styles for these states to ease
the maintenance burden of the combinations of styles.</p>
<h3 id="indeterminate">Indeterminate <a class="w-headline-link" href="#indeterminate">#</a></h3>
<p>An often forgotten state is <code>:indeterminate</code>, where a checkbox is neither
checked or unchecked. This is a fun state, it's inviting and unassuming. A good
reminder that boolean states can have sneaky in between states.</p>
<p>It is tricky to set a checkbox to indeterminate, only JavaScript can set it:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-indeterminate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gui-switch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  Indeterminate<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-indeterminate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'switch-indeterminate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>indeterminate <span class="token operator">=</span> <span class="token boolean">true</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><img     alt="The indeterminate state which has the track thumb in the middle, to indicate undecided."          decoding="async"     height="130"          loading="lazy"     sizes="(min-width: 196px) 196px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format"     srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=196 196w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=223 223w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=255 255w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=290 290w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=331 331w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=377 377w,     https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/BEZ0OZaMPG74RGImkmCh.png?auto=format&w=392 392w"          width="196"   />
<p>Since the state, to me, is unassuming and inviting, it felt appropriate to put
the switch thumb position in the middle:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input:indeterminate</span> <span class="token punctuation">{</span><br>  <span class="token property">--thumb-position</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><br>    <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--track-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span> - <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span><span class="token punctuation">)</span><br>    * <span class="token function">var</span><span class="token punctuation">(</span>--isLTR<span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="hover">Hover <a class="w-headline-link" href="#hover">#</a></h3>
<p>Hover interactions should provide visual support for connected UI and also
provide direction towards interactive UI. This switch highlights the thumb with
a semi-transparent ring when the label or the input are hovered. This hover
animation then provides direction towards the interactive thumb element.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/9LytLmt8m8f1QyxUCwQs.mp4" type="video/mp4" />    </video></p>
<p>The &quot;highlight&quot; effect is done with <code>box-shadow</code>. On hover, of an non-disabled input, increase the size of <code>--highlight-size</code>. If the user is OK with motion, we transition the <code>box-shadow</code> and see it grow, if they're not ok with motion, the highlight appears instantly:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.gui-switch > input::before</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">var</span><span class="token punctuation">(</span>--highlight-size<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-color-highlight<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>--motionOK<span class="token punctuation">)</span></span> <span class="token punctuation">{</span> <span class="token selector">&amp;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">transition</span><span class="token punctuation">:</span></span><br><span class="highlight-line">      transform <span class="token function">var</span><span class="token punctuation">(</span>--thumb-transition-duration<span class="token punctuation">)</span> ease<span class="token punctuation">,</span></span><br><span class="highlight-line">      box-shadow .25s ease<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active"><span class="token selector">.gui-switch > input:not(:disabled):hover::before</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token property">--highlight-size</span><span class="token punctuation">:</span> .5rem<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span></mark></code></pre>
</web-copy-code><h2 id="javascript">JavaScript <a class="w-headline-link" href="#javascript">#</a></h2>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>This script is optional</p>
</div></aside>
<p>To me, a switch interface can feel uncanny in its attempt to emulate a physical
interface, especially this kind with a circle inside a track. iOS got this right
with their switch, you can drag them side to side, and it's very satisfying to
have the option. Conversely, a UI element can feel inactive if a drag gesture is
attempted and nothing happens.</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/03YLvDcirYLYWE3dVx1z.mp4" type="video/mp4" />    </video></p>
<h3 id="draggable-thumbs">Draggable thumbs <a class="w-headline-link" href="#draggable-thumbs">#</a></h3>
<p>The thumb pseudo-element receives its position from the <code>.gui-switch &gt; input</code>
scoped <code>var(--thumb-position)</code>, JavaScript can supply an inline style value on
the input to dynamically update the thumb position making it appear to follow
the pointer gesture. When the pointer is released, remove the inline styles and
determine if the drag was closer to off or on by using the custom property
<code>--thumb-position</code>. This is the backbone of the solution; pointer events
conditionally tracking pointer positions to modify CSS custom properties.</p>
<p><video      autoplay                                          loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/8oAG1issZLIZ6G6hRbAX.mp4" type="video/mp4" />    </video></p>
<p>Since the component was already 100% functional before this script is showing
up, it does take quite a bit of work to maintain the existing behavior, like
clicking a label to toggle the input. Our JavaScript shouldn't add features at
the expense of existing features.</p>
<h3 id="touch-action"><code>touch-action</code> <a class="w-headline-link" href="#touch-action">#</a></h3>
<p>Dragging is a gesture, a custom one, which makes it a great candidate for
<code>touch-action</code> benefits. In the case of this switch, a horizontal gesture should
be handled by our script, or a vertical gesture captured for the vertical switch
variant. With <code>touch-action</code> we can tell the browser what gestures to handle on
this element, so a script can handle a gesture without competition.</p>
<p>The following CSS instructs the browser that when a pointer gesture starts from
within this switch track, handle vertical gestures, do nothing with horizontal
ones:</p>
<web-copy-code><pre class="language-css"><code class="language-css"><span class="token selector">.gui-switch > input</span> <span class="token punctuation">{</span><br>  <span class="token property">touch-action</span><span class="token punctuation">:</span> pan-y<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The desired result is a horizontal gesture that doesn't also pan or scroll the
page. A pointer can vertically scroll start from within the input and scroll the
page, but horizontal ones are custom handled.</p>
<h3 id="pixel-value-style-utilities">Pixel value style utilities <a class="w-headline-link" href="#pixel-value-style-utilities">#</a></h3>
<p>On setup and during drag, various computed number values will need to be grabbed
from elements. The following JavaScript functions return computed pixel values
given a CSS property. It's used in the setup script like this
<code>getStyle(checkbox, 'padding-left')</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">getPseudoStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">':before'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token punctuation">{</span><br>  getStyle<span class="token punctuation">,</span><br>  getPseudoStyle<span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Notice how <code>window.getComputedStyle()</code> accepts a second argument, a target pseudo element. Pretty neat that JavaScript can read so many values from elements, even from pseudo elements.</p>
<aside class="aside flow bg-state-warn-bg color-core-text">
<p class="cluster ">
<span class="aside__icon box-block color-state-warn-text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Warning sign" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M23 21L12 2 1 21h22zm-12-3v-2h2v2h-2zm0-4h2v-4h-2v4z" />
</svg></span>
<strong>Warning</strong></p>
<div class=" flow">
<p>These functions use <code>parseInt()</code> which is making an
assumption that you are querying a value that returns a pixel value. This means
that you cannot use these functions with <code>getStyle(element, &quot;display&quot;)</code>, for
example.</p>
</div></aside>
<h3 id="dragging"><code>dragging</code> <a class="w-headline-link" href="#dragging">#</a></h3>
<p>This is a core moment for the drag logic and there are a few things with noting
from the function event handler:</p>
<p><video      autoplay            class="w-screenshot"                              loop      muted                            >      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/ytciNZidPZg12i8OZStU.mp4" type="video/mp4" />    </video></p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">dragging</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">)</span> <span class="token keyword">return</span><br><br>  <span class="token keyword">let</span> <span class="token punctuation">{</span>thumbsize<span class="token punctuation">,</span> bounds<span class="token punctuation">,</span> padding<span class="token punctuation">}</span> <span class="token operator">=</span> switches<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>parentElement<span class="token punctuation">)</span><br>  <span class="token keyword">let</span> directionality <span class="token operator">=</span> <span class="token function">getStyle</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">,</span> <span class="token string">'--isLTR'</span><span class="token punctuation">)</span><br><br>  <span class="token keyword">let</span> track <span class="token operator">=</span> <span class="token punctuation">(</span>directionality <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><br>    <span class="token operator">?</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>clientWidth <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> thumbsize <span class="token operator">+</span> padding<br>    <span class="token operator">:</span> <span class="token number">0</span><br><br>  <span class="token keyword">let</span> pos <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>offsetX <span class="token operator">-</span> thumbsize <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> bounds<span class="token punctuation">.</span>lower<span class="token punctuation">)</span> pos <span class="token operator">=</span> <span class="token number">0</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">></span> bounds<span class="token punctuation">.</span>upper<span class="token punctuation">)</span> pos <span class="token operator">=</span> bounds<span class="token punctuation">.</span>upper<br><br>  state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--thumb-position'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>track <span class="token operator">+</span> pos<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The script hero is <code>state.activethumb</code>, the little circle this script is
positioning along with a pointer. The <code>switches</code> object is a <code>Map()</code> where the
keys are <code>.gui-switch</code>'s and the values are cached bounds and sizes that keep
the script efficient. Right-to-left is handled using the same custom property
that CSS is <code>--isLTR</code>, and is able to use it to invert logic and continue
supporting RTL. The <code>event.offsetX</code> is valuable as well, as it contains a delta
value useful for positioning the thumb.</p>
<web-copy-code><pre class="language-js"><code class="language-js">state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--thumb-position'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>track <span class="token operator">+</span> pos<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></code></pre>
</web-copy-code><p>This final line of CSS sets the custom property used by the thumb element. This
value assignment would otherwise transition over time, but a previous pointer
event has temporarily set <code>--thumb-transition-duration</code> to <code>0s</code>, removing what
would have been a sluggish interaction.</p>
<h3 id="dragend"><code>dragEnd</code> <a class="w-headline-link" href="#dragend">#</a></h3>
<p>In order for the user to be allowed to drag far outside the switch and let go, a
global window event needed registered:</p>
<web-copy-code><pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pointerup'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">)</span> <span class="token keyword">return</span><br><br>  <span class="token function">dragEnd</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</web-copy-code><p>I think it's very important that a user has freedom to drag loosely and have the
interface be smart enough to account for it. It didn't take much to handle it
with this switch, but it did need careful consideration during the development
process.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">dragEnd</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">)</span> <span class="token keyword">return</span><br><br>  state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token function">determineChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>indeterminate<span class="token punctuation">)</span><br>    state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>indeterminate <span class="token operator">=</span> <span class="token boolean">false</span><br><br>  state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">removeProperty</span><span class="token punctuation">(</span><span class="token string">'--thumb-transition-duration'</span><span class="token punctuation">)</span><br>  state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">removeProperty</span><span class="token punctuation">(</span><span class="token string">'--thumb-position'</span><span class="token punctuation">)</span><br>  state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'pointermove'</span><span class="token punctuation">,</span> dragging<span class="token punctuation">)</span><br>  state<span class="token punctuation">.</span>activethumb <span class="token operator">=</span> <span class="token keyword">null</span><br><br>  <span class="token function">padRelease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Interaction with the element has completed, time to set the input checked
property and remove all the gesture events. The checkbox is changed with
<code>state.activethumb.checked = determineChecked()</code>.</p>
<h3 id="determinechecked()"><code>determineChecked()</code> <a class="w-headline-link" href="#determinechecked()">#</a></h3>
<p>This function, called by <code>dragEnd</code>, determines where the thumb current lies
within the bounds of its track and returns true if it is equal to or over
halfway along the track:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">determineChecked</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> <span class="token punctuation">{</span>bounds<span class="token punctuation">}</span> <span class="token operator">=</span> switches<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>parentElement<span class="token punctuation">)</span><br><br>  <span class="token keyword">let</span> curpos <span class="token operator">=</span><br>    Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><br>      <span class="token function">parseInt</span><span class="token punctuation">(</span><br>        state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'--thumb-position'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>curpos<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    curpos <span class="token operator">=</span> state<span class="token punctuation">.</span>activethumb<span class="token punctuation">.</span>checked<br>      <span class="token operator">?</span> bounds<span class="token punctuation">.</span>lower<br>      <span class="token operator">:</span> bounds<span class="token punctuation">.</span>upper<br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> curpos <span class="token operator">>=</span> bounds<span class="token punctuation">.</span>middle<br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="extra-thoughts">Extra thoughts <a class="w-headline-link" href="#extra-thoughts">#</a></h3>
<p>The drag gesture incurred a bit of code debt due to the initial HTML structure
chosen, mostly notably wrapping the input in a label. The label, being a parent
element, would receive click interactions after the input. At the end of the
<code>dragEnd</code> event, you may have noticed <code>padRelease()</code> as an odd sounding
function.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">padRelease</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  state<span class="token punctuation">.</span>recentlyDragged <span class="token operator">=</span> <span class="token boolean">true</span><br><br>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    state<span class="token punctuation">.</span>recentlyDragged <span class="token operator">=</span> <span class="token boolean">false</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>This is to account for the label getting this later click, as it would uncheck,
or check, the interaction a user performed.</p>
<p>If I was to do this again, I <em>might</em> consider adjusting DOM with JavaScript
during the UX upgrade, as to create an element that handles label clicks itself
and doesn't fight with built-in behavior.</p>
<p>This kind of JavaScript is my least favorite to write, I don't want to manage
conditional event bubbling:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">preventBubbles</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>recentlyDragged<span class="token punctuation">)</span><br>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>This teeny switch component ended up being the most work of all GUI Challenges
so far! Now that you know how I did it, how would you </p>
<p>Let's diversify our approaches and learn all the ways to build on the web.
Create a demo, <a href="https://twitter.com/argyleink" rel="noopener">tweet me</a> links, and I'll add it
to the community remixes section below!</p>
<h3 id="community-remixes">Community remixes <a class="w-headline-link" href="#community-remixes">#</a></h3>
<ul>
<li><a href="https://twitter.com/KonstantinRouda" rel="noopener">@KonstantinRouda</a> with a custom element: <a href="https://konrud.github.io/switch-web-component/Index.html" rel="noopener">demo</a> and <a href="https://github.com/Konrud/switch-web-component" rel="noopener">code</a>.</li>
<li><a href="https://twitter.com/jhvanderschee" rel="noopener">@jhvanderschee</a> with a button: <a href="https://codepen.io/joosts/pen/MWvXxKm" rel="noopener">Codepen</a>.</li>
</ul>
<h3 id="resources">Resources <a class="w-headline-link" href="#resources">#</a></h3>
<p>Find the <code>.gui-switch</code> <a href="https://github.com/argyleink/gui-challenges" rel="noopener">source code on
GitHub</a>.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/css/">CSS</a>
          
        
          
            
            <a class="pill" href="/tags/dom/">DOM</a>
          
        
          
            
            <a class="pill" href="/tags/javascript/">JavaScript</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Aug 11, 2021</time>
          
        </span>
        
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/building-a-switch-component/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@argyleink"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
