
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=7c897dc1f8a9c">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=77ab9de76f038">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Building a device for WebUSB</title>
<meta name="description" content="" />

<link rel="canonical" href="https://web.dev/build-for-webusb/" />

<meta itemprop="name" content="Building a device for WebUSB" />
<meta itemprop="description" content="" />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/build-for-webusb/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Building a device for WebUSB" />
<meta property="og:description" content="" />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="capabilities" />
<meta property="tag" content="devices" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Building a device for WebUSB" />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=d3b4a9b12c983', 'module');




  loadScript('/js/content.js?v=4627e5c471075', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  






<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#background">Background</a></li><li class="toc__listitem"><a class="toc__anchor" href="#api-basics">API basics</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webusb-descriptors">WebUSB descriptors</a></li><li class="toc__listitem"><a class="toc__anchor" href="#platform-specific-considerations">Platform-specific considerations</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#macos">macOS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#linux">Linux</a></li><li class="toc__listitem"><a class="toc__anchor" href="#android">Android</a></li><li class="toc__listitem"><a class="toc__anchor" href="#chrome-os">Chrome OS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#windows">Windows</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#examples">Examples</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="building-a-device-for-webusb">Building a device for WebUSB</h1>
        
          <p class="color-mid-text flow-space-base">
            <p>Build a device to take full advantage of the WebUSB API.</p>

          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Dec 20, 2018</time>
             — Updated <time>Dec 3, 2020</time> 
          </div>
        

        
        

        <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/devices"
          >Devices</a
        >
</div>

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/reillyg/"> <img     alt="Reilly Grant"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/C7kO2T8Q8jSZxU9xj3AC.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/reillyg/">Reilly Grant</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/reillyeon">Twitter</a>
               <a href="https://github.com/reillyeon">GitHub</a>
               
               
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#background">Background</a></li><li class="toc__listitem"><a class="toc__anchor" href="#api-basics">API basics</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webusb-descriptors">WebUSB descriptors</a></li><li class="toc__listitem"><a class="toc__anchor" href="#platform-specific-considerations">Platform-specific considerations</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#macos">macOS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#linux">Linux</a></li><li class="toc__listitem"><a class="toc__anchor" href="#android">Android</a></li><li class="toc__listitem"><a class="toc__anchor" href="#chrome-os">Chrome OS</a></li><li class="toc__listitem"><a class="toc__anchor" href="#windows">Windows</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#examples">Examples</a></li></ul></div>
    </details>
  </div>



      <p>This article explains how to build a device to take full advantage of the
<a href="https://wicg.github.io/webusb" rel="noopener">WebUSB API</a>. For a brief introduction to the API itself, see <a href="/usb">Access USB Devices
on the Web</a>.</p>
<h2 id="background">Background <a class="w-headline-link" href="#background">#</a></h2>
<p>The Universal Serial Bus (USB) has become the most common physical interface for
connecting peripherals to desktop and mobile computing devices. In addition to
defining the electrical characteristics of the bus and a general model for
communicating with a device, USB specifications include a set of device class
specifications. These are general models for particular classes of devices such
as storage, audio, video, networking, etc. that device manufacturers can
implement. The advantage of these device class specifications is that an
operating system vendor can implement a single driver based on the class
specification (a &quot;class driver&quot;) and any device implementing that class will be
supported. This was a great improvement over every manufacturer needing to write
their own device drivers.</p>
<p>Some devices however don't fit into one of these standardized device classes. A
manufacturer may instead choose to label their device as implementing the
vendor-specific class. In this case the operating system chooses which device
driver to load based on information provided in the vendor's driver package,
typically a set of vendor and product IDs which are known to implement a
particular vendor-specific protocol.</p>
<p>Another feature of the USB is that devices may provide multiple interfaces to
the host they are connected to. Each interface can implement either a
standardized class or be vendor-specific. When an operating system chooses the
right drivers to handle the device each interface can be claimed by a different
driver. For example, a USB webcam typically provides two interfaces, one
implementing the USB video class (for the camera) and one implementing the USB
audio class (for the microphone). The operating system does not load a single
&quot;webcam driver&quot; but instead loads independent video and audio class drivers
which take responsibility for the separate functions of the device. This
composition of interface classes provides for greater flexibility.</p>
<h2 id="api-basics">API basics <a class="w-headline-link" href="#api-basics">#</a></h2>
<p>Many of the standard USB classes have corresponding web APIs. For example, a
page can capture video from a video class device using <a href="https://html5rocks.com/en/tutorials/getusermedia/intro/" rel="noopener"><code>getUserMedia()</code></a>
or receive input events from a human interface (HID) class device by listening
for <a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent" rel="noopener">KeyboardEvents</a> or <a href="https://developer.mozilla.org/docs/Web/API/Pointer_events" rel="noopener">PointerEvents</a>, or by using the <a href="/gamepad">Gamepad</a> or the
<a href="/hid">WebHID</a> API.
Just as not all devices implement a standardized class definition, not all
devices implement features that correspond to existing web platform APIs. When
this is the case the WebUSB API can fill that gap by providing a way for sites
to claim a vendor-specific interface and implement support for it from directly
within their page.</p>
<p>The specific requirements for a device to be accessible via WebUSB vary slightly
from platform to platform due to differences in how operating systems manage USB
devices but the basic requirement is that a device should not already have a
driver claiming the interface the page wants to control. This could be either a
generic class driver provided by the OS vendor or a device driver provided by
the vendor. As USB devices can provide multiple interfaces, each of which may
have its own driver, it is possible to build a device for which some interfaces
are claimed by a driver and others are left accessible to the browser.</p>
<p>For example, a high-end USB keyboard may provide an HID class interface that
will be claimed by the operating system's input subsystem and a vendor-specific
interface that remains available to WebUSB for use by a configuration tool. This
tool can be served on the manufacturer's website allowing the user to change
aspects of the device's behavior such as macro keys and lighting effects without
installing any platform-specific software. Such a device's configuration descriptor would
look something like this:</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>Values in this and other tables in this document are presented in hexadecimal or
binary, whichever is more readable. The USB is a little-endian bus and so any
integer value larger than 1 byte should be sent least-significant byte first.</p>
</div></aside>
<div>
  <table>
    <tr>
    <th>Value</th>
    <th>Field</th>
    <th>Description</th>
    </tr>
    <tr>
    <td colspan="3">Configuration descriptor</td>
    </tr>
    <tr>
    <td><code>0x09</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x02</code></td>
    <td>bDescriptorType</td>
    <td>Configuration descriptor</td>
    </tr>
    <tr>
    <td><code>0x0039</code></td>
    <td>wTotalLength</td>
    <td>Total length of this series of descriptors</td>
    </tr>
    <tr>
    <td><code>0x02</code></td>
    <td>bNumInterfaces</td>
    <td>Number of interfaces</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bConfigurationValue</td>
    <td>Configuration 1</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>iConfiguration</td>
    <td>Configuration name (none)</td>
    </tr>
    <tr>
    <td><code>0b1010000</code></td>
    <td>bmAttributes</td>
    <td>Self-powered device with remote wakeup</td>
    </tr>
    <tr>
    <td><code>0x32</code></td>
    <td>bMaxPower</td>
    <td>Max Power is expressed in 2 mA increments</td>
    </tr>
    <tr>
    <td colspan="3">Interface descriptor</td>
    </tr>
    <tr>
    <td><code>0x09</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x04</code></td>
    <td>bDescriptorType</td>
    <td>Interface descriptor</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bInterfaceNumber</td>
    <td>Interface 0</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bAlternateSetting</td>
    <td>Alternate setting 0 (default)</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bNumEndpoints</td>
    <td>1 endpoint</td>
    </tr>
    <tr>
    <td><code>0x03</code></td>
    <td>bInterfaceClass</td>
    <td>HID interface class</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bInterfaceSubClass</td>
    <td>Boot interface subclass</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bInterfaceProtocol</td>
    <td>Keyboard</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>iInterface</td>
    <td>Interface name (none)</td>
    </tr>
    <tr>
    <td colspan="3">HID descriptor</td>
    </tr>
    <tr>
    <td><code>0x09</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x21</code></td>
    <td>bDescriptorType</td>
    <td>HID descriptor</td>
    </tr>
    <tr>
    <td><code>0x0101</code></td>
    <td>bcdHID</td>
    <td>HID version 1.1</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bCountryCode</td>
    <td>Hardware target country</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bNumDescriptors</td>
    <td>Number of HID class descriptors to follow</td>
    </tr>
    <tr>
    <td><code>0x22</code></td>
    <td>bDescriptorType</td>
    <td>Report descriptor type</td>
    </tr>
    <tr>
    <td><code>0x003F</code></td>
    <td>wDescriptorLength</td>
    <td>Total length of the Report descriptor</td>
    </tr>
    <tr>
    <td colspan="3">Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0x07</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bDescriptorType</td>
    <td>Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0b10000001</code></td>
    <td>bEndpointAddress</td>
    <td>Endpoint 1 (IN)</td>
    </tr>
    <tr>
    <td><code>0b00000011</code></td>
    <td>bmAttributes</td>
    <td>Interrupt</td>
    </tr>
    <tr>
    <td><code>0x0008</code></td>
    <td>wMaxPacketSize</td>
    <td>8 byte packets</td>
    </tr>
    <tr>
    <td><code>0x0A</code></td>
    <td>bInterval</td>
    <td>10ms interval</td>
    </tr>
    <tr>
    <td colspan="3">Interface descriptor</td>
    </tr>
    <tr>
    <td><code>0x09</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x04</code></td>
    <td>bDescriptorType</td>
    <td>Interface descriptor</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bInterfaceNumber</td>
    <td>Interface 1</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bAlternateSetting</td>
    <td>Alternate setting 0 (default)</td>
    </tr>
    <tr>
    <td><code>0x02</code></td>
    <td>bNumEndpoints</td>
    <td>2 endpoints</td>
    </tr>
    <tr>
    <td><code>0xFF</code></td>
    <td>bInterfaceClass</td>
    <td>Vendor-specific interface class</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bInterfaceSubClass</td>
    <td></td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bInterfaceProtocol</td>
    <td></td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>iInterface</td>
    <td>Interface name (none)</td>
    </tr>
    <tr>
    <td colspan="3">Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0x07</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bDescriptorType</td>
    <td>Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0b10000010</code></td>
    <td>bEndpointAddress</td>
    <td>Endpoint 1 (IN)</td>
    </tr>
    <tr>
    <td><code>0b00000010</code></td>
    <td>bmAttributes</td>
    <td>Bulk</td>
    </tr>
    <tr>
    <td><code>0x0040</code></td>
    <td>wMaxPacketSize</td>
    <td>64 byte packets</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bInterval</td>
    <td>N/A for bulk endpoints</td>
    </tr>
    <tr>
    <td colspan="3">Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0x07</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bDescriptorType</td>
    <td>Endpoint descriptor</td>
    </tr>
    <tr>
    <td><code>0b00000011</code></td>
    <td>bEndpointAddress</td>
    <td>Endpoint 3 (OUT)</td>
    </tr>
    <tr>
    <td><code>0b00000010</code></td>
    <td>bmAttributes</td>
    <td>Bulk</td>
    </tr>
    <tr>
    <td><code>0x0040</code></td>
    <td>wMaxPacketSize</td>
    <td>64 byte packets</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bInterval</td>
    <td>N/A for bulk endpoints</td>
    </tr>
  </table>
</div>
<p>The configuration descriptor consists of multiple descriptors concatenated
together. Each begins with <code>bLength</code> and <code>bDescriptorType</code> fields so that they
can be identified. The first interface is an HID interface with an associated
HID descriptor and a single endpoint used to deliver input events to the
operating system. The second interface is a vendor-specific interface with two
endpoints that can be used to send commands to the device and receive responses
in return.</p>
<h2 id="webusb-descriptors">WebUSB descriptors <a class="w-headline-link" href="#webusb-descriptors">#</a></h2>
<p>While WebUSB can work with many devices without firmware modifications,
additional functionality is enabled by marking the device with specific
descriptors indicating support for WebUSB. For example, you can specify a
landing page URL that the browser can direct the user to when your device is
plugged in.</p>
<figure>
  <img     alt="Screenshot of the WebUSB notification in Chrome"     class="w-screenshot"     decoding="async"     height="450"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/KBZaQNlDcishHiu3XkPU.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption>WebUSB notification.</figcaption>
</figure>
<p>The Binary device Object Store (BOS) is a concept introduced in USB 3.0 but has
also been backported to USB 2.0 devices as part of version 2.1. Declaring
support for WebUSB starts with including the following Platform Capability
Descriptor in the BOS descriptor:</p>
<div>
  <table>
    <tr>
    <th style="width: 33%">Value</th>
    <th style="width: 33%">Field</th>
    <th style="width: 33%">Description</th>
    </tr>
    <tr>
    <td colspan="3">Binary device Object Store descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0F</code></td>
    <td>bDescriptorType</td>
    <td>Binary device Object Store descriptor</td>
    </tr>
    <tr>
    <td><code>0x001D</code></td>
    <td>wTotalLength</td>
    <td>Total length of this series of descriptors</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bNumDeviceCaps</td>
    <td>Number of device capability descriptors in the BOS</td>
    </tr>
    <tr>
    <td colspan="3">WebUSB platform capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x18</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x10</code></td>
    <td>bDescriptorType</td>
    <td>Device capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bDevCapabilityType</td>
    <td>Platform capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bReserved</td>
    <td></td>
    </tr>
    <tr>
    <td><code>{0x38, 0xB6, 0x08, 0x34, 0xA9, 0x09, 0xA0, 0x47, 0x8B, 0xFD, 0xA0, 0x76, 0x88, 0x15, 0xB6, 0x65}</code></td>
    <td>PlatformCapablityUUID</td>
    <td>WebUSB platform capability descriptor GUID in little-endian format</td>
    </tr>
    <tr>
    <td><code>0x0100</code></td>
    <td>bcdVersion</td>
    <td>WebUSB descriptor version 1.0</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bVendorCode</td>
    <td>bRequest value for WebUSB</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>iLandingPage</td>
    <td>URL for landing page</td>
    </tr>
  </table>
</div>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>The UUID above would be written as <code>{3408b638-09a9-47a0-8bfd-a0768815b665}</code>;
however, when sent as part of a USB descriptor its component fields must be sent
in little-endian order. This transformation is complex so the proper encoding is
given here for reference. See <a href="https://tools.ietf.org/html/rfc4122" rel="noopener">RFC4122</a>.</p>
</div></aside>
<p>The platform capability UUID identifies this as a <a href="https://wicg.github.io/webusb/#webusb-platform-capability-descriptor" rel="noopener">WebUSB Platform Capability
descriptor</a>, which provides basic information about the device. For the browser
to fetch more information about the device it uses the <code>bVendorCode</code> value to
issue additional requests to the device. The only request currently specified is
<code>GET_URL</code> which returns a <a href="https://wicg.github.io/webusb/#url-descriptor" rel="noopener">URL descriptor</a>. These are similar to string
descriptors but are designed to encode URLs in the fewest bytes. A URL
descriptor for <code>&quot;https://google.com&quot;</code> would look like this:</p>
<div>
  <table>
    <tr>
    <th>Value</th>
    <th>Field</th>
    <th>Description</th>
    </tr>
    <tr>
    <td colspan="3">URL descriptor</td>
    </tr>
    <tr>
    <td><code>0x0D</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x03</code></td>
    <td>bDescriptorType</td>
    <td>URL descriptor</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bScheme</td>
    <td>https://</td>
    </tr>
    <tr>
    <td><code>"google.com"</code></td>
    <td>URL</td>
    <td>UTF-8 encoded URL content</td>
    </tr>
  </table>
</div>
<p>When your device is first plugged in the browser reads the BOS descriptor by
issuing this standard <code>GET_DESCRIPTOR</code> control transfer:</p>
<div>
  <table>
    <tr>
    <th>bmRequestType</th>
    <th>bRequest</th>
    <th>wValue</th>
    <th>wIndex</th>
    <th>wLength</th>
    <th>Data (response)</th>
    </tr>
    <tr>
    <td><code>0b10000000</code></td>
    <td><code>0x06</code></td>
    <td><code>0x0F00</code></td>
    <td><code>0x0000</code></td>
    <td>*</td>
    <td>The BOS descriptor</td>
    </tr>
  </table>
</div>
<p>This request is usually made twice, the first time with a large enough <code>wLength</code>
so that the host finds out the value of the <code>wTotalLength</code> field without
committing to a large transfer and then again when the full descriptor length is
known.</p>
<p>If the WebUSB Platform Capability descriptor has the <code>iLandingPage</code> field set to
a non-zero value the browser then performs a WebUSB-specific <code>GET_URL</code> request
by issuing a control transfer with the <code>bRequest</code> set to the <code>bVendorCode</code> value
from the platform capability descriptor and <code>wValue</code> set to the <code>iLandingPage</code>
value. The request code for <code>GET_URL</code> (<code>0x02</code>) goes in <code>wIndex</code>:</p>
<div>
  <table>
    <tr>
    <th>bmRequestType</th>
    <th>bRequest</th>
    <th>wValue</th>
    <th>wIndex</th>
    <th>wLength</th>
    <th>Data (response)</th>
    </tr>
    <tr>
    <td><code>0b11000000</code></td>
    <td><code>0x01</code></td>
    <td><code>0x0001</code></td>
    <td><code>0x0002</code></td>
    <td>*</td>
    <td>The URL descriptor</td>
    </tr>
  </table>
</div>
<p>Again, this request may be issued twice in order to first probe for the length
of the descriptor being read.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>Support for displaying a notification when a USB device is plugged in is not
available yet on Android.</p>
</div></aside>
<h2 id="platform-specific-considerations">Platform-specific considerations <a class="w-headline-link" href="#platform-specific-considerations">#</a></h2>
<p>While the WebUSB API attempts to provide a consistent interface for accessing
USB devices developers should still be aware of requirements imposed on
applications such as a web browsers requirements in order to access devices.</p>
<h3 id="macos">macOS <a class="w-headline-link" href="#macos">#</a></h3>
<p>Nothing special is necessary for macOS. A website using WebUSB can connect to
the device and claim any interfaces that aren't claimed by a kernel driver or
another application.</p>
<h3 id="linux">Linux <a class="w-headline-link" href="#linux">#</a></h3>
<p>Linux is like macOS but by default most distributions do not set up user
accounts with permission to open USB devices. A system daemon called udev is
responsible for assigning the user and group allowed to access a device. A rule
such as this will assign ownership of a device matching the given vendor and
product IDs to the <code>plugdev</code> group which is a common group for users with access
to peripherals:</p>
<web-copy-code><pre class="language-vim"><code class="language-vim">SUBSYSTEM<span class="token operator">==</span><span class="token string">"usb"</span><span class="token punctuation">,</span> ATTR<span class="token punctuation">{</span>idVendor<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"XXXX"</span><span class="token punctuation">,</span> ATTR<span class="token punctuation">{</span>idProduct<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"XXXX"</span><span class="token punctuation">,</span> GROUP<span class="token operator">=</span><span class="token string">"plugdev"</span></code></pre>
</web-copy-code><p>Replace <code>XXXX</code> with the hexadecimal vendor and product IDs for your device,
e.g. <code>ATTR{idVendor}==&quot;18d1&quot;, ATTR{idProduct}==&quot;4e11&quot;</code> would match a Nexus One
phone. These must be written without the usual &quot;0x&quot; prefix and all lowercase
to be recognized correctly. To find the IDs for your device run the command line
tool <code>lsusb</code>.</p>
<p>This rule should be placed in a file in the <code>/etc/udev/rules.d</code> directory and
takes effect as soon as the device is plugged in. There is no need to restart
udev.</p>
<h3 id="android">Android <a class="w-headline-link" href="#android">#</a></h3>
<p>The Android platform is based on Linux but does not require any modification to
system configuration. By default any device that does not have a driver built
into the operating system is available to the browser. Developers should be
aware however that users will encounter an additional step when connecting to
the device. Once a user selects a device in response to a call to
<a href="https://wicg.github.io/webusb/#dom-usb-requestdevice" rel="noopener"><code>requestDevice()</code></a>, Android will display a prompt asking whether to allow
Chrome to access it. This prompt also reappears if a user returns to a website
that already has permission to connect to a device and the website calls
<a href="https://wicg.github.io/webusb/#dom-usbdevice-open" rel="noopener"><code>open()</code></a>.</p>
<p>In addition more devices will be accessible on Android than on desktop Linux
because fewer drivers are included by default. A notable omission, for example,
is the USB CDC-ACM class commonly implemented by USB-to-serial adapters as there
is no API in the Android SDK for communicating with a serial device.</p>
<h3 id="chrome-os">Chrome OS <a class="w-headline-link" href="#chrome-os">#</a></h3>
<p>Chrome OS is based on Linux as well and also does not require any modification
to system configuration. The permission_broker service controls access to USB
devices and will allow the browser to access them as long as there is at least
one unclaimed interface.</p>
<h3 id="windows">Windows <a class="w-headline-link" href="#windows">#</a></h3>
<p>The Windows driver model introduces an additional requirement. Unlike the
platforms above the ability to open a USB device from a user application is not
the default, even if there is no driver loaded. Instead there is a special
driver, WinUSB, that needs to be loaded in order to provide the interface
applications use to access the device. This can be done with either a custom
driver information file (INF) installed on the system or by modifying the device
firmware to provide the Microsoft OS Compatibility Descriptors during
enumeration.</p>
<h4 id="driver-information-file-(inf)">Driver Information File (INF) <a class="w-headline-link" href="#driver-information-file-(inf)">#</a></h4>
<p>A driver information file tells Windows what to do when encountering a device
for the first time. Since the user's system already includes the WinUSB driver
all that's necessary is for the INF file to associate your vendor and product ID
with this new installation rule. The file below is a basic example. Save it to a
file with the <code>.inf</code> extension, change the sections marked with &quot;X&quot;, then right
click on it and choose &quot;Install&quot; from the context menu.</p>
<web-copy-code><pre class="language-ini"><code class="language-ini"><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Version</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">Signature</span>   <span class="token punctuation">=</span> <span class="token value attr-value">"<span class="token inner-value">$Windows NT$</span>"</span><br><span class="token key attr-name">Class</span>       <span class="token punctuation">=</span> <span class="token value attr-value">USBDevice</span><br><span class="token key attr-name">ClassGUID</span>   <span class="token punctuation">=</span> <span class="token value attr-value">{88BAE032-5A81-49f0-BC3D-A4FF138216D6}</span><br><span class="token key attr-name">Provider</span>    <span class="token punctuation">=</span> <span class="token value attr-value">%ManufacturerName%</span><br><span class="token key attr-name">CatalogFile</span> <span class="token punctuation">=</span> <span class="token value attr-value">WinUSBInstallation.cat</span><br><span class="token key attr-name">DriverVer</span>   <span class="token punctuation">=</span> <span class="token value attr-value">09/04/2012,13.54.20.543</span><br><br><span class="token comment">; ========== Manufacturer/Models sections ===========</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Manufacturer</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">%ManufacturerName%</span> <span class="token punctuation">=</span> <span class="token value attr-value">Standard,NTx86,NTia64,NTamd64</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Standard.NTx86</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">%USB\MyCustomDevice.DeviceDesc%</span> <span class="token punctuation">=</span> <span class="token value attr-value">USB_Install,USB\VID_XXXX&amp;PID_XXXX</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Standard.NTia64</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">%USB\MyCustomDevice.DeviceDesc%</span> <span class="token punctuation">=</span> <span class="token value attr-value">USB_Install,USB\VID_XXXX&amp;PID_XXXX</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Standard.NTamd64</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">%USB\MyCustomDevice.DeviceDesc%</span> <span class="token punctuation">=</span> <span class="token value attr-value">USB_Install,USB\VID_XXXX&amp;PID_XXXX</span><br><br><span class="token comment">; ========== Class definition ===========</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">ClassInstall32</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">AddReg</span> <span class="token punctuation">=</span> <span class="token value attr-value">ClassInstall_AddReg</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">ClassInstall_AddReg</span><span class="token punctuation">]</span></span><br>HKR,,,,%ClassName%<br>HKR,,NoInstallClass,,1<br>HKR,,IconPath,%REG_MULTI_SZ%,"%systemroot%\system32\setupapi.dll,-20"<br>HKR,,LowerLogoVersion,,5.2<br><br><span class="token comment">; =================== Installation ===================</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">USB_Install</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">Include</span> <span class="token punctuation">=</span> <span class="token value attr-value">winusb.inf</span><br><span class="token key attr-name">Needs</span>   <span class="token punctuation">=</span> <span class="token value attr-value">WINUSB.NT</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">USB_Install.Services</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">Include</span> <span class="token punctuation">=</span> <span class="token value attr-value">winusb.inf</span><br><span class="token key attr-name">Needs</span>   <span class="token punctuation">=</span> <span class="token value attr-value">WINUSB.NT.Services</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">USB_Install.HW</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">AddReg</span> <span class="token punctuation">=</span> <span class="token value attr-value">Dev_AddReg</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Dev_AddReg</span><span class="token punctuation">]</span></span><br>HKR,,DeviceInterfaceGUIDs,0x10000,"{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}"<br><br><span class="token comment">; =================== Strings ===================</span><br><br><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Strings</span><span class="token punctuation">]</span></span><br><span class="token key attr-name">ManufacturerName</span>              <span class="token punctuation">=</span> <span class="token value attr-value">"<span class="token inner-value">Your Company Name Here</span>"</span><br><span class="token key attr-name">ClassName</span>                     <span class="token punctuation">=</span> <span class="token value attr-value">"<span class="token inner-value">Your Company Devices</span>"</span><br><span class="token key attr-name">USB\MyCustomDevice.DeviceDesc</span> <span class="token punctuation">=</span> <span class="token value attr-value">"<span class="token inner-value">Your Device Name Here</span>"</span></code></pre>
</web-copy-code><p>The <code>[Dev_AddReg]</code> section configures the set of DeviceInterfaceGUIDs for the
device. Every device interface must have a GUID in order for an application to
find and connect to it through the Windows API. Use the <code>New-Guid</code> PowerShell
cmdlet or an online tool to generate a random GUID.</p>
<p>For development purposes the <a href="https://zadig.akeo.ie/" rel="noopener">Zadig tool</a> provides an easy interface for
replacing the driver loaded for a USB interface with the WinUSB driver.</p>
<h4 id="microsoft-os-compatibility-descriptors">Microsoft OS compatibility descriptors <a class="w-headline-link" href="#microsoft-os-compatibility-descriptors">#</a></h4>
<p>The INF file approach above is cumbersome because it requires configuring every
user's machine ahead of time. Windows 8.1 and higher offers an alternative
through the use of custom USB descriptors. These descriptors provide information
to the Windows operating system when the device is first plugged in that would
normally be included in the INF file.</p>
<p>Once you have WebUSB descriptors set up it is easy to add Microsoft's OS
compatibility descriptors as well. First extend the BOS descriptor with this
additional platform capability descriptor. Make sure to update <code>wTotalLength</code>
and <code>bNumDeviceCaps</code> to account for it.</p>
<div>
  <table>
    <tr>
    <th style="width: 33%">Value</th>
    <th style="width: 33%">Field</th>
    <th style="width: 33%">Description</th>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 platform capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x1C</code></td>
    <td>bLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x10</code></td>
    <td>bDescriptorType</td>
    <td>Device capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x05</code></td>
    <td>bDevCapabilityType</td>
    <td>Platform capability descriptor</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bReserved</td>
    <td></td>
    </tr>
    <tr>
    <td><code>{0xDF, 0x60, 0xDD, 0xD8, 0x89, 0x45, 0xC7, 0x4C, 0x9C, 0xD2, 0x65, 0x9D, 0x9E, 0x64, 0x8A, 0x9F}</code></td>
    <td>PlatformCapablityUUID</td>
    <td>Microsoft OS 2.0 platform compatibility descriptor GUID in little-endian format</td>
    </tr>
    <tr>
    <td><code>0x06030000</code></td>
    <td>dwWindowsVersion</td>
    <td>Minimum compatible Windows version (Windows 8.1)</td>
    </tr>
    <tr>
    <td><code>0x00B2</code></td>
    <td>wMSOSDescriptorSetTotalLength</td>
    <td>Total length of the descriptor set</td>
    </tr>
    <tr>
    <td><code>0x02</code></td>
    <td>bMS_VendorCode</td>
    <td>bRequest value for retrieving further Microsoft descriptors </td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bAltEnumCode</td>
    <td>Device does not support alternate enumeration</td>
    </tr>
  </table>
</div>
<p>As with the WebUSB descriptors you have to pick a <code>bRequest</code> value to be used by
control transfers related to these descriptors. In this example I've picked
<code>0x02</code>. <code>0x07</code>, placed in <code>wIndex</code>, is the command to retrieve the Microsoft OS
2.0 Descriptor Set from the device.</p>
<div>
  <table>
    <tr>
    <th>bmRequestType</th>
    <th>bRequest</th>
    <th>wValue</th>
    <th>wIndex</th>
    <th>wLength</th>
    <th>Data (response)</th>
    </tr>
    <tr>
    <td><code>0b11000000</code></td>
    <td><code>0x02</code></td>
    <td><code>0x0000</code></td>
    <td><code>0x0007</code></td>
    <td>*</td>
    <td>MS OS 2.0 Descriptor Set</td>
    </tr>
  </table>
</div>
<p>A USB device can have multiple functions and so the first part of the descriptor
set describes which function the properties that follow are associated with. The
example below configures interface 1 of a composite device. The descriptor gives
the OS two important pieces of information about this interface. The compatible
ID descriptor tells Windows that this device is compatible with the WinUSB
driver. The registry property descriptor functions similarly to the
<code>[Dev_AddReg]</code> section of the INF example above, setting a registry property to
assign this function a device interface GUID.</p>
<div>
  <table>
    <tr>
    <th style="width: 33%">Value</th>
    <th style="width: 33%">Field</th>
    <th style="width: 33%">Description</th>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 descriptor set header</td>
    </tr>
    <tr>
    <td><code>0x000A</code></td>
    <td>wLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0000</code></td>
    <td>wDescriptorType</td>
    <td>Descriptor set header descriptor</td>
    </tr>
    <tr>
    <td><code>0x06030000</code></td>
    <td>dwWindowsVersion</td>
    <td>Minimum compatible Windows version (Windows 8.1)</td>
    </tr>
    <tr>
    <td><code>0x00B2</code></td>
    <td>wTotalLength</td>
    <td>Total length of the descriptor set</td>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 configuration subset header</td>
    </tr>
    <tr>
    <td><code>0x0008</code></td>
    <td>wLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0001</code></td>
    <td>wDescriptorType</td>
    <td>Configuration subset header desc.</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bConfigurationValue</td>
    <td>
      Applies to configuration 1 (indexed from 0 despite configurations
      normally indexed from 1)
    </td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bReserved</td>
    <td>Must be set to 0</td>
    </tr>
    <tr>
    <td><code>0x00A8</code></td>
    <td>wTotalLength</td>
    <td>Total length of the subset including this header</td>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 function subset header</td>
    </tr>
    <tr>
    <td><code>0x0008</code></td>
    <td>wLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0002</code></td>
    <td>wDescriptorType</td>
    <td>Function subset header descriptor</td>
    </tr>
    <tr>
    <td><code>0x01</code></td>
    <td>bFirstInterface</td>
    <td>First interface of the function</td>
    </tr>
    <tr>
    <td><code>0x00</code></td>
    <td>bReserved</td>
    <td>Must be set to 0</td>
    </tr>
    <tr>
    <td><code>0x00A0</code></td>
    <td>wSubsetLength</td>
    <td>Total length of the subset including this header</td>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 compatible ID descriptor</td>
    </tr>
    <tr>
    <td><code>0x0014</code></td>
    <td>wLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0003</code></td>
    <td>wDescriptorType</td>
    <td>Compatible ID descriptor</td>
    </tr>
    <tr>
    <td><code>"WINUSB\0\0"</code></td>
    <td>CompatibileID</td>
    <td>ASCII string padded to 8 bytes</td>
    </tr>
    <tr>
    <td><code>"\0\0\0\0\0\0\0\0"</codE></td>
    <td>SubCompatibleID</td>
    <td>ASCII string padded to 8 bytes</td>
    </tr>
    <tr>
    <td colspan="3">Microsoft OS 2.0 registry property descriptor</td>
    </tr>
    <tr>
    <td><code>0x0084</code></td>
    <td>wLength</td>
    <td>Size of this descriptor</td>
    </tr>
    <tr>
    <td><code>0x0004</code></td>
    <td>wDescriptorType</td>
    <td>Registry property descriptor</td>
    </tr>
    <tr>
    <td><code>0x0007</code></td>
    <td>wPropertyDataType</td>
    <td>REG_MULTI_SZ</td>
    </tr>
    <tr>
    <td><code>0x002A</code></td>
    <td>wPropertyNameLength</td>
    <td>Length of the property name</td>
    </tr>
    <tr>
    <td><code>"DeviceInterfaceGUIDs\0"</code></td>
    <td>PropertyName</td>
    <td>Property name with null terminator encoded in UTF-16LE</td>
    </tr>
    <tr>
    <td><code>0x0050</code></td>
    <td>wPropertyDataLength</td>
    <td>Length of the property value</td>
    </tr>
    <tr>
    <td><code>"{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}\0\0"</code></td>
    <td>PropertyData</td>
    <td>GUID plus two null terminators encoded in UTF-16LE</td>
    </tr>
  </table>
</div>
<p>Windows will only query the device for this information once. If the device does
not respond with valid descriptors it will not ask again the next time the
device is connected. Microsoft has provided <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/usbcon/usb-device-specific-registry-settings" rel="noopener">a list of USB Device Registry
Entries</a> describing the registry entries created when enumerating a device. When
testing delete the entries created for a device for force Windows to try to read
the descriptors again.</p>
<p>For more information check out Microsoft's <a href="https://techcommunity.microsoft.com/t5/microsoft-usb-blog/how-to-install-winusb-sys-without-a-custom-inf/ba-p/270769" rel="noopener">blog post</a> on how to use these
descriptors.</p>
<h2 id="examples">Examples <a class="w-headline-link" href="#examples">#</a></h2>
<p>Example code implementing WebUSB-aware devices that include both WebUSB
descriptors and Microsoft OS descriptors can be found in these projects:</p>
<ul>
<li><a href="https://github.com/sowbug/weblight" rel="noopener">WebLight</a></li>
<li><a href="https://github.com/webusb/arduino" rel="noopener">WebUSB Arduino Library</a></li>
</ul>


      
        <div class="w-aside w-aside--note">Have a question about using this feature? You can get help by <a href="https://stackoverflow.com/questions/ask?tags=webusb">asking a question on Stack Overflow</a>, or <a href="https://stackoverflow.com/search?q=%5Bwebusb%5D+is%3Aquestion">browsing a list of questions</a> asked by other developers.</div>
      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/capabilities/">Capabilities</a>
          
        
          
            
            <a class="pill" href="/tags/devices/">Devices</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Dec 3, 2020</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/build-for-webusb/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@reillyeon"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
