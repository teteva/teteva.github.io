
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=7a3f64f810c84">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Defer non-critical CSS</title>
<meta name="description" content="Learn how to defer non-critical CSS with the goal of optimizing the Critical Rendering Path, and improving FCP (First Contentful Paint). " />

<link rel="canonical" href="https://web.dev/defer-non-critical-css/" />

<meta itemprop="name" content="Defer non-critical CSS" />
<meta itemprop="description" content="Learn how to defer non-critical CSS with the goal of optimizing the Critical Rendering Path, and improving FCP (First Contentful Paint). " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/defer-non-critical-css/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Defer non-critical CSS" />
<meta property="og:description" content="Learn how to defer non-critical CSS with the goal of optimizing the Critical Rendering Path, and improving FCP (First Contentful Paint). " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Defer non-critical CSS" />
<meta name="twitter:description" content="Learn how to defer non-critical CSS with the goal of optimizing the Critical Rendering Path, and improving FCP (First Contentful Paint). " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=9f3d004744463', 'module');




  loadScript('/js/content.js?v=41d23749a042a', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
      
    
    


<div class="guide-landing-page">
  
    
    
    
  
  

  

  <web-table-of-contents>
    <h2 class="w-toc__header">
      <a href="#defer-non-critical-css" class="w-toc__header--link">
        Defer non-critical CSS
      </a>
    </h2>
    <div class="w-toc__list">
        <ul><li><a href="#loading-css-in-a-suboptimal-way">Loading CSS in a suboptimal way</a></li><li><a href="#measure">Measure</a></li><li><a href="#optimize">Optimize</a></li><li><a href="#monitor">Monitor</a></li><li><a href="#next-steps-and-references">Next steps &amp; references</a></li></ul></div>
  </web-table-of-contents>
  <web-table-of-contents-button></web-table-of-contents-button>

  
  <div class="w-actions">
    <share-action authors="@drenzulli"
      class="gc-analytics-event w-actions__fab w-actions__fab--share"
      data-category="web.dev"
      data-label="share"
      data-action="click"
      data-icon="share"
      tabindex="0"
      role="button"
    >
      <span>Share</span>
    </share-action>
    
    
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      

      <h1 id="defer-non-critical-css" class="w-article-header__headline">Defer non-critical CSS</h1>
      

      
        <div class="w-author__published">
          <time>Feb 17, 2019</time>
           <span class="w-author__separator">â€¢</span> Updated <time>Jun 12, 2020</time> 
        </div>
      

      
      

      <div class="w-layout-container--narrow w-post-signpost">
  <span class="w-post-signpost__title">
    Appears in:
  </span>
  <a
          class="w-post-signpost__link"
          href="/fast"
          >Fast load times</a
        >
</div>

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <a href="/authors/demianrenzulli/"><img     alt="Demian Renzulli"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/demianrenzulli/">Demian Renzulli</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/drenzulli"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/demianrenzulli">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@demianrenzulli"
          >Glitch</a
        >
      </li>
      
    </ul>
  </div>
</div>
          
        </div>
      
    </header>

    

    <p>CSS files are <a href="https://developers.google.com/web/tools/lighthouse/audits/blocking-resources" rel="noopener">render-blocking resources</a>:
they must be loaded and processed before the browser renders the page. Web pages that contain unnecessarily large styles
take longer to render.</p>
<p>In this guide, you'll learn how to defer non-critical CSS with the goal of optimizing the <a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/" rel="noopener">Critical Rendering Path</a>, and improving <a href="/first-contentful-paint">First Contentful Paint (FCP)</a>.</p>
<h2 id="loading-css-in-a-suboptimal-way">Loading CSS in a suboptimal way <a class="w-headline-link" href="#loading-css-in-a-suboptimal-way">#</a></h2>
<p>The following example contains an accordion with three hidden paragraphs of text, each of which is styled with a different class:</p>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe
    allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi"
    loading="lazy"
    src="https://glitch.com/embed/#!/embed/defer-css-unoptimized?attributionHidden=true&sidebarCollapsed=true&path=index.html&previewSize=100"
    style="height: 100%; width: 100%; border: 0;"
    title="defer-css-unoptimized on Glitch"
  ></iframe>
</div>
<p>This page requests a CSS file with eight classes, but not all of them are
necessary to render the &quot;visible&quot; content.</p>
<p>The goal of this guide is to optimize this page, so only the <strong>critical</strong> styles
are loaded synchronously, while the rest (like the ones applied to paragraphs),
are loaded in a non-blocking way.</p>
<h2 id="measure">Measure <a class="w-headline-link" href="#measure">#</a></h2>
<p>Run <a href="/discover-performance-opportunities-with-lighthouse/#run-lighthouse-from-chrome-devtools">Lighthouse</a> on <a href="https://defer-css-unoptimized.glitch.me/" rel="noopener">the page</a> and go to the <strong>Performance</strong> section.</p>
<p>The report shows the <strong>First Contentful Paint</strong> metric with a value of &quot;1s&quot;, and
the opportunity <strong>Eliminate render-blocking resources</strong>, pointing to the
<strong>style.css</strong> file:</p>
<figure class="w-figure">
  <img     alt="Lighthouse report for unoptimized page, showing FCP of &#x27;1s&#x27; and &#x27;Eliminate blocking resources&#x27; under &#x27;Opportunities&#x27;"     class="w-screenshot"     decoding="async"     height="640"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/eZtuQ2IwL3Mtnmz09bmp.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<div class="w-aside w-aside--note">
<p>The CSS we are using for this demo site is quite small. If you were requesting
larger CSS files (which are not uncommon in production scenarios), and if
Lighthouse detects that a page has at least 2048Â bytes of CSS rules that
weren't used while rendering the <strong>above the fold</strong> content, you'll
also receive a suggestion called <strong>Remove Unused CSS</strong>.</p>
</div>
<p>To visualize how this CSS blocks rendering:</p>
<ol>
<li>Open <a href="https://defer-css-unoptimized.glitch.me/" rel="noopener">the page</a> in Chrome.</li>
<li>Press `Control+Shift+J` (or `Command+Option+J` on Mac) to open DevTools.</li>
<li>Click the <strong>Performance</strong> tab.</li>
<li>In the Performance panel, click <strong>Reload</strong>.</li>
</ol>
<p>In the resulting trace, you'll see that the <strong>FCP</strong> marker is placed immediately
after the CSS finishes loading:</p>
<figure>
  <img     alt="DevTools performance trace for unoptimized page, showing FCP starting after CSS loads."     class="w-screenshot"     decoding="async"     height="352"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/WhpaDYb98Rf03JmuPenp.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p>This means that the browser needs to wait for all CSS to load and get processed
before painting a single pixel on the screen.</p>
<h2 id="optimize">Optimize <a class="w-headline-link" href="#optimize">#</a></h2>
<p>To optimize this page, you need to know which classes are considered &quot;critical&quot;.
You'll use the <a href="https://developer.chrome.com/docs/devtools/css/reference/#coverage" rel="noopener">Coverage Tool</a> for that:</p>
<ol>
<li>In DevTools, open the <a href="https://developers.google.com/web/tools/chrome-devtools/command-menu" rel="noopener">Command Menu</a>, by pressing <code>Control+Shift+P</code> or <code>Command+Shift+P</code> (Mac).</li>
<li>Type &quot;Coverage&quot; and select <strong>Show Coverage</strong>.</li>
<li>Click the <strong>Reload</strong> button, to reload the page and start capturing the
coverage.</li>
</ol>
<figure class="w-figure">
  <img     alt="Coverage for CSS file, showing 55.9% unused bytes."     class="w-screenshot"     decoding="async"     height="82"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/JTFK7wjhlTzd2cCfkpps.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p>Double-click on the report, to see classes marked in two colors:</p>
<ul>
<li>Green (<strong>critical</strong>): These are the classes the browser needs to render the
visible content (like the title, subtitle, and accordion buttons).</li>
<li>Red (<strong>non-critical</strong>): These styles apply to content that's not immediately
visible (like the paragraphs inside the accordions).</li>
</ul>
<p>With this information, optimize your CSS so that the browser starts processing
critical styles immediately after page loads, while deferring non-critical CSS
for later:</p>
<ul>
<li>Extract the class definitions marked with green in the report obtained from
the coverage tool, and put those classes inside a <code>&lt;style&gt;</code> block at the head
of the page:</li>
</ul>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br><span class="token selector">.accordion-btn</span> <span class="token punctuation">{</span><span class="token property">background-color</span><span class="token punctuation">:</span> #ADD8E6<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #444<span class="token punctuation">;</span><span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span><span class="token property">transition</span><span class="token punctuation">:</span> 0.4s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.container</span> <span class="token punctuation">{</span><span class="token property">padding</span><span class="token punctuation">:</span> 0 18px<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">h1</span> <span class="token punctuation">{</span><span class="token property">word-spacing</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><ul>
<li>Then, load the rest of the classes asynchronously, by applying the following pattern:</li>
</ul>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>onload<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>rel<span class="token operator">=</span><span class="token string">'stylesheet'</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span></code></pre>
</web-copy-code><p>This is not the standard way of loading CSS. Here's how it works:</p>
<ul>
<li><code>link rel=&quot;preload&quot; as=&quot;style&quot;</code> requests the stylesheet asynchronously. You can learn more about <code>preload</code> in the <a href="/preload-critical-assets">Preload critical assets guide</a>.</li>
<li>The <code>onload</code> attribute in the <code>link</code> allows the CSS to be processed when it finishes loading.</li>
<li>&quot;nulling&quot; the <code>onload</code> handler once it is used helps some browsers avoid re-calling the handler upon switching the rel attribute.</li>
<li>The reference to the stylesheet inside of a <code>noscript</code> element works as a fallback for browsers that don't execute JavaScript.</li>
</ul>
<div class="w-aside w-aside--note">
<p>In this guide, you used vanilla code to implement this optimization. In a real
production scenario, it's a good practice to use functions like
<a href="https://github.com/filamentgroup/loadCSS/blob/master/README.md" rel="noopener">loadCSS</a>, that
can encapsulate this behavior and work well across browsers.</p>
</div>
<p>The <a href="https://defer-css-optimized.glitch.me/" rel="noopener">resulting page</a> looks exactly like the previous version, even when most styles load asynchronously. Here's how the inlined styles and asynchronous request to the CSS file look like in the HTML file:</p>
<!-- Copy and Paste Me -->
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe
    allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi"
    loading="lazy"
    src="https://glitch.com/embed/#!/embed/defer-css-optimized?attributionHidden=true&sidebarCollapsed=true&path=index.html&previewSize=0"
    style="height: 100%; width: 100%; border: 0;"
    title="defer-css-optimized on Glitch"
  ></iframe>
</div>
<h2 id="monitor">Monitor <a class="w-headline-link" href="#monitor">#</a></h2>
<p>Use DevTools to run another <strong>Performance</strong> trace on the <a href="https://defer-css-optimized.glitch.me/" rel="noopener">optimized
page</a>.</p>
<p>The <strong>FCP</strong> marker appears before the page requests the CSS, which means the
browser doesn't need to wait for the CSS to load before rendering the page:</p>
<figure class="w-figure">
  <img     alt="DevTools performance trace for unoptimized page, showing FCP starting before CSS loads."     class="w-screenshot"     decoding="async"     height="389"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/0mVq3q760y37JSn2MmCP.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p>As a final step, run Lighthouse on the optimized page.</p>
<p>In the report you'll see that the FCP page has been reduced by <strong>0.2s</strong> (a 20%
improvement!):</p>
<figure class="w-figure">
  <img     alt="Lighthouse report, showing an FCP value of &#x27;0.8s&#x27;."     class="w-screenshot"     decoding="async"     height="324"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/oTDQFSlfQwS9SbqE0D0K.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<p>The <strong>Eliminate render-blocking resources</strong> suggestion is no longer under
<strong>Opportunities</strong>, and now belongs to the <strong>Passed Audits</strong> section:</p>
<figure class="w-figure">
  <img     alt="Lighthouse report, showing &#x27;Eliminate blocing resources&#x27; on the &#x27;Passed Audits&#x27; section."     class="w-screenshot"     decoding="async"     height="237"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/yDjEvZAcjPouC6I3I7qB.png?auto=format&w=1600 1600w"          width="800"   />
</figure>
<h2 id="next-steps-and-references">Next steps &amp; references <a class="w-headline-link" href="#next-steps-and-references">#</a></h2>
<p>In this  guide, you learned how to defer non-critical CSS by manually extracting the unused code in the page.
As a complement to this, the <a href="/extract-critical-css/">extract critical CSS guide</a>
covers some of the most popular tools to extract critical CSS and includes
<a href="/codelab-extract-and-inline-critical-css/">a codelab</a> to see how
they work in practice.</p>


    

    
  <div class="w-chips ">
    
      
    
      
        
        <a class="w-chip" href="/tags/performance/">Performance</a>
      
    
  </div>


    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>Jun 12, 2020</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/fast/defer-non-critical-css/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back
      w-article-navigation__link--single gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/fast"
  >
    Return to all articles
  </a>
</nav>
  
</div>


  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
