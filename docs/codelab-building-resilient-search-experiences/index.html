
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=f3b06a927bf36">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Building resilient search experiences with Workbox</title>
<meta name="description" content="How to implement a resilient search experience with Workbox, using  Background Sync and the Push API. " />

<link rel="canonical" href="https://web.dev/codelab-building-resilient-search-experiences/" />

<meta itemprop="name" content="Building resilient search experiences with Workbox" />
<meta itemprop="description" content="How to implement a resilient search experience with Workbox, using  Background Sync and the Push API. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/codelab-building-resilient-search-experiences/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Building resilient search experiences with Workbox" />
<meta property="og:description" content="How to implement a resilient search experience with Workbox, using  Background Sync and the Push API. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Building resilient search experiences with Workbox" />
<meta name="twitter:description" content="How to implement a resilient search experience with Workbox, using  Background Sync and the Push API. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=4a8a1f398102c', 'module');




  loadScript('/js/content.js?v=39d71b01da644', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
    
<div class="codelab-landing-page">
  
    
    
    
  
  <web-codelab class="web-codelab" glitch="resilient-search-codelab"  >
    <div class="web-codelab__instructions">
      
      <article class="prose legacy-rollout">
        <header class="flow gap-bottom-size-3">

          <h1 id="building-resilient-search-experiences-with-workbox">Building resilient search experiences with Workbox</h1>
          

          
            <div class="flow-space-size-1 color-mid-text text-size-0">
              <time>Jun 23, 2020</time>
              
            </div>
          

          

          
            <div class="cluster flow-space-size-2">
              
                <div class="w-author">
  <a href="/authors/demianrenzulli/"><img     alt="Demian Renzulli"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/EuTrT82fyivFn16L0vD9.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/demianrenzulli/">Demian Renzulli</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/drenzulli"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/demianrenzulli">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@demianrenzulli"
          >Glitch</a
        >
      </li>
      
    </ul>
  </div>
</div>
              
                <div class="w-author">
  <a href="/authors/jeffposnick/"><img     alt="Jeff Posnick"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/uskKSRCW1HyOTCjtdMdo.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/jeffposnick/">Jeff Posnick</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/jeffposnick">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@jeffposnick"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/jeffposnick">Blog</a>
      </li>
    </ul>
  </div>
</div>
              
            </div>
          
        </header>

        

        <p>This codelab shows you how to implement a resilient search experience with Workbox. The demo app it uses contains a search box that calls a server endpoint, and redirects the user to a basic HTML page.</p>
<div class="w-aside w-aside--note">
<p>This codelab uses <a href="https://www.google.com/chrome/" rel="noopener">Chrome DevTools</a>. Download Chrome if you don't already have it.</p>
</div>
<h2 id="measure">Measure <a class="w-headline-link" href="#measure">#</a></h2>
<p>Before adding optimizations, it's always a good idea to first analyze the current state of the application.</p>
<ul>
<li>Click <strong>Remix to Edit</strong> to make the project editable.</li>
<li>To preview the site, press <strong>View App</strong>. Then press
<strong>Fullscreen</strong>
<img
src="/images/glitch/fullscreen.svg"
alt="fullscreen"
style="padding: 4px 8px; opacity: .5; border: 1px solid #c3c3c3; border-radius: 5px;"
/>.</li>
</ul>
<p>In the new tab that just opened, check how the website behaves when going offline:</p>
<ol>
<li>Press `Control+Shift+J` (or `Command+Option+J` on Mac) to open DevTools.</li>
<li>Click the <strong>Network</strong> tab.</li>
<li>Open Chrome DevTools and select the Network panel.</li>
<li>In the <a href="https://developers.google.com/web/tools/chrome-devtools/network/reference#throttling" rel="noopener">Throttling drop-down list</a>, select <strong>Offline</strong>.</li>
<li>In the demo app enter a search query, then click the <strong>Search</strong> button.</li>
</ol>
<p>The standard browser error page is shown:</p>
<img     alt="A screenshot of the default offline UX in the browser."          decoding="async"     height="465"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/g4Naxj1RnipuqxqzC62x.png?auto=format&w=1600 1600w"          width="800"   />
<h2 id="provide-a-fallback-response">Provide a fallback response <a class="w-headline-link" href="#provide-a-fallback-response">#</a></h2>
<p>The service worker contains the code to add the offline page to the <a href="https://developers.google.com/web/tools/workbox/modules/workbox-precaching#explanation_of_the_precache_list" rel="noopener">precache list</a>, so it can always be cached at the service worker <code>install</code> event.</p>
<p>Usually you would need to instruct Workbox to add this file to the precache list at build time, by integrating the library with your build tool of choice (e.g. <a href="https://webpack.js.org/" rel="noopener">webpack</a> or <a href="https://gulpjs.com/" rel="noopener">gulp</a>).</p>
<p>For simplicity, we've already done it for you. The following code at <code>public/sw.js</code> does that:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">FALLBACK_HTML_URL</span> <span class="token operator">=</span> <span class="token string">'/index_offline.html'</span><span class="token punctuation">;</span><br>…<br>workbox<span class="token punctuation">.</span>precaching<span class="token punctuation">.</span><span class="token function">precacheAndRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">FALLBACK_HTML_URL</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><div class="w-aside w-aside--note">
<p>To learn more about how to integrate Workbox with build tools, check out the <a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin" rel="noopener">webpack Workbox plugin</a> and the <a href="https://developers.google.com/web/tools/workbox/guides/codelabs/gulp" rel="noopener">Gulp Workbox plugin</a>.</p>
</div>
<p>Next, add code to use the offline page as a fallback response:</p>
<ol>
<li>To view the source, press <strong>View Source</strong>.</li>
<li>Add the following code to the bottom of <code>public/sw.js</code>:</li>
</ol>
<web-copy-code><pre class="language-javascript"><code class="language-javascript">workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">setDefaultHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>NetworkOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">setCatchHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>event<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>destination<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token string">'document'</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">FALLBACK_HTML_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token keyword">default</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> Response<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><div class="w-aside w-aside--note">
<p>The Glitch UI says <code>workbox is not defined</code> because it doesn't realize that the
<code>importScripts()</code> call on line 1 is importing the library.</p>
</div>
<p>The code does the following:</p>
<ul>
<li>Defines a default <a href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies#network_only" rel="noopener">Network Only strategy</a> that will apply to all requests.</li>
<li>Declares a global error handler, by calling <code>workbox.routing.setCatchHandler()</code> to manage failed requests. When requests are for documents, a fallback offline HTML page will be returned.</li>
</ul>
<p>To test this functionality:</p>
<ol>
<li>Go back to the other tab that is running your app.</li>
<li>Set the <strong>Throttling</strong> drop-down list back to <strong>Online</strong>.</li>
<li>Press Chrome's <strong>Back</strong> button to navigate back to the search page.</li>
<li>Make sure that the <strong>Disable cache</strong> checkbox in DevTools is disabled.</li>
<li>Long-press Chrome's <strong>Reload</strong> button and select
<a href="https://stackoverflow.com/q/14969315/1669860" rel="noopener"><strong>Empty cache and hard reload</strong></a>
to ensure that your service worker is updated.</li>
<li>Set the <strong>Throttling</strong> drop-down list back to <strong>Offline</strong> again.</li>
<li>Enter a search query, and click the <strong>Search</strong> button again.</li>
</ol>
<p>The fallback HTML page is shown:</p>
<img     alt="A screenshot of the custom offline UX in the browser."          decoding="async"     height="456"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/2o0feM6Ib4GnLdKQqV9G.png?auto=format&w=1600 1600w"          width="800"   />
<h2 id="request-notification-permission">Request notification permission <a class="w-headline-link" href="#request-notification-permission">#</a></h2>
<p>For simplicity, the offline page at <code>views/index_offline.html</code> already contains the code to request notification permissions in a script block at the bottom:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">requestNotificationPermission</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">showOfflineText</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>The code does the following:</p>
<ul>
<li>When the user clicks <strong>subscribe to notifications</strong> the <code>requestNotificationPermission()</code> function is called, which calls <code>Notification.requestPermission()</code>, to show the default browser permission prompt. The promise resolves with the permission picked by the user, which can be either <code>granted</code>, <code>denied</code>, or <code>default</code>.</li>
<li>Passes the resolved permission to  <code>showOfflineText()</code> to show the appropriate text to the user.</li>
</ul>
<h2 id="persist-offline-queries-and-retry-when-back-online">Persist offline queries and retry when back online <a class="w-headline-link" href="#persist-offline-queries-and-retry-when-back-online">#</a></h2>
<p>Next, implement <a href="https://developers.google.com/web/tools/workbox/modules/workbox-background-sync" rel="noopener">Workbox Background Sync</a> to persist offline queries, so they can be retried when the browser detects that connectivity has returned.</p>
<ol>
<li>Open <code>public/sw.js</code> for edit.</li>
<li>Add the following code at the end of the file:</li>
</ol>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> bgSyncPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>backgroundSync<span class="token punctuation">.</span>Plugin</span><span class="token punctuation">(</span><span class="token string">'offlineQueryQueue'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  maxRetentionTime<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onSync</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>queue<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> entry<span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>entry <span class="token operator">=</span> <span class="token keyword">await</span> queue<span class="token punctuation">.</span><span class="token function">shiftRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">try</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'offline-search-responses'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">const</span> offlineUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entry<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;notification=true</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>        cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>offlineUrl<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">showNotification</span><span class="token punctuation">(</span>offlineUrl<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unshiftRequest</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">throw</span> error<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>The code does the following:</p>
<ul>
<li><code>workbox.backgroundSync.Plugin</code> contains the logic to add failed requests to a queue so they can be retried later. These requests will be persisted in <a href="https://developer.mozilla.org/docs/Web/API/IndexedDB_API" rel="noopener">IndexedDB</a>.</li>
<li><code>maxRetentionTime</code> indicates the amount of time a request may be retried. In this case we have chosen 60 minutes (after which it will be discarded).</li>
<li><code>onSync</code> is the most important part of this code. This callback will be called when connection is back so that queued requests are retrieved and then fetched from the network.</li>
<li>The network response is added to the <code>offline-search-responses</code> cache, appending the <code>&amp;notification=true</code> query param, so that this cache entry can be picked up when a user clicks on the notification.</li>
</ul>
<p>To integrate background sync with your service, define a <a href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies#network_only" rel="noopener">NetworkOnly</a> strategy for requests to the search URL (<code>/search_action</code>) and pass the previously defined <code>bgSyncPlugin</code>. Add the following code to the bottom of <code>public/sw.js</code>:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">matchSearchUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> notificationParam <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> url<span class="token punctuation">.</span>pathname <span class="token operator">===</span> <span class="token string">'/search_action'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>notificationParam <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  matchSearchUrl<span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>NetworkOnly</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>bgSyncPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>This tells Workbox to always go to the network, and, when requests fail, use the background sync logic.</p>
<p>Next, add the following code to the bottom of <code>public/sw.js</code> to define a caching strategy for requests coming from notifications. Use a <a href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies#cache_first_cache_falling_back_to_network" rel="noopener">CacheFirst</a> strategy, so they can be served from the cache.</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">matchNotificationUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> notificationParam <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>pathname <span class="token operator">===</span> <span class="token string">'/search_action'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>notificationParam <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span>matchNotificationUrl<span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>CacheFirst</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>     cacheName<span class="token operator">:</span> <span class="token string">'offline-search-responses'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Finally, add the code to show notifications:</p>
<web-copy-code><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">showNotification</span><span class="token punctuation">(</span><span class="token parameter">notificationUrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>Notification<span class="token punctuation">.</span>permission<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>     self<span class="token punctuation">.</span>registration<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span><span class="token string">'Your search is ready!'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>        body<span class="token operator">:</span> <span class="token string">'Click to see you search result'</span><span class="token punctuation">,</span><br>        icon<span class="token operator">:</span> <span class="token string">'/img/workbox.jpg'</span><span class="token punctuation">,</span><br>        data<span class="token operator">:</span> <span class="token punctuation">{</span><br>           url<span class="token operator">:</span> notificationUrl<br>        <span class="token punctuation">}</span><br>     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'notificationclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  event<span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span><br>     clients<span class="token punctuation">.</span><span class="token function">openWindow</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>notification<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h2 id="test-the-feature">Test the feature <a class="w-headline-link" href="#test-the-feature">#</a></h2>
<ol>
<li>Go back to the other tab that is running your app.</li>
<li>Set the <strong>Throttling</strong> drop-down list back to <strong>Online</strong>.</li>
<li>Press Chrome's <strong>Back</strong> button to navigate back to the search page.</li>
<li>Long-press Chrome's <strong>Reload</strong> button and select
<a href="https://stackoverflow.com/q/14969315/1669860" rel="noopener"><strong>Empty cache and hard reload</strong></a>
to ensure that your service worker is updated.</li>
<li>Set the <strong>Throttling</strong> drop-down list back to <strong>Offline</strong> again.</li>
<li>Enter a search query, and click the <strong>Search</strong> button again.</li>
<li>Click <strong>subscribe to notifications</strong>.</li>
<li>When Chrome asks you if you want to grant the app permission to send notifications,
click <strong>Allow</strong>.</li>
<li>Enter another search query and click the <strong>Search</strong> button again.</li>
<li>Set the <strong>Throttling</strong> drop-down list back to <strong>Online</strong> again.</li>
</ol>
<p>Once the connection is back a notification will be shown:</p>
<img     alt="A screenshot of the full offline flow."          decoding="async"     height="315"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/kvnl2PlazBdppGF4eMi0.png?auto=format&w=1600 1600w"          width="800"   />
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>Workbox provides many built-in features to make your PWAs more resilient and engaging.
In this codelab you have explored how to implement the Background Sync API by way of the Workbox abstraction, to ensure that offline user queries are not lost, and can be retried once connection is back.
The demo is a simple search app, but you can use a similar implementation for more complex scenarios and use cases, including chat apps, posting messages on a social network, etc.</p>


        <div class="text-size-0 color-mid-text">
          <span>
            
            Last updated: <time>Jun 23, 2020</time>
            
          </span>
          —
          <a
            href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/reliable/codelab-building-resilient-search-experiences/index.md"
          >
            Improve article
          </a>
        </div>

        
          
          
        

        
          <div class="flow-space-size-2">
            <a href="/resilient-search-experiences" class="button" data-type="secondary">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

              <span>Return to article</span>
            </a>
          </div>
        
      </article>
    </div>
  </web-codelab>
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
