
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
    <link rel="stylesheet" href="/css/main.css?v=cd0e41dbe019a">
  

  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Codelab: Preload critical assets to improve loading speed</title>
<meta name="description" content="In this codelab, learn how to improve the performance of a page by preloading and prefetching resources. " />

<link rel="canonical" href="https://web.dev/codelab-preload-critical-assets/" />

<meta itemprop="name" content="Codelab: Preload critical assets to improve loading speed" />
<meta itemprop="description" content="In this codelab, learn how to improve the performance of a page by preloading and prefetching resources. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/codelab-preload-critical-assets/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Codelab: Preload critical assets to improve loading speed" />
<meta property="og:description" content="In this codelab, learn how to improve the performance of a page by preloading and prefetching resources. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="" />
<meta property="tag" content="performance" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Codelab: Preload critical assets to improve loading speed" />
<meta name="twitter:description" content="In this codelab, learn how to improve the performance of a page by preloading and prefetching resources. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/vU99HKzIf5EUPnzGVPf1.png?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=14b90145eafb3', 'module');




  loadScript('/js/content.js?v=5ec8ed0eff829', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    



<web-header class="header-default" role="navigation">
  <button data-open-drawer-button class="w-button--svg w-button--round" aria-label="Open menu">
    








  










  <svg class="icon " role="img" aria-label="menu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>


    <span class="w-tooltip w-tooltip--left">Open menu</span>
  </button>

  <a
    href="/"
    class="header-default__logo-link gc-analytics-event"
    data-category="Site-Wide Custom Events"
    data-label="Site logo"
  >
    <img class="header-default__logo" width="125" height="23" src="/images/lockup.svg" alt="web.dev" />
  </a>

  <div class="header-default__middle">
    <div class="header-default__links">
      <a
        href="/learn/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
      >
        Learn
      </a>

      <a
        href="/measure/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
      >
        Measure
      </a>

      <a
        href="/blog/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
      >
        Blog
      </a>

      <a
        href="/about/"
        class="header-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About"
      >
        About
      </a>
    </div>
    <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
    <web-search-results id="search-main-results"></web-search-results>
  </div>

  <web-profile-switcher-container></web-profile-switcher-container>
</web-header>



<web-navigation-drawer class="drawer-default" type="modal">
  <nav data-drawer-container>
    <div class="drawer-default__contents">
      <div class="drawer-default__header">
        <button
          data-drawer-close-button
          class="drawer-default__hide w-button--svg w-button--round"
          aria-label="Close"
        >
          








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


          <span class="w-tooltip">Close</span>
        </button>
        <a
          href="/"
          class="gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Site logo"
        >
          <img
            width="125"
            height="30"
            class="drawer-default__logo"
            src="/images/lockup.svg"
            alt="web.dev"
          />
        </a>
      </div>
      <a
        href="/learn/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Learn"
      >
        Learn
      </a>
      <a
        href="/measure/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Measure"
      >
        Measure
      </a>
      <a
        href="/blog/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: Blog"
      >
        Blog
      </a>
      <a
        href="/about/"
        class="drawer-default__link gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="SideNav: About"
      >
        About
      </a>
    </div>
  </nav>
</web-navigation-drawer>

<main>
  <div id="content">
    
    
<div class="codelab-landing-page">
  
    
    
    
  
  <web-codelab class="web-codelab" glitch="preload-critical-assets"  >
    <div class="web-codelab__instructions">
      
      <article class="prose legacy-rollout">
        <header class="flow gap-bottom-size-3">

          <h1 id="codelab:-preload-critical-assets-to-improve-loading-speed">Codelab: Preload critical assets to improve loading speed</h1>
          

          
            <div class="flow-space-size-1 color-mid-text text-size-0">
              <time>Apr 24, 2019</time>
              
            </div>
          

          

          
            <div class="cluster flow-space-size-2">
              
                <div class="w-author">
  <a href="/authors/houssein/"><img     alt="Houssein Djirdeh"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/BibySYHD7JweNcHZCCOe.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /></a>
  <div
    class="w-author__info"
    style="display: flex; flex-direction: column; justify-content: center;"
  >
    <cite class="w-author__name">
      <a class="w-author__name-link" href="/authors/houssein/">Houssein Djirdeh</a>
    </cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/hdjirdeh"
          >Twitter</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/housseindjirdeh">GitHub</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@housseindjirdeh"
          >Glitch</a
        >
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://houssein.me/">Blog</a>
      </li>
    </ul>
  </div>
</div>
              
            </div>
          
        </header>

        

        <div class="w-aside w-aside--note">
<p>This codelab uses Chrome DevTools.
<a href="https://www.google.com/chrome" rel="noopener">Download Chrome</a> if you don't already have it.</p>
</div>
<p>In this codelab, the performance of the following web page is improved
by preloading and prefetching a few resources:</p>
<img     alt="App Screenshot"          decoding="async"     height="578"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/Ln5Oxy5vp8QWTn0GoOFh.png?auto=format&w=1600 1600w"          width="800"   />
<h2 id="measure">Measure <a class="w-headline-link" href="#measure">#</a></h2>
<p>First measure how the website performs before adding any optimizations.</p>
<ul>
<li>To preview the site, press <strong>View App</strong>. Then press
<strong>Fullscreen</strong>
<img
src="/images/glitch/fullscreen.svg"
alt="fullscreen"
style="padding: 4px 8px; opacity: .5; border: 1px solid #c3c3c3; border-radius: 5px;"
/>.</li>
</ul>
<p>Run the Lighthouse performance audit (<strong>Lighthouse &gt; Options &gt; Performance</strong>) on
the live version of your Glitch (see also
<a href="/discover-performance-opportunities-with-lighthouse">Discover performance opportunities with Lighthouse</a>).</p>
<p>Lighthouse shows the following failed audit for a resource that is fetched
late:</p>
<img     alt="Lighthouse: Preload key requests audit"     class="w-screenshot"     decoding="async"     height="231"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/AMhzorWlWYejd0tA11rY.png?auto=format&w=1600 1600w"          width="800"   />
<ul>
<li>Press `Control+Shift+J` (or `Command+Option+J` on Mac) to open DevTools.</li>
<li>Click the <strong>Network</strong> tab.</li>
</ul>
<img     alt="Network panel with late-discovered resource"     class="w-screenshot"     decoding="async"     height="166"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/pO1f6x9pOqzYwPciKnTy.png?auto=format&w=1600 1600w"          width="800"   />
<p>The <code>main.css</code> file is not fetched by a Link element (<code>&lt;link&gt;</code>) placed in the HTML
document, but a separate JavaScript file, <code>fetch-css.js</code>, attaches
the Link element to the DOM after the <code>window.onLoad</code> event. This means that the
file is only fetched <em>after</em> the browser finishes parsing and executing the JS
file.  Similarly, a web font (<code>K2D.woff2</code>) specified within <code>main.css</code> is only
fetched once the CSS file has finished downloading.</p>
<p>The <strong>critical request chain</strong> represents the order of resources that are
prioritized and fetched by the browser. For this web page, it currently looks
like this:</p>
<web-copy-code><pre class="language-bash"><code class="language-bash">├─┬ / <span class="token punctuation">(</span>initial HTML <span class="token function">file</span><span class="token punctuation">)</span><br>  └── fetch-css.js<br>    └── main.css<br>      └── K2D.woff2</code></pre>
</web-copy-code><p>Since the CSS file is on the third level of the request chain, Lighthouse has
identified it as a late-discovered resource.</p>
<h2 id="preload-critical-resources">Preload critical resources <a class="w-headline-link" href="#preload-critical-resources">#</a></h2>
<p>The <code>main.css</code> file is a critical asset that's needed immediately as soon as the
page is loaded. For important files like this resource that are fetched late in
your application, use a link preload tag to inform the browser to download
it sooner by adding a Link element to the head of the document.</p>
<p>Add a preload tag for this application:</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token comment">&lt;!-- ... --></span></span><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></span></code></pre>
</web-copy-code><p>The <code>as</code> attribute is used to identify which type of resource is being
fetched, and <code>as=&quot;style&quot;</code> is used to preload stylesheet files.</p>
<p>Reload the application and take a look at the <strong>Network</strong> panel in DevTools.</p>
<img     alt="Network panel with preloaded resource"     class="w-screenshot"     decoding="async"     height="166"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/3xjh4kLTps0fCqs7wRwP.png?auto=format&w=1600 1600w"          width="800"   />
<p>Notice how the browser fetches the CSS file before the JavaScript
responsible for fetching it has even been finished parsing. With preload, the browser
knows to make a preemptive fetch for the resource with the assumption that it is
critical for the web page.</p>
<div class="w-aside w-aside--note">
<p>If this was a real production app, it would make more sense to just place a
<code>&lt;link&gt;</code> element in index.html to fetch the CSS file instead of using JavaScript
to append it. Browsers already know to fetch a CSS file defined at the head of
an HTML document with a high priority as soon as possible. However, preload is
used in this codelab to demonstrate the best course of action for files that are
fetched late in the request chain. For a large application, this can happen
quite often.</p>
</div>
<p>If not used correctly, preload can harm performance by making unnecessary
requests for resources that aren't used. In this application, <code>details.css</code> is
another CSS file located at the root of the project but is used for a separate
<code>/details route</code>. To show an example of how preload can be used incorrectly, add a
preload hint for this resource as well.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token comment">&lt;!-- ... --></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>details.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></span></code></pre>
</web-copy-code><p>Reload the application and take a look at the <strong>Network</strong> panel.
A request is made to retrieve <code>details.css</code> even though it is not being used by the web page.</p>
<img     alt="Network panel with unecessary preload"     class="w-screenshot"     decoding="async"     height="189"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/vOyq8M3X2UPd5JUTvex0.png?auto=format&w=1600 1600w"          width="800"   />
<p>Chrome displays a warning in the <strong>Console</strong> panel when a preloaded resource is
not used by the page within a few seconds after it has loaded.</p>
<img     alt="Preload warning in console"     class="w-screenshot"     decoding="async"     height="150"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/elfGvORyRu1s0slntYHo.png?auto=format&w=1600 1600w"          width="800"   />
<p>Use this warning as an indicator to identify if you have any preloaded resources
that are not being used immediately by your web page. You can now remove the
unnecessary preload link for this page.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token comment">&lt;!-- ... --></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><del class="highlight-line highlight-line-remove">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>details.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></del><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></span></code></pre>
</web-copy-code><p>For a list of all the types of resources that can be fetched along with the
correct values that should be used for the <code>as</code> attribute, refer to the
<a href="https://developer.mozilla.org/docs/Web/HTML/Preloading_content#What_types_of_content_can_be_preloaded" rel="noopener">MDN article on Preloading</a>.</p>
<div class="w-aside w-aside--note">
<p>Cross-origin resources can also be preloaded using the <code>crossorigin</code> attribute.
Moreover, same-origin font resources must be fetched using anonymous mode CORS
which is why the <code>crossorigin</code> attribute is also used in this preload tag.
The <a href="/cross-origin-resource-sharing">Cross Origin Resource Sharing</a>
guide explains the topic of same-origin and cross-origin requests in more detail.</p>
</div>
<h2 id="prefetch-future-resources">Prefetch future resources <a class="w-headline-link" href="#prefetch-future-resources">#</a></h2>
<p><strong>Prefetch</strong> is another browser hint that can be used to make
a request for an asset used for a different navigation route but at
a lower priority than other important assets needed for the current page.</p>
<p>In this website, clicking the image takes you to a separate <code>details/</code>
route.</p>
<img     alt="Details route"          decoding="async"     height="585"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/KLzVOClmdtwTZ3nhzGz5.png?auto=format&w=1600 1600w"          width="800"   />
<p>A separate CSS file, <code>details.css</code>, contains all the styles needed for this
simple page. Add a link element to <code>index.html</code> to prefetch this resource.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token comment">&lt;!-- ... --></span></span><br><mark class="highlight-line highlight-line-active">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>details.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></mark><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></span></code></pre>
</web-copy-code><p>To understand how this triggers a request for the file, open the <strong>Network</strong> panel in DevTools
and uncheck the <strong>Disable cache</strong> option.</p>
<img     alt="Disable cache in Chrome DevTools"     class="w-screenshot"     decoding="async"     height="145"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/dddEy2ERtrha2WZKN5Ou.png?auto=format&w=1600 1600w"          width="800"   />
<p>Reload the application and notice how a very low priority request is made for
<code>details.css</code> after all the other files have been fetched.</p>
<img     alt="Network panel with prefetched resource"     class="w-screenshot"     decoding="async"     height="211"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/STiBaCDoaZ1Ghzbp5fOH.png?auto=format&w=1600 1600w"          width="800"   />
<p>With DevTools open, click the image on the website to navigate to the <code>details</code> page.
Since a link element is used in <code>details.html</code> to fetch <code>details.css</code>, a request is made for the
resource as expected.</p>
<img     alt="Details page network requests"     class="w-screenshot"     decoding="async"     height="106"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/AfkaIGXdHifq8n1xD8YQ.png?auto=format&w=1600 1600w"          width="800"   />
<p>Click the <code>details.css</code> network request in DevTools to view its details. You'll notice
that the file is retrieved from the browser's disk cache.</p>
<img     alt="Details request fetched from disk cache"     class="w-screenshot"     decoding="async"     height="170"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/3pPpPCjbwugX1nnqCf5e.png?auto=format&w=1600 1600w"          width="800"   />
<p>By taking advantage of browser idle time, prefetch makes an early request for a
resource needed for a different page. This speeds up future navigation requests
by allowing the browser to cache the asset sooner and serve it from the cache
when needed.</p>
<h2 id="preloading-and-prefetching-with-webpack">Preloading and prefetching with webpack <a class="w-headline-link" href="#preloading-and-prefetching-with-webpack">#</a></h2>
<p>The
<a href="/reduce-javascript-payloads-with-code-splitting">Reduce JavaScript payloads with code splitting</a>
post explores the use of dynamic imports to split a bundle into multiple chunks.
This is demonstrated with a simple application that
dynamically imports a module from <a href="https://lodash.com/" rel="noopener">Lodash</a> when a form is submitted.</p>
<img     alt="Magic Sorter app that demonstrates code splitting"     class="w-screenshot"     decoding="async"     height="375"          loading="lazy"     sizes="(min-width: 600px) 600px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format"     srcset="https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/yg2lFaDyWQFBvw7YaJ3g.gif?auto=format&w=1200 1200w"          width="600"   />
<p>You can access <a href="https://glitch.com/edit/#!/code-splitting" rel="noopener">the Glitch for this application here</a>.</p>
<p>The following block of code, which lives in <code>src/index.js,</code> is responsible for
dynamically importing the method when the button is clicked.</p>
<web-copy-code><pre class="language-js"><code class="language-js">form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash.sortby'</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> module<span class="token punctuation">.</span>default<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">sortInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Splitting a bundle improves page loading times by
reducing its initial size. Version 4.6.0 of webpack provides support to preload or
prefetch chunks that are imported dynamically. Using this application as an
example, the <code>lodash</code> method can be prefetched at browser idle time; when a user
presses the button, there is no delay for the resource to be fetched.</p>
<p>Use the specific <code>webpackPrefetch</code> comment parameter within a dynamic import to prefetch a particular chunk.
Here is how it would look with this particular application.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="highlight-line">form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">'lodash.sortby'</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> module<span class="token punctuation">.</span>default<span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">sortInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
</web-copy-code><p>Once the application is reloaded, webpack injects a prefetch tag for the
resource into the head of the document. This can be seen in the <strong>Elements</strong>
panel in DevTools.</p>
<img     alt="Elements panel with prefetch tag"          decoding="async"     height="520"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/5Zs5L6UMnkUJXyfwtru7.png?auto=format&w=1600 1600w"          width="800"   />
<p>Observing the requests in the <strong>Network</strong> panel also shows that this chunk is
fetched with a low priority after all other resources have been requested.</p>
<img     alt="Network panel with prefetched request"     class="w-screenshot"     decoding="async"     height="181"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format"     srcset="https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/nGh06M2LqgTfBUwPaXK7.png?auto=format&w=1600 1600w"          width="800"   />
<p>Although prefetch makes more sense for this use case, webpack also provides support for preloading
chunks that are dynamically imported.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span> <span class="token string">'module'</span><span class="token punctuation">)</span></code></pre>
</web-copy-code><h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion">#</a></h2>
<p>With this codelab, you should have a solid understanding of how preloading or prefetching certain assets can improve the user experience of your site. It is important to mention that these techniques should not be used for every resource and using them incorrectly can harm performance. The best results are noticed by only preloading or prefetching selectively.</p>
<p>To summarize:</p>
<ul>
<li>Use <strong>preload</strong> for resources that are discovered late but are critical to the current page.</li>
<li>Use <strong>prefetch</strong> for resources that are needed for a future navigation route or user action.</li>
</ul>
<p>Not all browsers currently support both preload and prefetch. This means that
not all users of your application may notice performance improvements.</p>
<ul>
<li><a href="https://caniuse.com/#feat=link-rel-preload" rel="noopener">Browser support: Preload</a></li>
<li><a href="https://caniuse.com/#feat=link-rel-prefetch" rel="noopener">Browser support: Prefetch</a></li>
</ul>
<p>If you would like more information about specific aspects of how preloading and
prefetching can affect your web page, refer to these articles:</p>
<ul>
<li><a href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" rel="noopener">Preload, Prefetch and Priorities in Chrome</a></li>
<li><a href="https://medium.com/webpack/link-rel-prefetch-preload-in-webpack-51a52358f84c" rel="noopener">&lt;link rel=&quot;prefetch/preload&quot;&gt; in webpack</a></li>
</ul>


        <div class="text-size-0 color-mid-text">
          <span>
            
            Last updated: <time>Apr 24, 2019</time>
            
          </span>
          —
          <a
            href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/fast/codelab-preload-critical-assets/index.md"
          >
            Improve article
          </a>
        </div>

        
          
          
        

        
          <div class="flow-space-size-2">
            <a href="/preload-critical-assets" class="button" data-type="secondary">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

              <span>Return to article</span>
            </a>
          </div>
        
      </article>
    </div>
  </web-codelab>
</div>

  </div>
</main>
<footer class="w-footer">
  <nav class="w-footer__linkboxes">
    <ul class="w-footer__linkboxes-list">
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Contribute</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
              class="w-footer__linkbox-link" data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              File a bug
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://github.com/googlechrome/web.dev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              View source
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Related content</h3>
        <ul class="w-footer__linkbox-list">
         <li class="w-footer__linkbox-item">
            <a href="https://developer.chrome.com/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              developer.chrome.com
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://blog.chromium.org/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Chrome updates
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/fundamentals" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              Web Fundamentals
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://developers.google.com/web/showcase/" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
              Case studies
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/podcasts/" class="w-footer__linkbox-link"
              data-category="Podcasts" data-label="Footer Link (index 5)">
              Podcasts
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="/shows/" class="w-footer__linkbox-link"
              data-category="Shows" data-label="Footer Link (index 6)">
              Shows
            </a>
          </li>
        </ul>
      </li>
      <li class="w-footer__linkbox">
        <h3 class="w-footer__linkbox-heading">Connect</h3>
        <ul class="w-footer__linkbox-list">
          <li class="w-footer__linkbox-item">
            <a href="https://www.twitter.com/ChromiumDev" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
              Twitter
            </a>
          </li>
          <li class="w-footer__linkbox-item">
            <a href="https://www.youtube.com/user/ChromeDevelopers" class="w-footer__linkbox-link"
              data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
              YouTube
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <div class="w-footer__utility">
    <nav class="w-footer__utility-nav">
      <a href="https://developers.google.com/" class="w-footer__utility-logo-link"
        data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
        <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
          alt="Google Developers" />
      </a>
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
            Chrome
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Firebase Link">
            Firebase
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Google Cloud Platform Link">
            Google Cloud Platform
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://developers.google.com/products"
            data-category="Site-Wide Custom Events" data-label="Footer All products Link">
            All products
          </a>
        </li>
      </ul>
      <web-language-select current="en"></web-language-select>
    </nav>
    <nav class="w-footer__utility-nav">
      <ul class="w-footer__utility-list">
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="https://policies.google.com/" data-category="Site-Wide Custom Events"
            data-label="Footer Terms and Privacy link">
            Terms &amp; Privacy
          </a>
        </li>
        <li class="w-footer__utility-item">
          <a class="w-footer__utility-link" href="/community-guidelines/" data-category="Site-Wide Custom Events"
            data-label="Footer Community Guidelines link">
            Community Guidelines
          </a>
        </li>
      </ul>
      <div class="w-footer__license">
        <p>
          Except as otherwise noted, the content of this page is licensed
          under the
          <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons Attribution 4.0 License</a>,
          and code samples are licensed under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">
          Apache 2.0 License</a>. For details, see the
          <a href="https://developers.google.com/terms/site-policies">
          Google Developers Site Policies</a>.
        </p>
      </div>
    </nav>
  </div>
</footer>

  </body>
</html>
