
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=8933bcab7dbc8">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=e73d905520ccb">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Video processing with WebCodecs</title>
<meta name="description" content="Work with components of a video stream, such as frames and unmuxed chunks of encoded video or audio. " />

<link rel="canonical" href="https://web.dev/webcodecs/" />

<meta itemprop="name" content="Video processing with WebCodecs" />
<meta itemprop="description" content="Work with components of a video stream, such as frames and unmuxed chunks of encoded video or audio. " />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/webcodecs/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Video processing with WebCodecs" />
<meta property="og:description" content="Work with components of a video stream, such as frames and unmuxed chunks of encoded video or audio. " />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="A roll of film." />
<meta property="tag" content="media" />
<meta property="tag" content="origin-trials" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Video processing with WebCodecs" />
<meta name="twitter:description" content="Work with components of a video stream, such as frames and unmuxed chunks of encoded video or audio. " />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=979821f32c746', 'module');




  loadScript('/js/content.js?v=962fe5cd14d83', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="A roll of film."     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/I09h0la9qLPSRLZs1ruB.jpg?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#status">Current status</a></li><li class="toc__listitem"><a class="toc__anchor" href="#video-processing-workflow">Video processing workflow</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webcodecs-and-web-workers">WebCodecs and web workers</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webcodecs-in-action">WebCodecs in action</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#encoding">Encoding</a></li><li class="toc__listitem"><a class="toc__anchor" href="#decoding">Decoding</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#demo">Demo</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#other-demos">Other demos</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#use">Using the WebCodecs API</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feedback">Feedback</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#tell-us-about-the-api-design">Tell us about the API design</a></li><li class="toc__listitem"><a class="toc__anchor" href="#report-a-problem-with-the-implementation">Report a problem with the implementation</a></li><li class="toc__listitem"><a class="toc__anchor" href="#show-support-for-the-api">Show support for the API</a></li></ul></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="video-processing-with-webcodecs">Video processing with WebCodecs</h1>
        
          <p class="color-mid-text flow-space-base">
            Manipulating video stream components.
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Oct 13, 2020</time>
             — Updated <time>Aug 26, 2021</time> 
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/djuffin/"> <img     alt="Eugene Zemtsov"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/MWYHP293xzaBdw30G3Ts.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/djuffin/">Eugene Zemtsov</a>
    </cite>
    <div class="author__links cluster">
               
               <a href="https://github.com/djuffin">GitHub</a>
               
               
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#status">Current status</a></li><li class="toc__listitem"><a class="toc__anchor" href="#video-processing-workflow">Video processing workflow</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webcodecs-and-web-workers">WebCodecs and web workers</a></li><li class="toc__listitem"><a class="toc__anchor" href="#webcodecs-in-action">WebCodecs in action</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#encoding">Encoding</a></li><li class="toc__listitem"><a class="toc__anchor" href="#decoding">Decoding</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#demo">Demo</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#other-demos">Other demos</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#use">Using the WebCodecs API</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feedback">Feedback</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#tell-us-about-the-api-design">Tell us about the API design</a></li><li class="toc__listitem"><a class="toc__anchor" href="#report-a-problem-with-the-implementation">Report a problem with the implementation</a></li><li class="toc__listitem"><a class="toc__anchor" href="#show-support-for-the-api">Show support for the API</a></li></ul></li></ul></div>
    </details>
  </div>



      <p>Modern web technologies provide ample ways to work with video.
<a href="https://developer.mozilla.org/docs/Web/API/MediaStream_Recording_API" rel="noopener">Media Stream API</a>,
<a href="https://developer.mozilla.org/docs/Web/API/MediaStream_Recording_API" rel="noopener">Media Recording API</a>,
<a href="https://developer.mozilla.org/docs/Web/API/Media_Source_Extensions_API" rel="noopener">Media Source API</a>,
and <a href="https://developer.mozilla.org/docs/Web/API/WebRTC_API" rel="noopener">WebRTC API</a> add up
to a rich tool set for recording, transferring, and playing video streams.
While solving certain high-level tasks, these APIs don't let web
programmers work with individual components of a video stream such as frames
and unmuxed chunks of encoded video or audio.
To get low-level access to these basic components, developers have been using
WebAssembly to bring <a href="https://en.wikipedia.org/wiki/Video_codec" rel="noopener">video and audio
codecs</a> into the browser. But given
that modern browsers already ship with a variety of codecs (which are often
accelerated by hardware), repackaging them as WebAssembly seems like a waste of
human and computer resources.</p>
<p><a href="https://wicg.github.io/web-codecs/" rel="noopener">WebCodecs API</a> eliminates this inefficiency
by giving programmers a way to use media components that are already present in
the browser. Specifically:</p>
<ul>
<li>Video and audio decoders</li>
<li>Video and audio encoders</li>
<li>Raw video frames</li>
<li>Image decoders</li>
</ul>
<p>The WebCodecs API is useful for web applications that require full control over the
way media content is processed, such as video editors, video conferencing, video
streaming, etc.</p>
<h2 id="status">Current status <a class="w-headline-link" href="#status">#</a></h2>
<div>
<div class="w-table-wrapper">
<table>
<thead>
<tr>
<th>Step</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. Create explainer</td>
<td><a href="https://github.com/WICG/web-codecs/blob/master/explainer.md" rel="noopener">Complete</a></td>
</tr>
<tr>
<td>2. Create initial draft of specification</td>
<td><a href="https://wicg.github.io/web-codecs/" rel="noopener">Complete</a></td>
</tr>
<tr>
<td>3. Gather feedback &amp; iterate on design</td>
<td>Complete</td>
</tr>
<tr>
<td>4. Origin trial</td>
<td>Complete</td>
</tr>
<tr>
<td>5. Launch</td>
<td>Chrome 94</td>
</tr>
</tbody>
</table>
</div></div>
<h2 id="video-processing-workflow">Video processing workflow <a class="w-headline-link" href="#video-processing-workflow">#</a></h2>
<p>Frames are the centerpiece in video processing. Thus in WebCodecs most classes
either consume or produce frames. Video encoders convert frames into encoded
chunks. Video decoders do the opposite.</p>
<p>Also <code>VideoFrame</code> plays nicely with other Web APIs by being a <a href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource" rel="noopener"><code>CanvasImageSource</code></a> and having a <a href="https://www.w3.org/TR/webcodecs/#dom-videoframe-videoframe" rel="noopener">constructor</a> that accepts <code>CanvasImageSource</code>.
So it can be used in functions like <a href="https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/drawImage" rel="noopener"><code>drawImage()</code></a> and<a href="https://developer.mozilla.org/docs/Web/API/WebGLRenderingContext/texImage2D" rel="noopener"><code>texImage2D()</code></a>. Also it can be constructed from canvases, bitmaps, video elements and other video frames.</p>
<p>WebCodecs API works well in tandem with the classes from <a href="https://w3c.github.io/mediacapture-transform/" rel="noopener">Insertable Streams API</a>
which connect WebCodecs to <a href="https://developer.mozilla.org/docs/Web/API/MediaStreamTrack" rel="noopener">media stream tracks</a>.</p>
<ul>
<li><code>MediaStreamTrackProcessor</code> breaks media tracks into individual frames.</li>
<li><code>MediaStreamTrackGenerator</code> creates a media track from a stream of frames.</li>
</ul>
<h2 id="webcodecs-and-web-workers">WebCodecs and web workers <a class="w-headline-link" href="#webcodecs-and-web-workers">#</a></h2>
<p>By design WebCodecs API does all the heavy lifting asynchronously and off the main thread.
But since frame and chunk callbacks can often be called multiple times a second,
they might clutter the main thread and thus make the website less responsive.
Therefore it is preferable to move handling of individual frames and encoded chunks into a
web worker.</p>
<p>To help with that, <a href="https://developer.mozilla.org/docs/Web/API/ReadableStream" rel="noopener">ReadableStream</a>
provides a convenient way to automatically transfer all frames coming from a media
track to the worker. For example, <code>MediaStreamTrackProcessor</code> can be used to obtain a
<code>ReadableStream</code> for a media stream track coming from the web camera. After that
the stream is transferred to a web worker where frames are read one by one and queued
into a <code>VideoEncoder</code>.</p>
<p>With <a href="https://developers.google.com/web/updates/2018/08/offscreen-canvas#unblock_main_thread" rel="noopener"><code>HTMLCanvasElement.transferControlToOffscreen</code></a> even rendering can be done off the main thread. But if all the high level tools turned
out to be inconvenient, <code>VideoFrame</code> itself is <a href="https://developer.mozilla.org/docs/Web/API/Transferable" rel="noopener">transferable</a> and may be
moved between workers.</p>
<h2 id="webcodecs-in-action">WebCodecs in action <a class="w-headline-link" href="#webcodecs-in-action">#</a></h2>
<h3 id="encoding">Encoding <a class="w-headline-link" href="#encoding">#</a></h3>
<figure class="w-figure">
  <img     alt="The path from a Canvas or an ImageBitmap to the network or to storage"          decoding="async"     height="393"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format"     srcset="https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/lEovMYp8oh1JSClCLCiD.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">The path from a <code>Canvas</code> or an <code>ImageBitmap</code> to the network or to storage</figcaption>
</figure>
<p>It all starts with a <code>VideoFrame</code>.
There are three ways to construct video frames.</p>
<ul>
<li>From an image source like a canvas, an image bitmap, or a video element.</li>
</ul>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cnv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// draw something on the canvas</span><br>…<br><span class="token keyword">let</span> frame_from_canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoFrame</span><span class="token punctuation">(</span>cnv<span class="token punctuation">,</span> <span class="token punctuation">{</span> timestamp<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><ul>
<li>Use <code>MediaStreamTrackProcessor</code> to pull frames from a <a href="https://developer.mozilla.org/docs/Web/API/MediaStreamTrack" rel="noopener"><code>MediaStreamTrack</code></a></li>
</ul>
<web-copy-code><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">{</span> … <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> track <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> media_processor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaStreamTrackProcessor</span><span class="token punctuation">(</span>track<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> reader <span class="token operator">=</span> media_processor<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span><br>        <span class="token keyword">break</span><span class="token punctuation">;</span><br>      <span class="token keyword">let</span> frame_from_camera <span class="token operator">=</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>
</web-copy-code><ul>
<li>Create a frame from its binary pixel representation in a <a href="https://developer.mozilla.org/docs/Web/API/BufferSource" rel="noopener"><code>BufferSource</code></a></li>
</ul>
<web-copy-code><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> pixelSize <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token punctuation">{</span>timestamp<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> codedWidth<span class="token operator">:</span> <span class="token number">320</span><span class="token punctuation">,</span> codedHeight<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> format<span class="token operator">:</span> <span class="token string">'RGBA'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>init<span class="token punctuation">.</span>codedWidth <span class="token operator">*</span> init<span class="token punctuation">.</span>codedHeight <span class="token operator">*</span> pixelSize<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> init<span class="token punctuation">.</span>codedWidth<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> init<span class="token punctuation">.</span>codedHeight<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> init<span class="token punctuation">.</span>codedWidth <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> pixelSize<span class="token punctuation">;</span><br>      data<span class="token punctuation">[</span>offset<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x7F</span><span class="token punctuation">;</span>      <span class="token comment">// Red</span><br>      data<span class="token punctuation">[</span>offset <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>  <span class="token comment">// Green</span><br>      data<span class="token punctuation">[</span>offset <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xD4</span><span class="token punctuation">;</span>  <span class="token comment">// Blue</span><br>      data<span class="token punctuation">[</span>offset <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x0FF</span><span class="token punctuation">;</span> <span class="token comment">// Alpha</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">let</span> frame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoFrame</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>No matter where they are coming from, frames can be encoded into
<code>EncodedVideoChunk</code> objects with a <code>VideoEncoder</code>.</p>
<p>Before encoding, <code>VideoEncoder</code> needs to be given two JavaScript objects:</p>
<ul>
<li>Init dictionary with two functions for handling encoded chunks and
errors. These functions are developer-defined and can't be changed after
they're passed to the <code>VideoEncoder</code> constructor.</li>
<li>Encoder configuration object, which contains parameters for the output
video stream. You can change these parameters later  by calling <code>configure()</code>.</li>
</ul>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token punctuation">{</span><br>  output<span class="token operator">:</span> handleChunk<span class="token punctuation">,</span><br>  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><br>  codec<span class="token operator">:</span> <span class="token string">'vp8'</span><span class="token punctuation">,</span><br>  width<span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span><br>  height<span class="token operator">:</span> <span class="token number">480</span><span class="token punctuation">,</span><br>  bitrate<span class="token operator">:</span> <span class="token number">2_000_000</span><span class="token punctuation">,</span> <span class="token comment">// 2 Mbps</span><br>  framerate<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoEncoder</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span><br>encoder<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>After the encoder has been set up, it's ready to accept frames via <code>encode()</code> method.
Both <code>configure()</code> and <code>encode()</code> return immediately without waiting for the
actual work to complete. It allows several frames to queue for encoding at the
same time, while <code>encodeQueueSize</code> shows how many requests are waiting in the queue
for previous encodes to finish.
Errors are reported either by immediately throwing an exception, in case the arguments
or the order of method calls violates the API contract, or by calling the <code>error()</code>
callback for problems encountered in the codec implementation.
If encoding completes successfully the <code>output()</code>
callback is called with a new encoded chunk as an argument.
Another important detail here is that frames need to be told when they are no
longer needed by calling <code>close()</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> frame_counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> track <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getVideoTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> media_processor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaStreamTrackProcessor</span><span class="token punctuation">(</span>track<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> reader <span class="token operator">=</span> media_processor<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> frame <span class="token operator">=</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>encoder<span class="token punctuation">.</span>encodeQueueSize <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// Too many frames in flight, encoder is overwhelmed</span><br>      <span class="token comment">// let's drop this frame.</span><br>      frame<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      frame_counter<span class="token operator">++</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> insert_keyframe <span class="token operator">=</span> <span class="token punctuation">(</span>frame_counter <span class="token operator">%</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><br>      encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">{</span> keyFrame<span class="token operator">:</span> insert_keyframe <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      frame<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Finally it's time to finish encoding code by writing a function that handles
chunks of encoded video as they come out of the encoder.
Usually this function would be sending data chunks over the network or <a href="https://en.wikipedia.org/wiki/Multiplexing#Video_processing" rel="noopener">muxing
</a>them into a media
container for storage.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChunk</span><span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> metadata</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>metadata<span class="token punctuation">.</span>decoderConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Decoder needs to be configured (or reconfigured) with new parameters</span><br>    <span class="token comment">// when metadata has a new decoderConfig.</span><br>    <span class="token comment">// Usually it happens in the beginning or when the encoder has a new</span><br>    <span class="token comment">// codec specific binary configuration. (VideoDecoderConfig.description).</span><br>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/upload_extra_data'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><br>      method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span><br>      headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/octet-stream'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      body<span class="token operator">:</span> metadata<span class="token punctuation">.</span>decoderConfig<span class="token punctuation">.</span>description<br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// actual bytes of encoded data</span><br>  <span class="token keyword">let</span> chunkData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  chunk<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>chunkData<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">let</span> timestamp <span class="token operator">=</span> chunk<span class="token punctuation">.</span>timestamp<span class="token punctuation">;</span>        <span class="token comment">// media time in microseconds</span><br>  <span class="token keyword">let</span> is_key <span class="token operator">=</span> chunk<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'key'</span><span class="token punctuation">;</span>       <span class="token comment">// can also be 'delta'</span><br>  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/upload_chunk?timestamp=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timestamp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;type=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunk<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span><br>    headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/octet-stream'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    body<span class="token operator">:</span> chunkData<br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>If at some point you'd need to make sure that all pending encoding requests have
been completed, you can call <code>flush()</code> and wait for its promise.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">await</span> encoder<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="decoding">Decoding <a class="w-headline-link" href="#decoding">#</a></h3>
<figure class="w-figure">
  <img     alt="The path from the network or storage to a Canvas or an ImageBitmap."          decoding="async"     height="419"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format"     srcset="https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/sQ51XsLqKMgSQMCZjIN0B7hlBO02/fzi3E4v2jJJj5QAlhoRG.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">The path from the network or storage to a <code>Canvas</code> or an <code>ImageBitmap</code>.</figcaption>
</figure>
<p>Setting up a <code>VideoDecoder</code> is similar to what's been done for the
<code>VideoEncoder</code>: two functions are passed when the decoder is created, and codec
parameters are given to <code>configure()</code>.</p>
<p>The set of codec parameters varies from codec to codec. For example H.264 codec
might need a <a href="https://wicg.github.io/web-codecs/#dom-audiodecoderconfig-description" rel="noopener">binary blob</a>
of avcC, unless it's encoded in so called AnnexB format ( <code>encoderConfig.avc = { format: &quot;annexb&quot; }</code> ).</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token punctuation">{</span><br>  output<span class="token operator">:</span> handleFrame<span class="token punctuation">,</span><br>  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><br>  codec<span class="token operator">:</span> <span class="token string">'vp8'</span><span class="token punctuation">,</span><br>  codedWidth<span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span><br>  codedHeight<span class="token operator">:</span> <span class="token number">480</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> decoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoDecoder</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span><br>decoder<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Once the decoder is initialized, you can start feeding it with <code>EncodedVideoChunk</code> objects.
To create a chunk, you'll need:</p>
<ul>
<li>A <a href="https://developer.mozilla.org/docs/Web/API/BufferSource" rel="noopener"><code>BufferSource</code></a> of encoded video data</li>
<li>the chunk's start timestamp in microseconds (media time of the first encoded frame in the chunk)</li>
<li>the chunk's type, one of:
<ul>
<li><code>key</code> if the chunk can be decoded independently from previous chunks</li>
<li><code>delta</code> if the chunk can only be decoded after one or more previous chunks have been decoded</li>
</ul>
</li>
</ul>
<p>Also any chunks emitted by the encoder are ready for the decoder as is.
All of the things said above about error reporting and the asynchronous nature
of encoder's methods are equally true for decoders as well.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> responses <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">downloadVideoChunksFromServer</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> responses<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> chunk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EncodedVideoChunk</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    timestamp<span class="token operator">:</span> responses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">,</span><br>    type<span class="token operator">:</span> <span class="token punctuation">(</span>responses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">?</span> <span class="token string">'key'</span> <span class="token operator">:</span> <span class="token string">'delta'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    data<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span> <span class="token punctuation">(</span> responses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>body <span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">await</span> decoder<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>Now it's time to show how a freshly decoded frame can be shown on the page. It's
better to make sure that the decoder output callback  (<code>handleFrame()</code>)
quickly returns. In the example below, it only adds a frame to the queue of
frames ready for rendering.
Rendering happens separately, and consists of two steps:</p>
<ol>
<li>Waiting for the right time to show the frame.</li>
<li>Drawing the frame on the canvas.</li>
</ol>
<p>Once a frame is no longer needed, call <code>close()</code> to release underlying memory
before the garbage collector gets to it, this will reduce the average amount of
memory used by the web application.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> cnv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas_to_render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> ctx <span class="token operator">=</span> cnv<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> ready_frames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> underflow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> time_base <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleFrame</span><span class="token punctuation">(</span><span class="token parameter">frame</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  ready_frames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>underflow<span class="token punctuation">)</span><br>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>render_frame<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">time_ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> time_ms<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">calculateTimeTillNextFrame</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>time_base <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><br>    time_base <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> media_time <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time_base<span class="token punctuation">;</span><br>  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>timestamp <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">-</span> media_time<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">render_frame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>ready_frames<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    underflow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">let</span> frame <span class="token operator">=</span> ready_frames<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  underflow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Based on the frame's timestamp calculate how much of real time waiting</span><br>  <span class="token comment">// is needed before showing the next frame.</span><br>  <span class="token keyword">let</span> time_till_next_frame <span class="token operator">=</span> <span class="token function">calculateTimeTillNextFrame</span><span class="token punctuation">(</span>frame<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span>time_till_next_frame<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  frame<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Immediately schedule rendering of the next frame</span><br>  <span class="token function">setTimeout</span><span class="token punctuation">(</span>render_frame<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="demo">Demo <a class="w-headline-link" href="#demo">#</a></h2>
<p>The demo below shows how animation frames from a canvas are:</p>
<ul>
<li>captured at 25fps into a <code>ReadableStream</code> by <code>MediaStreamTrackProcessor</code></li>
<li>transferred to a web worker</li>
<li>encoded into H.264 video format</li>
<li>decoded again into a sequence of video frames</li>
<li>and rendered on the second canvas using <code>transferControlToOffscreen()</code></li>
</ul>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe
    allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi"
    loading="lazy"
    src="https://glitch.com/embed/#!/embed/new-webcodecs-blogpost-demo?attributionHidden=true&sidebarCollapsed=true&previewSize=100"
    style="height: 100%; width: 100%; border: 0;"
    title="new-webcodecs-blogpost-demo on Glitch"
  ></iframe>
</div>
<h3 id="other-demos">Other demos <a class="w-headline-link" href="#other-demos">#</a></h3>
<p>Also check out our other demos:</p>
<ul>
<li><a href="https://imagedecoder.glitch.me/" rel="noopener">Decoding gifs with ImageDecoder</a></li>
<li><a href="https://w3c.github.io/webcodecs/samples/capture-to-file/capture-to-file.html" rel="noopener">Capture camera input to a file</a></li>
<li><a href="https://w3c.github.io/webcodecs/samples/mp4-decode/" rel="noopener">MP4 playback</a></li>
<li><a href="https://w3c.github.io/webcodecs/samples/" rel="noopener">Other samples</a></li>
</ul>
<h2 id="use">Using the WebCodecs API <a class="w-headline-link" href="#use">#</a></h2>
<h2 id="feature-detection">Feature detection <a class="w-headline-link" href="#feature-detection">#</a></h2>
<p>To check for WebCodecs support:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'VideoEncoder'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// WebCodecs API is supported.</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><p>Keep in mind that WebCodecs API is only available in <a href="https://developer.mozilla.org/docs/Web/Security/Secure_Contexts" rel="noopener">secure contexts</a>,
so detection will fail if <a href="https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/isSecureContext" rel="noopener"><code>self.isSecureContext</code></a> is false.</p>
<h2 id="feedback">Feedback <a class="w-headline-link" href="#feedback">#</a></h2>
<p>The Chrome team wants to hear about your experiences with the WebCodecs API.</p>
<h3 id="tell-us-about-the-api-design">Tell us about the API design <a class="w-headline-link" href="#tell-us-about-the-api-design">#</a></h3>
<p>Is there something about the API that doesn't work like you expected? Or are
there missing methods or properties that you need to implement your idea? Have a
question or comment on the security model? File a spec issue on the
corresponding <a href="https://github.com/WICG/web-codecs/issues" rel="noopener">GitHub repo</a>, or add
your thoughts to an existing issue.</p>
<h3 id="report-a-problem-with-the-implementation">Report a problem with the implementation <a class="w-headline-link" href="#report-a-problem-with-the-implementation">#</a></h3>
<p>Did you find a bug with Chrome's implementation? Or is the implementation
different from the spec? File a bug at <a href="https://bugs.chromium.org/p/chromium/issues/entry?components=Blink%3EMedia%3EWebCodecs" rel="noopener">new.crbug.com</a>.
Be sure to include as much detail as you can, simple instructions for
reproducing, and enter <code>Blink&gt;Media&gt;WebCodecs</code> in the <strong>Components</strong> box.
<a href="https://glitch.com/" rel="noopener">Glitch</a> works great for sharing quick and easy repros.</p>
<h3 id="show-support-for-the-api">Show support for the API <a class="w-headline-link" href="#show-support-for-the-api">#</a></h3>
<p>Are you planning to use the WebCodecs API? Your public support helps the
Chrome team to prioritize features and shows other browser vendors how critical
it is to support them.</p>
<p>Send emails to <a href="mailto:media-dev@chromium.org" rel="noopener">media-dev@chromium.org</a> or send a tweet
to [@ChromiumDev][cr-dev-twitter] using the hashtag
<a href="https://twitter.com/search?q=%23WebCodecs&amp;src=typed_query&amp;f=live" rel="noopener"><code>#WebCodecs</code></a>
and let us know where and how you're using it.</p>
<p><a href="https://unsplash.com/photos/8eQOBtgn9Qo" rel="noopener">Hero image</a> by
<a href="https://unsplash.com/@dmjdenise" rel="noopener">Denise Jans</a>
on <a href="https://unsplash.com" rel="noopener">Unsplash</a>.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/media/">Media</a>
          
        
          
            
            <a class="pill" href="/tags/origin-trials/">Origin Trials</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Aug 26, 2021</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/webcodecs/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="Eugene Zemtsov"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
