
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
<script>
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting && currentSetting !== currentAttribute) {
      document.documentElement.setAttribute('data-user-theme', currentSetting);
    }
  };
window.applyThemeSetting();
</script>

  
  <link rel="stylesheet" href="/css/next.css?v=46382cbe7a037">
  <link rel="stylesheet" href="/css/legacy-rollout.css?v=f73981c9542ff">
  <link rel="preload" as="font" crossorigin href="/fonts/material-icons/regular.woff2">


<link rel="preload" as="font" crossorigin href="/fonts/google-sans/regular/latin.woff2">
<link rel="preload" as="font" crossorigin href="/fonts/google-sans/bold/latin.woff2">

<meta name="theme-color" content="#fff"/>




<title>Unblocking clipboard access</title>
<meta name="description" content="Async Clipboard API simplifies permissions-friendly copy and paste." />

<link rel="canonical" href="https://web.dev/async-clipboard/" />

<meta itemprop="name" content="Unblocking clipboard access" />
<meta itemprop="description" content="Async Clipboard API simplifies permissions-friendly copy and paste." />
<meta itemprop="image" content="https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://web.dev/async-clipboard/" />
<meta property="og:site_name" content="web.dev" />
<meta property="og:title" content="Unblocking clipboard access" />
<meta property="og:description" content="Async Clipboard API simplifies permissions-friendly copy and paste." />
<meta property="og:image" content="https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&fit=max&w=1200&fm=auto" />
<meta property="og:image:alt" content="Clipboard with shopping list" />
<meta property="tag" content="capabilities" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Unblocking clipboard access" />
<meta name="twitter:description" content="Async Clipboard API simplifies permissions-friendly copy and paste." />
<meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&fit=max&w=1200&fm=auto" />
<link
  rel="alternate"
  href="/feed.xml"
  type="application/atom+xml"
  data-title="web.dev feed"
/>

<link rel="manifest" href="/manifest.webmanifest" />

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="mask-icon" color="#0054ff" href="/images/safari-pinned-tab.svg">



<script>
window.ga =
  window.ga ||
  function () {
    (ga.q = ga.q || []).push(arguments);
  };
ga.l = +new Date();
ga('create', 'UA-126406676-2');
ga('set', 'transport', 'beacon');
ga('set', 'anonymizeIp', true);
ga('set', 'page', window.location.pathname);
ga('set', 'dimension5', '4');
ga('send', 'pageview');
</script>







<script>
function loadScript(url, type) {
  const s = document.createElement('script');
  s.src = url;
  if (type) {
    s.type = type;
  }
  if (type === 'module') {
    s.async = false; // Preserve load order.
    const pre = document.createElement('link');
    pre.rel = 'modulepreload';
    pre.href = url;
    document.head.append(pre);
    // We use DOMContentLoaded as the loader script is running sync, and inserting a module script here doesn't defer. This brings back normal type="module" behavior.
    window.addEventListener('DOMContentLoaded', () => {
      document.head.append(s);
    });
  } else {
    document.head.append(s);
  }
}
loadScript('/js/app.js?v=29e12131c1a9f', 'module');




  loadScript('/js/content.js?v=52260f19fd81', 'module');


  loadScript('https://www.google-analytics.com/analytics.js', null);

</script>

  </head>
  <body class="unresolved">
    
    <web-snackbar-container></web-snackbar-container>

    
<a href="#main" class="skip-link button" data-type="primary">Skip to content</a>


<web-header role="banner" class="site-header">
  <div class="cluster gutter-base">
    <button class="icon-button tooltip color-core-text md:hidden-yes" data-open-drawer-button data-alignment="right">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span class="tooltip__content">Open menu</span>
    </button>
    <a href="/" class="site-header__brand brand">
      


  <svg role="img" aria-label="web.dev" xmlns="http://www.w3.org/2000/svg" width="119.79" height="22.32" viewBox="0 0 119.79 22.32"><path class="brand__text" d="M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z" fill="#5f6368" fill-rule="evenodd"/><path d="M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z" fill="#6cf"/><path d="M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z" fill="#06f" fill-rule="evenodd"/><path d="m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z" fill="#c6f"/><circle cx="19.27" cy="19.27" r="3.04" fill="#06f"/></svg>


    </a>
  </div>
  <web-navigation-drawer type="standard">
    <nav class="site-header__nav" aria-label="main navigation" data-drawer-container>
      <a
        class="site-header__link"
        href="/learn/" data-category="Site-Wide Custom Events"
        data-label="Tab: Learn"
        >
          Learn
      </a>
      <a
        class="site-header__link"
        href="/measure/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Measure"
        >
        Measure
      </a>
      <a
        class="site-header__link"
        href="/blog/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Blog"
        >
        Blog
      </a>
      <a
        class="site-header__link"
        href="/tags/case-study/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: Case Studies"
        >
        Case studies
      </a>
      <a
        class="site-header__link"
        href="/about/"
        data-category="Site-Wide Custom Events"
        data-label="Tab: About" >
        About
      </a>
      <button class="icon-button tooltip color-core-text md:hidden-yes" data-drawer-close-button>
        








  










  <svg class="icon " role="img" aria-label="close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>


        <span class="tooltip__content">Close</span>
      </button>
    </nav>
  </web-navigation-drawer>
  <div class="site-header__actions cluster">
    <div class="site-header__search">
      <web-search results-id="search-main-results" i18n="{&quot;search&quot;:{&quot;en&quot;:&quot;Search&quot;},&quot;open_search&quot;:{&quot;en&quot;:&quot;Open search&quot;},&quot;all_articles&quot;:{&quot;en&quot;:&quot;All articles&quot;},&quot;close_search&quot;:{&quot;en&quot;:&quot;Close search&quot;}}"></web-search>
      <web-search-results id="search-main-results"></web-search-results>
    </div>
  </div>
</web-header>

<main id="main">
  
    
  
  





  <img     alt="Clipboard with shopping list"     class="hero-image"     decoding="async"     height="480"               sizes="100vw"     src="https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format"     srcset="https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/aA9eqo0ZZNHFcFJGUGQs.jpg?auto=format&w=1600 1600w"          width="1600"   />


<div class="post wrapper" data-flush>
  
    
    
    
  
  

  <div class="sidebar region flex-align-start flex-dir-rev flex-wrap-no">
    

  <nav class="course__toc toc over-scroll hidden-yes xl:hidden-no" data-type="side" aria-label="On this page">
    <div class="course-toc__heading font-google-sans weight-medium">On this page</div>
    <web-scroll-spy>
      <div class="toc__wrapper flow-recursive">
        <ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#copy:-writing-data-to-the-clipboard">Copy: writing data to the clipboard</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#writetext()">writeText()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#write()">write()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#the-copy-event">The copy event</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#paste:-reading-data-from-clipboard">Paste: reading data from clipboard</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#readtext()">readText()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#read()">read()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#working-with-pasted-files">Working with pasted files</a></li><li class="toc__listitem"><a class="toc__anchor" href="#the-paste-event">The paste event</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#handling-multiple-file-types">Handling multiple file types</a></li><li class="toc__listitem"><a class="toc__anchor" href="#security-and-permissions">Security and permissions</a></li><li class="toc__listitem"><a class="toc__anchor" href="#permissions-policy-integration">Permissions policy integration</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#demos">Demos</a></li><li class="toc__listitem"><a class="toc__anchor" href="#next-steps">Next Steps</a></li><li class="toc__listitem"><a class="toc__anchor" href="#related-links">Related links</a></li><li class="toc__listitem"><a class="toc__anchor" href="#acknowledgements">Acknowledgements</a></li></ul>
      </div>
    </web-scroll-spy>
  </nav>


    
    <article class="prose legacy-rollout">
      <header class="flow gap-bottom-size-3">
        
          <nav class="breadcrumbs" aria-label="breadcrumbs">
            <ul class="breadcrumbs__list" role="list">
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, home breadcrumb"
                  data-action="click"
                  href="/"
                >
                  Home
                </a>
              </li>
              
              <li>
                <a
                  class="gc-analytics-event"
                  data-category="web.dev"
                  data-label="post, path breadcrumb"
                  data-action="click"
                  href="/blog"
                >
                  All articles
                </a>
              </li>
              
            </ul>
          </nav>
        

        <h1 id="unblocking-clipboard-access">Unblocking clipboard access</h1>
        
          <p class="color-mid-text flow-space-base">
            Safer, unblocked clipboard access for text and images
          </p>
        

        
          <div class="flow-space-size-1 color-mid-text text-size-0">
            <time>Jul 31, 2020</time>
             — Updated <time>Jul 29, 2021</time> 
          </div>
        

        
        

        

        
          <div class="cluster flow-space-size-2">
            
              <div class="author">
  <a class="avatar" href="/authors/developit/"> <img     alt="Jason Miller"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/bPCYfhUgxdCpXhKAWc9X.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/developit/">Jason Miller</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/_developit">Twitter</a>
               <a href="https://github.com/developit">GitHub</a>
               
               <a href="https://jasonformat.com">Homepage</a>
             </div>
  </div>
</div>
            
              <div class="author">
  <a class="avatar" href="/authors/thomassteiner/"> <img     alt="Thomas Steiner"     class="w-author__image"     decoding="async"     height="64"          loading="lazy"     sizes="(min-width: 64px) 64px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?auto=format&fit=crop&h=64&w=64"     srcset="https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x"          width="64"   /> </a>
  <div class="flow">
    <cite class="author__name">
      <a href="/authors/thomassteiner/">Thomas Steiner</a>
    </cite>
    <div class="author__links cluster">
               <a href="https://twitter.com/tomayac">Twitter</a>
               <a href="https://github.com/tomayac">GitHub</a>
               <a href="https://glitch.com/@tomayac">Glitch</a>
               <a href="https://blog.tomayac.com/">Homepage</a>
             </div>
  </div>
</div>
            
          </div>
        
      </header>

      

      

  

  <div class="xl:hidden-yes flow-space-size-1">
    <details data-type="inner" role="navigation" aria-label="On this page">
      <summary>
        On this page
      </summary>
      <div class="toc"><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#copy:-writing-data-to-the-clipboard">Copy: writing data to the clipboard</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#writetext()">writeText()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#write()">write()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#the-copy-event">The copy event</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#paste:-reading-data-from-clipboard">Paste: reading data from clipboard</a><ul class="toc__list"><li class="toc__listitem"><a class="toc__anchor" href="#readtext()">readText()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#read()">read()</a></li><li class="toc__listitem"><a class="toc__anchor" href="#working-with-pasted-files">Working with pasted files</a></li><li class="toc__listitem"><a class="toc__anchor" href="#the-paste-event">The paste event</a></li></ul></li><li class="toc__listitem"><a class="toc__anchor" href="#handling-multiple-file-types">Handling multiple file types</a></li><li class="toc__listitem"><a class="toc__anchor" href="#security-and-permissions">Security and permissions</a></li><li class="toc__listitem"><a class="toc__anchor" href="#permissions-policy-integration">Permissions policy integration</a></li><li class="toc__listitem"><a class="toc__anchor" href="#feature-detection">Feature detection</a></li><li class="toc__listitem"><a class="toc__anchor" href="#demos">Demos</a></li><li class="toc__listitem"><a class="toc__anchor" href="#next-steps">Next Steps</a></li><li class="toc__listitem"><a class="toc__anchor" href="#related-links">Related links</a></li><li class="toc__listitem"><a class="toc__anchor" href="#acknowledgements">Acknowledgements</a></li></ul></div>
    </details>
  </div>



      <p>Over the past few years, browsers have used
<a href="https://developers.google.com/web/updates/2015/04/cut-and-copy-commands" rel="noopener"><code>document.execCommand()</code></a>
for clipboard interactions. Though widely supported, this method of cutting and
pasting came at a cost: clipboard access was synchronous, and could only read
and write to the DOM.</p>
<p>That's fine for small bits of text, but there are many cases where blocking the
page for clipboard transfer is a poor experience. Time consuming sanitization or
image decoding might be needed before content can be safely pasted. The browser
may need to load or inline linked resources from a pasted document. That would
block the page while waiting on the disk or network. Imagine adding permissions
into the mix, requiring that the browser block the page while requesting
clipboard access. At the same time, the permissions put in place around
<code>document.execCommand()</code> for clipboard interaction are loosely defined and vary
between browsers.</p>
<p>The
<a href="https://www.w3.org/TR/clipboard-apis/#async-clipboard-api" rel="noopener">Async Clipboard API</a>
addresses these issues, providing a well-defined permissions model that doesn't
block the page. Safari recently announced  <a href="https://webkit.org/blog/10855/" rel="noopener">support for it in version
13.1</a>. With that, major browsers have a basic
level of support in place. As of this writing, Firefox only supports text; and
image support is limited to PNGs in some browsers. If you're interested in using
the API,
<a href="https://developer.mozilla.org/docs/Web/API/Clipboard#Browser_compatibility" rel="noopener">consult a browser support table</a>
before proceeding.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text">
<div class=" flow">
<p>The Async Clipboard API is limited to handling text and images. Chrome 84
introduces an experimental feature that allows the clipboard to handle any
arbitrary data type.</p>
</div></aside>
<h2 id="copy:-writing-data-to-the-clipboard">Copy: writing data to the clipboard <a class="w-headline-link" href="#copy:-writing-data-to-the-clipboard">#</a></h2>
<h3 id="writetext()">writeText() <a class="w-headline-link" href="#writetext()">#</a></h3>
<p>To copy text to the clipboard call <code>writeText()</code>. Since this API is
asynchronous, the <code>writeText()</code> function returns a Promise that resolves or
rejects depending on whether the passed text is copied successfully:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">copyPageUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Page URL copied to clipboard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Failed to copy: '</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="write()">write() <a class="w-headline-link" href="#write()">#</a></h3>
<p>Actually, <code>writeText()</code> is just a convenience method for the generic <code>write()</code>
method, which also lets you copy images to the clipboard. Like <code>writeText()</code>, it
is asynchronous and returns a Promise.</p>
<p>To write an image to the clipboard, you need the image as a
<a href="https://developer.mozilla.org/docs/Web/API/blob" rel="noopener"><code>blob</code></a>. One way to do
this is by requesting the image from a server using <code>fetch()</code>, then calling
<a href="https://developer.mozilla.org/docs/Web/API/Body/blob" rel="noopener"><code>blob()</code></a> on the
response.</p>
<p>Requesting an image from the server may not be desirable or possible for a
variety of reasons. Fortunately, you can also draw the image to a canvas and
call the canvas'
<a href="https://developer.mozilla.org/docs/Web/API/HTMLCanvasElement/toBlob" rel="noopener"><code>toBlob()</code></a>
method.</p>
<p>Next, pass an array of <code>ClipboardItem</code> objects as a parameter to the <code>write()</code>
method. Currently you can only pass one image at a time, but we hope to add
support for multiple images in the future. <code>ClipboardItem</code> takes an object with
the MIME type of the image as the key and the blob as the value. For Blob
objects obtained from <code>fetch()</code> or <code>canvas.toBlob()</code>, the <code>blob.type</code> property
automatically contains the correct MIME type for an image.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">try</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> imgURL <span class="token operator">=</span> <span class="token string">'/images/generic/file.png'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>imgURL<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> data<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      <span class="token punctuation">[</span>blob<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">:</span> blob<br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Image copied.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><aside class="aside flow bg-state-warn-bg color-core-text">
<p class="cluster ">
<span class="aside__icon box-block color-state-warn-text"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Warning sign" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M23 21L12 2 1 21h22zm-12-3v-2h2v2h-2zm0-4h2v-4h-2v4z" />
</svg></span>
<strong>Warning</strong></p>
<div class=" flow">
<p>Safari (WebKit) treats user activation differently than Chromium (Blink)
(see <a href="https://bugs.webkit.org/show_bug.cgi?id=222262" rel="noopener">WebKit bug #222262</a>).
For Safari, run all asynchronous operations in a promise
whose result you assign to the <code>ClipboardItem</code>:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token string">'foo/bar'</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token comment">// Prepare `blobValue` of type `foo/bar`</span><br>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>blobValue<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'foo/bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</web-copy-code></div></aside>
<h3 id="the-copy-event">The copy event <a class="w-headline-link" href="#the-copy-event">#</a></h3>
<p>In the case where a user initiates a clipboard copy, non-textual data is
provided as a Blob for you. The
<a href="https://developer.mozilla.org/docs/Web/API/Document/copy_event" rel="noopener"><code>copy</code> event</a>
includes a <code>clipboardData</code> property with the items already in the right format,
eliminating the need to manually create a Blob. Call <code>preventDefault()</code> to
prevent the default behavior in favor of your own logic, then copy contents to
the clipboard. What's not covered in this example is how to fall back to earlier
APIs when the Clipboard API isn't supported. I'll cover that under
<a href="#feature-detection">Feature detection</a>, later in this article.</p>
<web-copy-code><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> clipboardItems <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'image/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">continue</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        clipboardItems<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>          <span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>            <span class="token punctuation">[</span>item<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token operator">:</span> item<span class="token punctuation">,</span><br>          <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>clipboardItems<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Image copied.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h2 id="paste:-reading-data-from-clipboard">Paste: reading data from clipboard <a class="w-headline-link" href="#paste:-reading-data-from-clipboard">#</a></h2>
<h3 id="readtext()">readText() <a class="w-headline-link" href="#readtext()">#</a></h3>
<p>To read text from the clipboard, call <code>navigator.clipboard.readText()</code> and wait
for the returned Promise to resolve:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getClipboardContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Pasted content: '</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Failed to read clipboard contents: '</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="read()">read() <a class="w-headline-link" href="#read()">#</a></h3>
<p>The <code>navigator.clipboard.read()</code> method is also asynchronous and returns a
Promise. To read an image from the clipboard, obtain a list of
<a href="https://developer.mozilla.org/docs/Web/API/ClipboardItem" rel="noopener"><code>ClipboardItem</code></a>
objects, then iterate over them.</p>
<p>Each <code>ClipboardItem</code> can hold its contents in different types, so you'll need to
iterate over the list of types, again using a <code>for...of</code> loop. For each type,
call the <code>getType()</code> method with the current type as an argument to obtain the
corresponding Blob. As before, this code is not tied to images, and will
work with other future file types.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getClipboardContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> clipboardItems <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> clipboardItem <span class="token keyword">of</span> clipboardItems<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> type <span class="token keyword">of</span> clipboardItem<span class="token punctuation">.</span>types<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> clipboardItem<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h3 id="working-with-pasted-files">Working with pasted files <a class="w-headline-link" href="#working-with-pasted-files">#</a></h3>
<p>It is useful for users to be able to use clipboard keyboard shortcuts such as
<kbd>ctrl</kbd>+<kbd>c</kbd> and <kbd>ctrl</kbd>+<kbd>v</kbd>.
Chromium exposes <em>read-only</em> files on the clipboard as outlined below.
This triggers when the user hits the operating system's default paste shortcut
or when the user clicks <strong>Edit</strong> then <strong>Paste</strong> in the browser's menu bar.
No further plumbing code is needed.</p>
<web-copy-code><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"paste"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token comment">// Read the file's contents, assuming it's a text file.</span><br>  <span class="token comment">// There is no way to write back to it.</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> file<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h3 id="the-paste-event">The paste event <a class="w-headline-link" href="#the-paste-event">#</a></h3>
<p>As noted before, there are plans to introduce events to work with the Clipboard API,
but for now you can use the existing <code>paste</code> event. It works nicely with the new
asynchronous methods for reading clipboard text. As with the <code>copy</code> event, don't
forget to call <code>preventDefault()</code>.</p>
<web-copy-code><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'paste'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Pasted text: '</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>As with the <code>copy</code> event, falling back to earlier APIs when the Clipboard API
isn't supported will be covered under <a href="#feature-detection">Feature detection</a>.</p>
<h2 id="handling-multiple-file-types">Handling multiple file types <a class="w-headline-link" href="#handling-multiple-file-types">#</a></h2>
<p>Most implementations put multiple data formats on the clipboard for a single cut
or copy operation. There are two reasons for this: as an app developer, you have
no way of knowing the capabilities of the app that a user wants to copy text or images to,
and many applications support pasting structured data as plain text. This is
presented to users with an <strong>Edit</strong> menu item with a name such as <strong>Paste and
match style</strong> or <strong>Paste without formatting</strong>.</p>
<p>The following example shows how to do this. This example uses <code>fetch()</code> to obtain
image data, but it could also come from a
<a href="https://developer.mozilla.org/docs/Web/HTML/Element/canvas" rel="noopener"><code>&lt;canvas&gt;</code></a>
or the <a href="/file-system-access/">File System Access API</a>.</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'kitten.png'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Cute sleeping kitten'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token string">'text/plain'</span><span class="token operator">:</span> text<span class="token punctuation">,</span><br>    <span class="token string">'image/png'</span><span class="token operator">:</span> image<br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
</web-copy-code><h2 id="security-and-permissions">Security and permissions <a class="w-headline-link" href="#security-and-permissions">#</a></h2>
<p>Clipboard access has always presented a security concern for browsers. Without
proper permissions, a page could silently copy all manner of malicious content
to a user's clipboard that would produce catastrophic results when pasted.
Imagine a web page that silently copies <code>rm -rf /</code> or a
<a href="http://www.aerasec.de/security/advisories/decompression-bomb-vulnerability.html" rel="noopener">decompression bomb image</a>
to your clipboard.</p>
<figure class="w-figure">
  <img     alt="Browser prompt asking the user for the clipboard permission."     class="w-screenshot"     decoding="async"     height="338"          loading="lazy"     sizes="(min-width: 800px) 800px, calc(100vw - 48px)"     src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format"     srcset="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Dt4QpuEuik9ja970Zos1.png?auto=format&w=1600 1600w"          width="800"   />
  <figcaption class="w-figcaption">
    The permission prompt for the Clipboard API.
  </figcaption>
</figure>
<p>Giving web pages unfettered read access to the clipboard is even more
troublesome. Users routinely copy sensitive information like passwords and
personal details to the clipboard, which could then be read by any page without
the user's knowledge.</p>
<p>As with many new APIs, the Clipboard API is only supported for pages served over
HTTPS. To help prevent abuse, clipboard access is only allowed when a page is
the active tab. Pages in active tabs can write to the clipboard without
requesting permission, but reading from the clipboard always requires
permission.</p>
<p>Permissions for copy and paste have been added to the
<a href="https://developers.google.com/web/updates/2015/04/permissions-api-for-the-web" rel="noopener">Permissions API</a>.
The <code>clipboard-write</code> permission is granted automatically to pages when they are
the active tab. The <code>clipboard-read</code> permission must be requested, which you can
do by trying to read data from the clipboard. The code below shows the latter:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> queryOpts <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'clipboard-read'</span><span class="token punctuation">,</span> allowWithoutGesture<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> permissionStatus <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>permissions<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryOpts<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Will be 'granted', 'denied' or 'prompt':</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Listen for changes to the permission state</span><br>permissionStatus<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>You can also control whether a user gesture is required to invoke cutting or
pasting using the <code>allowWithoutGesture</code> option. The default for this value
varies by browser, so you should always include it.</p>
<p>Here's where the asynchronous nature of the Clipboard API really comes in handy:
attempting to read or write clipboard data automatically prompts the user for
permission if it hasn't already been granted. Since the API is promise-based,
this is completely transparent, and a user denying clipboard permission causes
the promise to reject so the page can respond appropriately.</p>
<p>Because Chrome only allows clipboard access when a page is the active tab,
you'll find that some of the examples here don't run if pasted directly into
DevTools, since DevTools itself is the active tab. There's a trick: defer
clipboard access using <code>setTimeout()</code>, then quickly click inside the page to
focus it before the functions are called:</p>
<web-copy-code><pre class="language-js"><code class="language-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><h2 id="permissions-policy-integration">Permissions policy integration <a class="w-headline-link" href="#permissions-policy-integration">#</a></h2>
<p>To use the API in iframes, you need to enable it with
<a href="https://w3c.github.io/webappsec-permissions-policy/" rel="noopener">Permissions Policy</a>,
which defines a mechanism that allows for selectively enabling and
disabling various browser features and APIs. Concretely, you need to pass either
or both of <code>clipboard-read</code> or <code>clipboard-write</code>, depending on the needs of your app.</p>
<web-copy-code><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span><br><span class="highlight-line">    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.html<span class="token punctuation">"</span></span></span><br><mark class="highlight-line highlight-line-active">    <span class="token attr-name">allow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard-read; clipboard-write<span class="token punctuation">"</span></span></mark><br><span class="token punctuation">></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span></span></code></pre>
</web-copy-code><h2 id="feature-detection">Feature detection <a class="w-headline-link" href="#feature-detection">#</a></h2>
<p>To use the Async Clipboard API while supporting all browsers, test for
<code>navigator.clipboard</code> and fall back to earlier methods. For example, here's how
you might implement pasting to include other browsers.</p>
<web-copy-code><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'paste'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> text<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    text <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    text <span class="token operator">=</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Got pasted text: '</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>That's not the whole story. Before the Async Clipboard API, there were a mix of
different copy and paste implementations across web browsers. In most browsers,
the browser's own copy and paste can be triggered using
<code>document.execCommand('copy')</code> and <code>document.execCommand('paste')</code>. If the text
to be copied is a string not present in the DOM, it must be injected into the
DOM and selected:</p>
<web-copy-code><pre class="language-js"><code class="language-js">button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  input<span class="token punctuation">.</span>value <span class="token operator">=</span> text<span class="token punctuation">;</span><br>  input<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  input<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token string">'unsuccessful'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Failed to copy text.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</web-copy-code><p>In Internet Explorer, you can also access the clipboard through
<code>window.clipboardData</code>. If accessed within a user gesture such as a click
event—part of asking permission responsibly—no permissions prompt is shown.</p>
<h2 id="demos">Demos <a class="w-headline-link" href="#demos">#</a></h2>
<p>You can play with the Async Clipboard API in the demos below or
<a href="https://async-clipboard-api.glitch.me/" rel="noopener">directly on Glitch</a>.</p>
<p>The first example demonstrates moving text on and off the clipboard.</p>
<div class="glitch-embed-wrap" style="height: 500px; width: 100%;">
  <iframe
    src="https://async-clipboard-text.glitch.me/"
    title="async-clipboard-text on Glitch"
    allow="clipboard-read; clipboard-write"
    style="height: 100%; width: 100%; border: 0;">
  </iframe>
</div>
<p>To try the API with images use this demo. Recall that only PNGs are supported
and only in
<a href="https://developer.mozilla.org/docs/Web/API/Clipboard_API#browser_compatibility" rel="noopener">a few browsers</a>.</p>
<div class="glitch-embed-wrap" style="height: 500px; width: 100%;">
  <iframe
    src="https://async-clipboard-api.glitch.me/"
    title="async-clipboard-api on Glitch"
    allow="clipboard-read; clipboard-write"
    style="height: 100%; width: 100%; border: 0;">
  </iframe>
</div>
<h2 id="next-steps">Next Steps <a class="w-headline-link" href="#next-steps">#</a></h2>
<p>Chrome is actively working on expanding the Asynchronous Clipboard API with
simplified events aligned with the
<a href="https://developer.mozilla.org/docs/Web/API/HTML_Drag_and_Drop_API" rel="noopener">Drag and Drop API</a>.
Because of potential risks Chrome is
treading carefully. To stay up to date on Chrome's progress, watch this article
and our <a href="/blog/">blog</a> for updates.</p>
<p>For now, support for the Clipboard API is available in
<a href="https://developer.mozilla.org/docs/Web/API/Clipboard#Browser_compatibility" rel="noopener">a number of browsers</a>.</p>
<p>Happy copying and pasting!</p>
<h2 id="related-links">Related links <a class="w-headline-link" href="#related-links">#</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/docs/Web/API/Clipboard_API" rel="noopener">MDN</a></li>
</ul>
<h2 id="acknowledgements">Acknowledgements <a class="w-headline-link" href="#acknowledgements">#</a></h2>
<p>The Asynchronous Clipboard API was implemented by <a href="https://www.linkedin.com/in/darwinhuang/" rel="noopener">Darwin
Huang</a> and <a href="https://www.linkedin.com/in/garykac/" rel="noopener">Gary
Kačmarčík</a>. Darwin also provided the demo.
Thanks to <a href="https://github.com/kyarik" rel="noopener">Kyarik</a> and again Gary Kačmarčík for
reviewing parts of this article.</p>
<p>Hero image by <a href="https://unsplash.com/@markuswinkler" rel="noopener">Markus Winkler</a> on
<a href="https://unsplash.com/photos/7iSEHWsxPLw" rel="noopener">Unsplash</a>.</p>


      

      <div class="cluster gutter-base flow-space-size-2" role="list" aria-label="tags">
        
          
        
          
        
          
            
            <a class="pill" href="/tags/capabilities/">Capabilities</a>
          
        
      </div>

      <div class="text-size-0 color-mid-text">
        <span>
          
          Last updated: <time>Jul 29, 2021</time>
          
        </span>
        —
        <a
          href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/async-clipboard/index.md"
        >
          Improve article
        </a>
      </div>

      

      
        
        
      

      
        <div class="flow-space-size-2">
          <a href="/blog" class="button" data-type="secondary">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>

            <span>Return to all articles</span>
          </a>
        </div>
      
      <div class="docked-actions flow flow-space-base">    
        <div>
          <share-action class="gc-analytics-event fab"
            authors="@_developit | @tomayac"
            data-category="web.dev"
            data-label="share"
            data-action="click"
            data-type="primary"
            data-icon="share"
            tabindex="0"
            role="button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z" fill="currentColor"/></svg>
 
            <span class="fab__label">Share</span>
          </share-action>
        </div>
        
      </div>
    </article>
  </div>
</div>


</main>
<footer class="site-footer" role="contentinfo">
  <nav class="site-footer__primary-nav auto-grid" aria-label="footer navigation">
    <div>
      <h3 class="text-size-2 color-mid-text">Contribute</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title="
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            File a bug
          </a>
        </li>
        <li>
          <a href="https://github.com/googlechrome/web.dev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            View source
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Related content</h3>
      <ul class="w-footer__linkbox-list" role="list">
          <li>
          <a href="https://developer.chrome.com/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            developer.chrome.com
          </a>
        </li>
        <li>
          <a href="https://blog.chromium.org/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Chrome updates
          </a>
        </li>
        <li>
          <a href="https://developers.google.com/web/fundamentals"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            Web Fundamentals
          </a>
        </li>
        <li>
          <a href="/tags/case-study/"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 3)">
            Case studies
          </a>
        </li>
        <li>
          <a href="/podcasts/"
            data-category="Podcasts" data-label="Footer Link (index 5)">
            Podcasts
          </a>
        </li>
        <li>
          <a href="/shows/"
            data-category="Shows" data-label="Footer Link (index 6)">
            Shows
          </a>
        </li>
      </ul>
    </div>
    <div>
      <h3 class="text-size-2 color-mid-text">Connect</h3>
      <ul class="w-footer__linkbox-list" role="list">
        <li>
          <a href="https://www.twitter.com/ChromiumDev"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 1)">
            Twitter
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/user/ChromeDevelopers"
            data-category="Site-Wide Custom Events" data-label="Footer Link (index 2)">
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <nav class="site-footer__brand-nav repel" aria-label="Google developers">
    <ul class="cluster" role="list">
      <li>
        <a href="https://developers.google.com/" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link">
          <img loading="lazy" width="185" height="33" class="w-footer__utility-logo" src="/images/lockup-color.png"
            alt="Google Developers" />
        </a>
      </li>
      <li>
        <a href="https://developer.chrome.com/"
          data-category="Site-Wide Custom Events" data-label="Footer Chrome Link">
          Chrome
        </a>
      </li>
      <li>
        <a href="https://firebase.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Firebase Link">
          Firebase
        </a>
      </li>
      <li>
        <a href="https://cloud.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Google Cloud Platform Link">
          Google Cloud Platform
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/products"
          data-category="Site-Wide Custom Events" data-label="Footer All products Link">
          All products
        </a>
      </li>
    </ul>
    <web-language-select current="en"></web-language-select>
  </nav>
  <nav class="site-footer__misc-links" aria-label="terms and policies">
    <ul class="cluster" role="list">
      <li>
        <a href="https://policies.google.com/" data-category="Site-Wide Custom Events"
          data-label="Footer Terms and Privacy link">
          Terms &amp; Privacy
        </a>
      </li>
      <li>
        <a href="/community-guidelines/" data-category="Site-Wide Custom Events"
          data-label="Footer Community Guidelines link">
          Community Guidelines
        </a>
      </li>
    </ul>
  </nav>
  <p class="gap-top-size-2 text-size-0">
    Except as otherwise noted, the content of this page is licensed
    under the
    <a href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 License</a>,
    and code samples are licensed under the
    <a href="https://www.apache.org/licenses/LICENSE-2.0">
    Apache 2.0 License</a>. For details, see the
    <a href="https://developers.google.com/terms/site-policies">
    Google Developers Site Policies</a>.
  </p>
</footer>


  </body>
</html>
